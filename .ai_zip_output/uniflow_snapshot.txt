### Project root: C:\Users\User\Desktop\english-tutoring

=== FILE: build.py ===
# -*- coding: utf-8 -*-
"""
en_class scaffolder & content manager
Spec: /docs 專案，學生端首頁 + 後台 GUI + per-student manifest
Commands:
  init --student <id>
  new-student --student <id>
  add --student <id> --course <key> --date YYYY-MM-DD --type material|homework --format html|pdf|image|link [--src PATH] [--external-url URL] [--title "文字"] [--dry-run]
  batch-add --student <id> --course <key> --from-dir PATH [--dry-run]
"""
import argparse, datetime as dt, json, os, re, shutil, sys
from pathlib import Path

ROOT = Path(__file__).resolve().parent
DOCS = ROOT / "docs"

# ------------------------ helpers ------------------------
def p(*a): print(*a)
def ensure_dir(path: Path): path.mkdir(parents=True, exist_ok=True)
def write_text(path: Path, text: str, *, dry=False):
    ensure_dir(path.parent)
    if dry: p("  [dry] write", path); return
    path.write_text(text, encoding="utf-8"); p("  [+] write", path)
def copy_file(src: Path, dst: Path, *, dry=False):
    ensure_dir(dst.parent)
    if dry: p("  [dry] copy", src, "->", dst); return
    shutil.copy2(src, dst); p("  [+] copy", src, "->", dst)

def load_json(path: Path, default=None):
    if path.exists():
        return json.loads(path.read_text(encoding="utf-8"))
    return default if default is not None else {}

def backup_manifest(path: Path, *, dry=False):
    if not path.exists(): return
    ts = dt.datetime.now().strftime("%Y%m%d-%H%M%S")
    b = path.with_name(f"{path.stem}.backup-{ts}.json")
    if dry: p("  [dry] backup", path, "->", b); return
    shutil.copy2(path, b); p("  [*] backup", b)

def yymmdd(dtobj: dt.date): return dtobj.strftime("%y%m%d")

def yyyy_mm_dd_from_yymmdd(s: str):
    # '250810' -> '2025-08-10'（假設 20xx）
    return f"20{s[0:2]}-{s[2:4]}-{s[4:6]}"

def guess_format_from_ext(ext: str):
    e = ext.lower()
    if e in (".html", ".htm"): return "html"
    if e in (".pdf",): return "pdf"
    if e in (".png", ".jpg", ".jpeg", ".webp", ".gif"): return "image"
    return "link"

# ------------------------ templates ------------------------
INDEX_HTML = """<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>課程日曆</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet"/>
  <style>
    body { font-family: 'Noto Sans TC', sans-serif; }
    .today { background-color: #3b82f6; color: white; border-radius: 9999px; }
    .has-material:hover { background-color: #dbeafe; border-radius: 9999px; }
    .dot { height: 6px; width: 6px; background-color: #16a34a; border-radius: 50%;
           position: absolute; bottom: 6px; left: 50%; transform: translateX(-50%); }
  </style>
</head>
<body class="bg-gray-100 p-4 sm:p-8">

  <div class="max-w-4xl mx-auto bg-white rounded-2xl shadow-lg p-6 sm:p-10">
    <header class="text-center mb-12">
      <h1 class="text-3xl sm:text-4xl font-bold text-blue-800 mb-2">課程日曆 📅</h1>
      <p class="text-lg text-gray-600">使用 ?student=ray 指定學生；有資料的日期會有綠點</p>
    </header>

    <main>
      <section id="calendar-widget">
        <h2 class="text-2xl font-bold text-blue-700 border-b-2 border-blue-200 pb-2 mb-6">課程日曆</h2>
        <div class="bg-gray-50 p-4 sm:p-6 rounded-lg shadow-inner">
          <div class="flex items-center justify-between mb-4">
            <button id="prev-month" class="px-3 py-1 bg-gray-200 hover:bg-gray-300 rounded-lg text-gray-700 transition-colors">◀</button>
            <h3 id="month-year" class="text-xl font-bold text-gray-800 w-40 text-center"></h3>
            <button id="next-month" class="px-3 py-1 bg-gray-200 hover:bg-gray-300 rounded-lg text-gray-700 transition-colors">▶</button>
          </div>

          <div class="grid grid-cols-7 gap-1 text-center text-sm font-medium text-gray-600 mb-2">
            <div>日</div><div>一</div><div>二</div><div>三</div><div>四</div><div>五</div><div>六</div>
          </div>
          <div id="calendar-grid" class="grid grid-cols-7 gap-1"></div>
        </div>
      </section>
    </main>

    <footer class="text-center mt-16 pt-8 border-t border-gray-200">
      <p class="text-gray-500">Powered by GitHub Pages · Admin：<a href="admin.html" class="text-blue-600 underline">admin.html</a></p>
    </footer>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', async function () {
      const calendarGrid = document.getElementById('calendar-grid');
      const monthYearDisplay = document.getElementById('month-year');
      const prevMonthBtn = document.getElementById('prev-month');
      const nextMonthBtn = document.getElementById('next-month');

      const params = new URLSearchParams(location.search);
      const student = params.get('student') || 'ray';
      const qDate = params.get('date');
      let currentDate = qDate && !isNaN(Date.parse(qDate)) ? new Date(qDate) : new Date();
      let selectedDate = qDate || null;

      let manifest = { days: {}, courses: {} };
      try {
        const res = await fetch(`students/${student}/manifest.json?ts=${Date.now()}`, { cache: 'no-store' });
        if (res.ok) manifest = await res.json();
        else console.warn('讀 manifest 失敗：', res.status);
      } catch (e) { console.warn('讀 manifest 錯誤：', e); }

      function hasAnyCourse(dateStr){ return Boolean(manifest.days && manifest.days[dateStr]); }

      function openCoursePicker(dateStr, coursesMap, courseMeta) {
        const items = Object.entries(coursesMap).map(([key, obj])=>{
          const label = (courseMeta[key] && courseMeta[key].label) || key;
          const m = obj.material ? `<a class="block px-4 py-2 hover:bg-gray-100 rounded" href="${obj.material.url}">📘 ${label}：教材</a>` : '';
          const h = obj.homework ? `<a class="block px-4 py-2 hover:bg-gray-100 rounded" href="${obj.homework.url}" target="${obj.homework.format==='link'?'_blank':'_self'}">📝 ${label}：作業</a>` : '';
          return m + h;
        }).join('');
        const wrap = document.createElement('div');
        wrap.className = 'fixed inset-0 bg-black/40 flex items-center justify-center p-4 z-50';
        wrap.innerHTML = `
          <div class="bg-white rounded-xl shadow-xl max-w-md w-full p-4">
            <div class="flex items-center justify-between mb-2">
              <h3 class="text-lg font-bold">選擇課程｜${dateStr}</h3>
              <button class="px-2 py-1 text-gray-500 hover:bg-gray-100 rounded" id="close-picker">✕</button>
            </div>
            <div class="space-y-2">${items || '<div class="text-gray-500">沒有可用資料</div>'}</div>
          </div>`;
        document.body.appendChild(wrap);
        wrap.querySelector('#close-picker').onclick = () => wrap.remove();
        wrap.addEventListener('click', (e)=>{ if(e.target===wrap) wrap.remove(); });
      }

      function renderCalendar() {
        const year = currentDate.getFullYear();
        const month = currentDate.getMonth(); // 0-11
        const today = new Date();

        monthYearDisplay.textContent = `${year}年 ${month + 1}月`;
        calendarGrid.innerHTML = '';

        const firstDayOfMonth = new Date(year, month, 1).getDay(); // 0=週日
        const lastDateOfMonth = new Date(year, month + 1, 0).getDate();
        const lastDateOfPrevMonth = new Date(year, month, 0).getDate();

        for (let i = firstDayOfMonth; i > 0; i--) {
          const day = lastDateOfPrevMonth - i + 1;
          calendarGrid.innerHTML += `<div class="p-2 text-gray-300">${day}</div>`;
        }

        for (let i = 1; i <= lastDateOfMonth; i++) {
          const dayCell = document.createElement('div');
          dayCell.className = 'p-2 relative flex justify-center items-center cursor-pointer';

          const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`;

          let content;
          if (hasAnyCourse(dateStr)) {
            dayCell.classList.add('has-material');
            content = document.createElement('a');
            content.innerHTML = `${i}<span class="dot"></span>`;
            content.className = 'w-full h-full flex justify-center items-center';
            content.addEventListener('click', (ev)=>{
              ev.preventDefault();
              const courses = manifest.days[dateStr];
              const keys = Object.keys(courses||{});
              if (keys.length===1) {
                const c = courses[keys[0]];
                const target = c.material ? c.material.url : (c.homework ? c.homework.url : null);
                if (target) location.href = target;
              } else {
                openCoursePicker(dateStr, courses, manifest.courses||{});
              }
            });
          } else {
            content = document.createElement('span');
            content.textContent = i;
          }

          const todayY = today.getFullYear(), todayM = today.getMonth(), todayD = today.getDate();
          if (year === todayY && month === todayM && i === todayD) (content.tagName === 'A' ? content : dayCell).classList.add('today');

          if (selectedDate && dateStr === selectedDate) dayCell.classList.add('ring-2','ring-blue-500','rounded-full');

          dayCell.appendChild(content);
          calendarGrid.appendChild(dayCell);
        }
      }

      prevMonthBtn.addEventListener('click', ()=>{ currentDate.setMonth(currentDate.getMonth()-1); renderCalendar(); });
      nextMonthBtn.addEventListener('click', ()=>{ currentDate.setMonth(currentDate.getMonth()+1); renderCalendar(); });

      renderCalendar();
    });
  </script>
</body>
</html>
"""

ADMIN_HTML = """<!doctype html>
<html lang="zh-Hant">
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Admin · Manifest 編輯器</title>
<script src="https://cdn.tailwindcss.com"></script>
<body class="bg-gray-100 p-4 sm:p-8">
<div class="max-w-6xl mx-auto bg-white rounded-2xl shadow p-6">
  <h1 class="text-2xl font-bold mb-3">Manifest 編輯器（離線匯出）</h1>
  <p class="text-gray-600 mb-4">載入 <code>students/&lt;student&gt;/manifest.json</code>，圖形化編輯日期/課程/教材與作業（含 format），最後匯出檔案覆蓋即可。</p>

  <div class="flex flex-wrap items-center gap-2 mb-4">
    <input id="studentId" class="border px-2 py-1 rounded" placeholder="student（預設 ray）">
    <button id="loadBtn" class="px-3 py-1 bg-blue-600 text-white rounded">載入</button>
    <input type="file" id="filePicker" class="hidden" accept="application/json">
    <button id="loadFile" class="px-3 py-1 bg-gray-200 rounded">從檔案載入</button>
    <button id="saveFile" class="px-3 py-1 bg-emerald-600 text-white rounded">匯出 manifest.json</button>
    <span class="text-gray-400">|</span>
    <button id="downloadTpl" class="px-3 py-1 bg-gray-200 rounded">下載 HTML 範本</button>
  </div>

  <div id="editor" class="space-y-4"></div>
</div>
<script>
const $ = s => document.querySelector(s);
let manifest = null;

async function fetchManifest(student){
  const url = `students/${student}/manifest.json?ts=${Date.now()}`;
  const res = await fetch(url, {cache:'no-store'});
  if(!res.ok) throw new Error('HTTP '+res.status);
  return await res.json();
}
function render(){
  const el = $('#editor');
  if(!manifest){ el.innerHTML = '<p class="text-gray-500">尚未載入 manifest。</p>'; return; }

  const days = manifest.days || {};
  const courses = manifest.courses || {};
  const dayKeys = Object.keys(days).sort();

  const courseRow = `
    <div class="p-3 rounded border">
      <div class="font-semibold mb-2">學生：${manifest.displayName||manifest.student}（${manifest.student}）</div>
      <div class="mb-2">課程清單：
        ${Object.entries(courses).map(([k,v])=>`<span class="px-2 py-0.5 rounded bg-gray-100 border mr-1">${k}（${v.label||k}）</span>`).join('') || '<span class="text-gray-400">尚無</span>'}
      </div>
      <div class="flex gap-2 mb-2">
        <input id="newCourseKey" class="border px-2 py-1 rounded" placeholder="course key（如 english）">
        <input id="newCourseLabel" class="border px-2 py-1 rounded" placeholder="顯示名稱（如 英文）">
        <input id="newCourseColor" class="border px-2 py-1 rounded" placeholder="顏色（如 #1d4ed8）">
        <button id="addCourse" class="px-3 py-1 bg-gray-200 rounded">新增課程</button>
      </div>
    </div>`;

  const dayRows = dayKeys.map(d=>{
    const map = days[d];
    const items = Object.entries(map).map(([ck, obj])=>{
      const mat = obj.material || {};
      const hw  = obj.homework || {};
      const opt = (sel, v) => sel===v ? 'selected' : '';
      return `
      <div class="p-3 border rounded mb-3">
        <div class="font-medium mb-1">${ck} · ${(courses[ck]&&courses[ck].label)||ck}</div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-2 items-center">
          <div class="font-semibold text-blue-700">📘 教材</div>
          <select class="border px-2 py-1 rounded" data-date="${d}" data-course="${ck}" data-slot="material" data-field="format">
            <option ${opt(mat.format,'html')} value="html">html</option>
            <option ${opt(mat.format,'pdf')} value="pdf">pdf</option>
            <option ${opt(mat.format,'image')} value="image">image</option>
            <option ${opt(mat.format,'link')} value="link">link</option>
          </select>
          <input class="border px-2 py-1 rounded" placeholder="URL（相對或 http）" value="${mat.url||''}" data-date="${d}" data-course="${ck}" data-slot="material" data-field="url">
          <input class="border px-2 py-1 rounded md:col-span-3" placeholder="title（可空）" value="${obj.title||''}" data-date="${d}" data-course="${ck}" data-field="title">

          <div class="font-semibold text-amber-700 mt-2">📝 作業</div>
          <select class="border px-2 py-1 rounded" data-date="${d}" data-course="${ck}" data-slot="homework" data-field="format">
            <option ${opt(hw.format,'html')} value="html">html</option>
            <option ${opt(hw.format,'pdf')} value="pdf">pdf</option>
            <option ${opt(hw.format,'image')} value="image">image</option>
            <option ${opt(hw.format,'link')} value="link">link</option>
          </select>
          <input class="border px-2 py-1 rounded" placeholder="URL（相對或 http）" value="${hw.url||''}" data-date="${d}" data-course="${ck}" data-slot="homework" data-field="url">
        </div>
      </div>`;
    }).join('');

    return `
    <details class="mb-3">
      <summary class="cursor-pointer select-none p-2 bg-gray-50 rounded border">${d} · ${Object.keys(map).length} 門課</summary>
      <div class="p-2">
        ${items || '<div class="text-gray-500">這天尚無課程</div>'}
        <div class="flex gap-2 mt-2">
          <select id="addCourseSel_${d}" class="border px-2 py-1 rounded">
            <option value="">選擇要新增的課程</option>
            ${Object.keys(courses).map(k=>`<option value="${k}">${k}（${courses[k].label||k}）</option>`).join('')}
          </select>
          <button data-add="${d}" class="px-3 py-1 bg-gray-200 rounded">新增到此日</button>
        </div>
      </div>
    </details>`;
  }).join('');

  el.innerHTML = courseRow + `
    <div class="p-3 rounded border">
      <div class="font-semibold mb-2">日期清單</div>
      ${dayRows}
      <div class="flex gap-2 mt-4">
        <input id="newDate" class="border px-2 py-1 rounded" placeholder="YYYY-MM-DD">
        <button id="addDate" class="px-3 py-1 bg-gray-200 rounded">新增日期</button>
      </div>
    </div>`;

  $('#addCourse')?.addEventListener('click', ()=>{
    const key = $('#newCourseKey').value.trim(); if(!key) return alert('course key 必填');
    const label = $('#newCourseLabel').value.trim() || key;
    const color = $('#newCourseColor').value.trim() || '#333';
    manifest.courses = manifest.courses || {};
    if(manifest.courses[key]) return alert('已存在相同 key');
    manifest.courses[key] = { label, color };
    render();
  });

  document.querySelectorAll('select[data-field],input[data-field]')?.forEach(inp=>{
    inp.addEventListener('change', ()=>{
      const d = inp.dataset.date, c = inp.dataset.course, slot = inp.dataset.slot, f = inp.dataset.field;
      if (slot) {
        manifest.days[d][c][slot] = manifest.days[d][c][slot] || {};
        manifest.days[d][c][slot][f] = inp.value;
      } else {
        manifest.days[d][c][f] = inp.value;
      }
    });
  });

  document.querySelectorAll('button[data-add]')?.forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const d = btn.dataset.add;
      const sel = document.getElementById('addCourseSel_'+d);
      const key = sel.value; if(!key) return;
      manifest.days[d] = manifest.days[d] || {};
      if (!manifest.days[d][key]) manifest.days[d][key] = { title:'', material:{format:'html',url:''}, homework:{format:'html',url:''} };
      render();
    });
  });

  $('#addDate')?.addEventListener('click', ()=>{
    const d = $('#newDate').value.trim();
    if(!/^\\d{4}-\\d{2}-\\d{2}$/.test(d)) return alert('日期格式 YYYY-MM-DD');
    manifest.days = manifest.days || {};
    if(manifest.days[d]) return alert('此日期已存在');
    manifest.days[d] = {};
    render();
  });
}

$('#loadBtn').addEventListener('click', async ()=>{
  const student = ($('#studentId').value || 'ray').trim();
  try { manifest = await fetchManifest(student); render(); }
  catch(e){ alert('讀取失敗：'+e.message); }
});

$('#loadFile').addEventListener('click', ()=> $('#filePicker').click());
$('#filePicker').addEventListener('change', async (e)=>{
  const f = e.target.files[0]; if(!f) return;
  const txt = await f.text();
  try { manifest = JSON.parse(txt); render(); }
  catch(e){ alert('JSON 解析失敗'); }
});

$('#saveFile').addEventListener('click', ()=>{
  if(!manifest) return alert('尚未載入資料');
  const blob = new Blob([JSON.stringify(manifest, null, 2)], {type:'application/json'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url; a.download = 'manifest.json';
  a.click(); URL.revokeObjectURL(url);
});

$('#downloadTpl').addEventListener('click', ()=>{
  const d = new Date();
  const iso = d.toISOString().slice(0,10);
  const html = `<!doctype html>
<html lang="zh-Hant">
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="lesson-date" content="${iso}">
<title>教材樣板</title>
<script src="https://cdn.tailwindcss.com"></script>
<body class="bg-gray-100 p-4 sm:p-8">
<div id="breadcrumb" class="max-w-4xl mx-auto mb-4"></div>
<script>(function(){const p=new URLSearchParams(location.search);const student=p.get('student')||'ray';const meta=document.querySelector('meta[name="lesson-date"]')?.content?.trim();const back=meta? \\'../index.html?student=\\'+student+\\'&date=\\'+meta+\\'#calendar-widget\\' : \\'../index.html?student=\\'+student+\\'#calendar-widget\\';document.getElementById('breadcrumb').innerHTML = '<a href=\"'+back+'\" class=\"text-blue-600 hover:underline\">&larr; 返回課程日曆</a>';})();</script>
<div class="max-w-4xl mx-auto bg-white rounded-2xl shadow p-6">
  <h1 class="text-2xl font-bold mb-2">教材標題</h1>
  <p class="text-gray-600 mb-6">把 AI 產的內容貼到這裡。</p>
</div>
</body></html>`;
  const blob = new Blob([html], {type:'text/html'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url; a.download = 'lesson_template.html';
  a.click(); URL.revokeObjectURL(url);
});
</script>
</body></html>
"""

MATERIAL_TEMPLATE = """<!doctype html>
<html lang="zh-Hant">
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="lesson-date" content="{iso_date}">
<title>{title}</title>
<script src="https://cdn.tailwindcss.com"></script>
<body class="bg-gray-100 p-4 sm:p-8">
<div id="breadcrumb" class="max-w-4xl mx-auto mb-4"></div>
<script>(function(){{
  const p = new URLSearchParams(location.search);
  const student = p.get('student') || 'ray';
  const meta = document.querySelector('meta[name="lesson-date"]')?.content?.trim();
  const back = meta
    ? '../index.html?student=' + student + '&date=' + meta + '#calendar-widget'
    : '../index.html?student=' + student + '#calendar-widget';
  document.getElementById('breadcrumb').innerHTML =
    '<a href="' + back + '" class="text-blue-600 hover:underline">&larr; 返回課程日曆</a>';
}})();</script>
<div class="max-w-4xl mx-auto bg-white rounded-2xl shadow p-6">
  <h1 class="text-2xl font-bold mb-2">{title}</h1>
  <p class="text-gray-600 mb-6">把 AI 產的內容貼到這裡。</p>
</div>
</body></html>
"""

README = """# en_class (Project Pages)

- GitHub Pages → Source = `main` / `docs`
- 學生首頁：`docs/index.html?student=<id>`
- 後台：`docs/admin.html`（離線匯出版）
- 每位學生設定：`docs/students/<id>/manifest.json`
- 教材/作業檔：`docs/materials/<student>/<course>/...`
"""

GITIGNORE = """__pycache__/
*.backup-*.json
"""

# ------------------------ core ops ------------------------
def init_cmd(student: str, *, dry=False):
    p(">>> init scaffold to /docs")
    ensure_dir(DOCS)
    write_text(DOCS/".nojekyll", "", dry=dry)
    write_text(ROOT/".gitignore", GITIGNORE, dry=dry)
    write_text(DOCS/"index.html", INDEX_HTML, dry=dry)
    write_text(DOCS/"admin.html", ADMIN_HTML, dry=dry)
    write_text(ROOT/"README.md", README, dry=dry)

    # seed student
    new_student_cmd(student, create_samples=True, dry=dry)

def new_student_cmd(student: str, create_samples=False, *, dry=False):
    manifest_path = DOCS / f"students/{student}/manifest.json"
    if manifest_path.exists() and not dry:
        p("  [=] already exists:", manifest_path)
        return
    today = dt.date.today()
    d0 = today.strftime("%Y-%m-%d")
    d1 = (today - dt.timedelta(days=7)).strftime("%Y-%m-%d")
    data = {
        "version": 1,
        "student": student,
        "displayName": student.capitalize(),
        "courses": {
            "english": {"label": "英文", "color": "#1d4ed8"},
            "math": {"label": "數學", "color": "#059669"}
        },
        "days": {
            d0: {},
            d1: {}
        }
    }
    write_text(manifest_path, json.dumps(data, ensure_ascii=False, indent=2), dry=dry)

    if create_samples:
        # create sample HTMLs for today
        for course in ("english", "math"):
            add_cmd(student=student, course=course, date=d0, typ="material", fmt="html",
                    src=None, title=f"{data['courses'][course]['label']}教材（樣板）", dry=dry)

def add_cmd(*, student: str, course: str, date: str, typ: str, fmt: str,
            src: str|None, title: str|None=None, external_url: str|None=None, dry=False):
    assert typ in ("material","homework")
    assert fmt in ("html","pdf","image","link")
    # paths
    rel_dir = Path(f"materials/{student}/{course}")
    abs_dir = DOCS / rel_dir
    ensure_dir(abs_dir)

    # load & backup manifest
    manifest_path = DOCS / f"students/{student}/manifest.json"
    manifest = load_json(manifest_path, default={"version":1,"student":student,"courses":{course:{"label":course,"color":"#333"}}, "days":{}})
    backup_manifest(manifest_path, dry=dry)

    # decide target URL
    if fmt == "link":
        if not external_url:
            raise SystemExit("--external-url 為必填（format=link）")
        url = external_url
        dst_path = None
    else:
        # decide filename
        ymd = date.replace("-","")
        yyMMdd = ymd[2:]
        suffix = "_hw" if typ=="homework" and fmt=="html" else ""
        if src:
            ext = Path(src).suffix.lower()
            if not ext:
                # default extension per format
                ext = ".html" if fmt=="html" else (".pdf" if fmt=="pdf" else ".png")
            fname = f"{yyMMdd}{'_hw' if typ=='homework' and fmt!='html' else ''}{ext}" if fmt!="html" else f"{yyMMdd}{suffix}.html"
            dst_path = abs_dir / fname
            copy_file(Path(src), dst_path, dry=dry)
        else:
            # no src: only allowed for html -> create template
            if fmt != "html":
                raise SystemExit("未提供 --src，僅支援 format=html 自動產生模板")
            fname = f"{yyMMdd}{'_hw' if typ=='homework' else ''}.html"
            dst_path = abs_dir / fname
            html = MATERIAL_TEMPLATE.format(iso_date=date, title=title or "教材（樣板）")
            write_text(dst_path, html, dry=dry)
        url = f"{rel_dir.as_posix()}/{dst_path.name}"

    # update manifest
    manifest.setdefault("courses", {}).setdefault(course, {"label":course, "color":"#333"})
    manifest.setdefault("days", {}).setdefault(date, {}).setdefault(course, {})
    node = manifest["days"][date][course]
    if title: node["title"] = title
    node.setdefault(typ, {})
    node[typ]["format"] = fmt
    node[typ]["url"] = url

    # write manifest
    write_text(manifest_path, json.dumps(manifest, ensure_ascii=False, indent=2), dry=dry)
    p("  ==> updated", manifest_path)

def batch_add_cmd(*, student: str, course: str, from_dir: str, dry=False):
    base = Path(from_dir)
    if not base.exists(): raise SystemExit(f"來源資料夾不存在：{base}")
    files = [p for p in base.iterdir() if p.is_file()]
    if not files: p("（來源資料夾沒有檔案）"); return
    for f in sorted(files):
        m = re.match(r"^(\d{6})(?:_hw)?", f.stem, re.IGNORECASE)
        if not m:
            p("  [skip] 檔名未含日期 YYMMDD：", f.name); continue
        date = yyyy_mm_dd_from_yymmdd(m.group(1))
        is_hw = "_hw" in f.stem.lower()
        ext = f.suffix.lower()
        fmt = guess_format_from_ext(ext)
        typ = "homework" if is_hw else "material"
        p(f"  -> {f.name}  date={date} type={typ} fmt={fmt}")
        add_cmd(student=student, course=course, date=date, typ=typ, fmt=fmt, src=str(f), dry=dry, title=None)

# ------------------------ CLI ------------------------
def main():
    ap = argparse.ArgumentParser(description="en_class scaffolder & manager")
    sub = ap.add_subparsers(dest="cmd", required=True)

    ap_init = sub.add_parser("init", help="初始化 /docs 骨架")
    ap_init.add_argument("--student", default="ray")
    ap_init.add_argument("--dry-run", action="store_true")

    ap_ns = sub.add_parser("new-student", help="新增學生（空 manifest）")
    ap_ns.add_argument("--student", required=True)
    ap_ns.add_argument("--dry-run", action="store_true")

    ap_add = sub.add_parser("add", help="新增/更新一筆教材或作業")
    ap_add.add_argument("--student", required=True)
    ap_add.add_argument("--course", required=True)
    ap_add.add_argument("--date", required=True, help="YYYY-MM-DD")
    ap_add.add_argument("--type", dest="typ", choices=["material","homework"], required=True)
    ap_add.add_argument("--format", dest="fmt", choices=["html","pdf","image","link"], required=True)
    ap_add.add_argument("--src")
    ap_add.add_argument("--external-url")
    ap_add.add_argument("--title")
    ap_add.add_argument("--dry-run", action="store_true")

    ap_b = sub.add_parser("batch-add", help="批次匯入資料夾（檔名要有 YYMMDD；含 _hw 視為作業）")
    ap_b.add_argument("--student", required=True)
    ap_b.add_argument("--course", required=True)
    ap_b.add_argument("--from-dir", required=True)
    ap_b.add_argument("--dry-run", action="store_true")

    args = ap.parse_args()

    if args.cmd == "init":
        init_cmd(args.student, dry=args.dry_run)
    elif args.cmd == "new-student":
        new_student_cmd(args.student, dry=args.dry_run)
    elif args.cmd == "add":
        add_cmd(student=args.student, course=args.course, date=args.date, typ=args.typ, fmt=args.fmt,
                src=args.src, title=args.title, external_url=args.external_url, dry=args.dry_run)
    elif args.cmd == "batch-add":
        batch_add_cmd(student=args.student, course=args.course, from_dir=args.from_dir, dry=args.dry_run)

if __name__ == "__main__":
    main()


=== FILE: README.md ===
# en_class (Project Pages)

- GitHub Pages → Source = `main` / `docs`
- 學生首頁：`docs/index.html?student=<id>`
- 後台：`docs/admin.html`（離線匯出版）
- 每位學生設定：`docs/students/<id>/manifest.json`
- 教材/作業檔：`docs/materials/<student>/<course>/...`


=== FILE: server.py ===
# server.py
from __future__ import annotations
import json, mimetypes
from pathlib import Path
from flask import Flask, request, jsonify, send_from_directory, Response, abort
from werkzeug.utils import safe_join

app = Flask(__name__, static_folder=None)

BASE_DIR = Path(__file__).resolve().parent
DOCS_DIR = BASE_DIR / "docs"
DOCS_DIR.mkdir(exist_ok=True)

def _json_ok(data):
    return Response(json.dumps(data, ensure_ascii=False, indent=2),
                    mimetype="application/json; charset=utf-8")

def _default_manifest(student_id: str) -> dict:
    return {
        "version": 3,
        "student": student_id,
        "displayName": student_id,
        "courses": {"english": {"label": "英文"}, "math": {"label": "數學"}},
        "types": {"material": "教材", "homework": "作業"},
        "days": {},
        "holidays": []
    }

def _default_roster() -> dict:
    return {"students": []}

def _path_under_docs(relpath: str) -> Path:
    p = DOCS_DIR / Path(relpath.strip("/"))
    p.parent.mkdir(parents=True, exist_ok=True)
    return p

def _guess_mime(p: Path) -> str:
    t, _ = mimetypes.guess_type(str(p))
    return t or "text/plain; charset=utf-8"

@app.get("/api/data/<path:req_path>")
def api_data(req_path: str):
    dst = safe_join(str(DOCS_DIR), req_path)
    if not dst: abort(400)
    fp = Path(dst)
    lower = req_path.lower()

    if not fp.exists():
        if lower.endswith("manifest.json"):
            parts = Path(req_path).parts
            sid = parts[-2] if len(parts) >= 2 else "unknown"
            return _json_ok(_default_manifest(sid))
        if lower == "roster.json":
            return _json_ok(_default_roster())
        return jsonify({"error": "Not Found", "path": req_path}), 404

    if lower.endswith(".json"):
        return _json_ok(json.loads(fp.read_text(encoding="utf-8")))

    mime = _guess_mime(fp)
    if mime.startswith("text/") or mime.endswith(("xml", "javascript")):
        return Response(fp.read_text(encoding="utf-8"), mimetype=mime)
    return Response(fp.read_bytes(), mimetype=mime)

@app.post("/api/save")
def api_save():
    data = request.get_json(silent=True) or {}
    relpath, content = data.get("path"), data.get("content")
    if not relpath:
        return jsonify({"status":"error","message":"missing path"}), 400

    target = _path_under_docs(relpath)
    if str(target).lower().endswith(".json"):
        if isinstance(content, str):
            try: content = json.loads(content)
            except Exception: return jsonify({"status":"error","message":"content is not valid JSON"}), 400
        target.write_text(json.dumps(content, ensure_ascii=False, indent=2), encoding="utf-8")
    else:
        if not isinstance(content, str):
            return jsonify({"status":"error","message":"content must be string for non-JSON files"}), 400
        target.write_text(content, encoding="utf-8")

    return jsonify({"status":"success","path": str(target.relative_to(DOCS_DIR))})

@app.post("/api/delete")
def api_delete():
    data = request.get_json(silent=True) or {}
    relpath = (data.get("path") or "").strip("/")
    if not relpath:
        return jsonify({"status":"error","message":"missing path"}), 400
    target = Path(safe_join(str(DOCS_DIR), relpath))
    if not target or not target.exists():
        return jsonify({"status":"success","deleted": False, "path": relpath})
    if target.is_dir():
        return jsonify({"status":"error","message":"refuse to delete directory"}), 400
    try:
        target.unlink()
        return jsonify({"status":"success","deleted": True, "path": relpath})
    except Exception as e:
        return jsonify({"status":"error","message":str(e)}), 500

@app.get("/")
def _root(): return send_from_directory(DOCS_DIR, "teacher.html")

@app.get("/<path:filename>")
def _static(filename: str):
    full = safe_join(str(DOCS_DIR), filename)
    if not full or not Path(full).exists(): abort(404)
    return send_from_directory(DOCS_DIR, filename)

if __name__ == "__main__":
    print("Serving at http://127.0.0.1:5000")
    app.run(host="127.0.0.1", port=5000, debug=True)


=== FILE: docs\admin.html ===
<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>後台管理介面（雙向編輯）</title>
<script>
(function(){
  const isLocal = ['127.0.0.1','localhost'].includes(location.hostname);
  if(!isLocal){
    document.write('<div style="font-family:system-ui,\'Noto Sans TC\',Arial,sans-serif;padding:40px;text-align:center">此頁僅限本機使用。請在本機執行 <code>python server.py</code> 後以 <b>http://127.0.0.1:5000/admin.html</b> 開啟。</div>');
    document.close(); throw new Error('admin locked on public host');
  }
})();
</script>
<style>
  body{font-family:system-ui,"Noto Sans TC",Arial,sans-serif;background:#f3f5f7;margin:0;}
  .app{max-width:1100px;margin:36px auto;background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.06);padding:22px 24px;}
  h1{margin:0 0 16px;display:flex;gap:10px;align-items:center;justify-content:space-between;}
  .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin:8px 0;}
  input[type="text"], input[type="date"], select, textarea{border:1px solid #d1d5db;border-radius:8px;padding:8px 10px;font-size:15px;}
  textarea{width:100%;min-height:200px;}
  .btn{padding:8px 12px;border-radius:8px;border:0;background:#2563eb;color:#fff;cursor:pointer}
  .btn.gray{background:#6b7280}.btn.green{background:#059669}.btn.red{background:#dc2626}.btn.soft{background:#e5e7eb;color:#111827}
  .msg{padding:10px 12px;border-radius:8px;margin:8px 0;display:none}
  .msg.ok{display:block;background:#e6f9ed;color:#065f46}.msg.err{display:block;background:#fde2e0;color:#9b1c1c}
  .grid{display:grid;grid-template-columns:1.1fr .9fr;gap:16px;margin-top:12px;}
  .box{background:#f8fafc;border-radius:10px;padding:12px;}
  .list .item{background:#fff;border:1px solid #e5e7eb;border-radius:8px;padding:8px 10px;margin:6px 0;display:flex;justify-content:space-between;align-items:center;}
  .muted{opacity:.65}
  .links a{color:#2563eb;text-decoration:none;margin-left:8px}

  /* 類型 chips */
  .chips{display:flex;flex-wrap:wrap;gap:8px;margin-top:6px}
  .chip{display:inline-flex;align-items:center;gap:8px;background:#fff;border:1px solid #e5e7eb;border-radius:999px;padding:6px 10px;font-size:14px}
  .chip .k{font-family:ui-monospace,consolas,monaco,monospace;color:#374151;background:#f3f4f6;border-radius:6px;padding:2px 6px}
  .chip .cnt{color:#6b7280}
  .chip .del{cursor:pointer;color:#dc2626;border:0;background:#fee2e2;border-radius:6px;padding:2px 6px}
  .chip .del[disabled]{opacity:.5;cursor:not-allowed}
</style>
</head>
<body>
<div class="app">
  <h1>
    <span>後台管理介面（雙向編輯）</span>
    <div class="links">
      <a href="teacher.html">老師主頁</a>
      <a id="gotoCalendar" class="px-3 py-1 bg-gray-200 rounded" href="#">學生日曆</a>
    </div>
  </h1>

  <div id="msg" class="msg"></div>

  <div class="row">
    <label>學生：</label>
    <select id="studentSel"></select>
    <button class="btn" id="btnReload">載入</button>
    <span style="flex:1"></span>
    <input type="text" id="newId" placeholder="新學生 id（小寫/無空白）"/>
    <input type="text" id="newName" placeholder="新學生姓名（顯示用，可空）"/>
    <button class="btn green" id="btnAddStudent">新增學生</button>
  </div>

  <div class="grid">
    <div class="box">
      <h3>建立 / 編輯（單鍵儲存）</h3>
      <div class="row">
        <input type="date" id="date"/>
        <select id="course"></select>
        <select id="type"></select>
      </div>
      <div class="row">
        <input style="flex:1" type="text" id="title" placeholder="標題"/>
        <input style="flex:1" type="text" id="filename" placeholder="檔名（可留空，會用 日期_標題.html）"/>
      </div>
      <textarea id="html" placeholder="教材 HTML（可留空：只記錄路徑；按『儲存』會直接寫入/覆蓋）"></textarea>
      <div class="row">
        <button class="btn green" id="btnSave">儲存</button>
        <label><input type="checkbox" id="keepForm"/> 儲存後保留表單值（複製下一筆）</label>
        <button class="btn soft" id="btnClear">清空表單</button>
        <button class="btn soft" id="btnReloadHtml">重載目前教材</button>
        <span class="muted">儲存會：寫 HTML（若有內容）→ 更新/新增條目 → 寫入 manifest.json</span>
      </div>
    </div>

    <div class="box">
      <h3>現有條目</h3>
      <button id="btnHoliday" class="btn" style="background:#f59e0b;color:#fff">放假 / 取消</button>
      <div class="row">
        <label>篩選日期：</label>
        <input type="date" id="filterDate"/>
        <span class="muted">刪除會**同時**刪除 HTML 檔</span>
      </div>
      <div class="list" id="list"></div>
    </div>
  </div>

  <!-- 新增：設定類型 -->
  <div class="box" style="margin-top:14px">
    <h3>設定：類型（type）</h3>
    <div class="row">
      <input type="text" id="newTypeKey" placeholder="類型 key（如 supplement）"/>
      <input type="text" id="newTypeLabel" placeholder="顯示名（如 補充教材）"/>
      <button class="btn" id="btnAddType">新增 / 更新 類型</button>
    </div>
    <div class="chips" id="typeChips"></div>
    <div class="muted" style="margin-top:6px">
      小提示：若要「改名」，建議新增新 key 後把舊條目改到新 key，再刪舊 key（僅當該類型沒有使用紀錄時可刪）。
    </div>
  </div>
</div>

<script src="admin.js"></script>
</body>
</html>


=== FILE: docs\admin.js ===
// ------- helpers -------
const isHolidayDate = d => Array.isArray(manifest?.holidays) && manifest.holidays.includes(d);
const q=(s,e=document)=>e.querySelector(s);
const msg=q('#msg');
const base=(p)=>p.split('/').pop();
const ymd=(d)=>`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`;
const isLocal=()=>['127.0.0.1','localhost'].includes(location.hostname);

function toast(ok, text){
  msg.className='msg ' + (ok?'ok':'err');
  msg.textContent=text; msg.style.display='block';
  clearTimeout(window.__t); window.__t=setTimeout(()=>msg.style.display='none',3000);
}
async function getJSON(path){
  if(isLocal()){
    try{ const r=await fetch(`/api/data/${path}?ts=${Date.now()}`,{cache:'no-store'}); if(r.ok) return await r.json(); }catch(e){}
  }
  const r2=await fetch(`${path}?ts=${Date.now()}`,{cache:'no-store'}); if(!r2.ok) throw new Error('HTTP '+r2.status); return await r2.json();
}
async function getText(path){
  if(isLocal()){
    try{ const r=await fetch(`/api/data/${path}?ts=${Date.now()}`,{cache:'no-store'}); if(r.ok) return await r.text(); }catch(e){}
  }
  const r2=await fetch(`${path}?ts=${Date.now()}`,{cache:'no-store'}); if(!r2.ok) throw new Error('HTTP '+r2.status); return await r2.text();
}
async function apiSave(path, content){
  if(!isLocal()) throw new Error('save only available on localhost');
  const r=await fetch('/api/save',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({path,content})});
  const j=await r.json(); if(!r.ok||j.status!=='success') throw new Error(j.message||('HTTP '+r.status)); return j;
}
async function apiDelete(path){
  if(!isLocal()) throw new Error('delete only available on localhost');
  const r=await fetch('/api/delete',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({path})});
  const j=await r.json(); if(!r.ok||j.status!=='success') throw new Error(j.message||('HTTP '+r.status)); return j;
}

// ------- state -------
let roster={students:[]}, manifest=null, stu=null;
let editingRef=null;  // ★ 記住「正在編輯」的舊位置（date/course/type/path）

// ------- manifest helpers -------
function ensureBase(){
  if(!manifest.version) manifest.version=3;
  manifest.courses=manifest.courses||{english:{label:'英文'}, math:{label:'數學'}};
  manifest.types  =manifest.types  ||{material:'教材', homework:'作業'};
  manifest.days   =manifest.days   ||{};
  manifest.holidays = manifest.holidays || []; // ★ 新增，避免舊檔 undefined
}
function ensureArr(date,course,type){
  manifest.days[date]=manifest.days[date]||{};
  manifest.days[date][course]=manifest.days[date][course]||{};
  manifest.days[date][course][type]=manifest.days[date][course][type]||[];
  return manifest.days[date][course][type];
}
function removeEmpty(date,course,type){
  const d=manifest.days[date]||{};
  const c=d[course]||{};
  if((c[type]||[]).length===0) delete c[type];
  if(Object.keys(c).length===0) delete d[course];
  if(Object.keys(d).length===0) delete manifest.days[date];
}

// ------- UI render -------
function renderStu(){
  const sel=q('#studentSel'); sel.innerHTML='';
  (roster.students||[]).forEach(s=>{const o=document.createElement('option'); o.value=s.id; o.textContent=s.name||s.id; sel.appendChild(o);});
  if(!stu) stu=roster.students?.[0]?.id||null;
  if(stu) sel.value=stu;
  sel.onchange=async()=>{stu=sel.value; localStorage.setItem('lastStu', stu); await loadManifest();wireCalendarLink();} // ★ 切換學生後更新
  wireCalendarLink();        // ★ 初次渲染也更新
}
function renderCourseType(){
  const c=q('#course'), t=q('#type'); c.innerHTML=''; t.innerHTML='';
  Object.entries(manifest.courses).forEach(([k,v])=>{const o=document.createElement('option'); o.value=k; o.textContent=v.label||k; c.appendChild(o);});
  Object.entries(manifest.types).forEach(([k,v])=>{const o=document.createElement('option'); o.value=k; o.textContent=v||k; t.appendChild(o);});
}

// ▶ 類型 chips + 新增 / 刪除
function countTypeUsage(key){
  let cnt=0;
  Object.values(manifest.days||{}).forEach(perDate=>{
    Object.values(perDate||{}).forEach(perCourse=>{
      const arr = perCourse?.[key];
      if(Array.isArray(arr)) cnt += arr.length;
    });
  });
  return cnt;
}
function renderTypeChips(){
  const wrap=q('#typeChips'); if(!wrap) return;
  wrap.innerHTML='';
  Object.entries(manifest.types||{}).forEach(([k,label])=>{
    const chip=document.createElement('div'); chip.className='chip';
    const cnt=countTypeUsage(k);
    chip.innerHTML=`<span class="k">${k}</span><span>${label}</span><span class="cnt">(${cnt})</span>`;
    const del=document.createElement('button'); del.className='del'; del.textContent='刪除';
    if(cnt>0){ del.disabled=true; del.title='已有使用紀錄，無法刪除'; }
    del.onclick=async()=>{
      if(cnt>0) return; // 已經有使用紀錄時本來就禁止刪除
      // ★ 新增：刪除前確認
      const ok = confirm(
        `確認刪除這個類型嗎？\n\n` +
        `Key：${k}\n` +
        `顯示名稱：${label}\n\n` +
        `僅當此類型沒有任何使用紀錄時才可刪除。\n` +
        `此操作無法復原！`
      );
      if(!ok) return;
      delete manifest.types[k];
      // 清理空容器
      Object.keys(manifest.days||{}).forEach(d=>{
        Object.keys(manifest.days[d]||{}).forEach(c=>{
          if(manifest.days[d][c] && manifest.days[d][c][k] && manifest.days[d][c][k].length===0){
            delete manifest.days[d][c][k];
          }
        });
      });
      await apiSave(`students/${stu}/manifest.json`, manifest);
      renderCourseType(); renderTypeChips();
      toast(true,'已刪除類型：'+k);
    };
    chip.appendChild(del);
    wrap.appendChild(chip);
  });
}

// ------- 列表（現有條目） -------
function setDefaultDateFocus(){
  const today=ymd(new Date());
  const dates=Object.keys(manifest.days||{}).sort();
  const latest = dates.length ? dates[dates.length-1] : null;
  const pick = (!latest || latest < today) ? today : latest;
  q('#filterDate').value = pick;
  q('#date').value = pick;
}

function renderList(){
  const wrap=q('#list'); wrap.innerHTML='';
  const fd=q('#filterDate').value || null;
  const days=manifest.days||{};
  const dates=Object.keys(days).sort().filter(d=>!fd||d===fd);
  const hasEntries = dates.length > 0;

  // 選了篩選日期且該日是放假 → 顯示 🧡 提示（不管有沒有教材）
  if (fd && isHolidayDate(fd)) {
    const tip = document.createElement('div');
    tip.className='item';
    tip.style.borderLeft='4px solid #f59e0b';
    tip.textContent='🧡 此日標記為放假（仍可新增教材/作業）';
    wrap.appendChild(tip);
  }

  // 空狀態：分「有選 fd」與「沒選 fd」兩種邏輯
  if (!hasEntries) {
    if (fd) {
      // 有選日期但沒教材：不要覆蓋掉上面的 tip，只補一行說明即可
      const empty=document.createElement('div');
      empty.className='item'; empty.style.opacity='.7';
      empty.textContent='（本日無教材/作業）';
      wrap.appendChild(empty);
      return;
    } else {
      // 沒選日期且整個月沒任何條目
      wrap.innerHTML='<div class="item" style="opacity:.7">目前沒有條目</div>';
      return;
    }
  }

  dates.forEach(d=>{
    const perDate=days[d];
    Object.keys(perDate).forEach(course=>{
      Object.keys(perDate[course]).forEach(type=>{
        perDate[course][type].forEach((it,idx)=>{
          const row=document.createElement('div'); row.className='item';
          row.innerHTML=`
            <div>${d}｜${manifest.courses[course]?.label||course}｜${manifest.types[type]||type} → <strong>${it.title||base(it.path)}</strong></div>
            <div style="display:flex;gap:8px">
              <button class="btn gray">編輯</button>
              <button class="btn red">刪除</button>
            </div>`;
          row.children[1].children[0].onclick=async()=>{
            q('#date').value=d; q('#course').value=course; q('#type').value=type;
            q('#title').value=it.title||''; q('#filename').value=base(it.path||'');
            try{
              const raw = await getText(it.path);
              let bodySnippet = '';
              try{
                const doc = new DOMParser().parseFromString(raw, 'text/html');
                const cont = doc.querySelector('.container');
                if(cont){
                  const clone = cont.cloneNode(true);
                  const h1 = clone.querySelector('h1'); if(h1) h1.remove();
                  bodySnippet = clone.innerHTML.trim();
                }else{
                  bodySnippet = (doc.querySelector('body')?.innerHTML||'').trim();
                }
              }catch(_){}
              q('#html').value = bodySnippet;
            }catch(e){
              q('#html').value='';
              toast(false,'讀取既有 HTML 失敗，僅帶入標題/檔名');
            }
            toast(true,'已帶入表單，可直接修改後按「儲存」');
            // ★ 記下舊位置（為了支援搬移）
            editingRef = { date: d, course, type, path: it.path };
          };
          row.children[1].children[1].onclick=async()=>{
            // ★ 新增：刪除前確認
            const title = it.title || base(it.path||'');
            const msg =
              `確認要刪除這個項目嗎？\n\n` +
              `學生：${stu}\n` +
              `日期：${d}\n` +
              `課程：${manifest.courses[course]?.label||course} (${course})\n` +
              `類型：${manifest.types[type]||type} (${type})\n` +
              `標題/檔名：${title}\n\n` +
              `此操作將從 manifest 移除，並嘗試刪除對應檔案（若有）。\n` +
              `此操作無法復原！`;
            if (!confirm(msg)) return;
            const arr=manifest.days[d][course][type];
            const [removed]=arr.splice(idx,1);
            removeEmpty(d,course,type);
            if(removed?.path){
              try{ await apiDelete(removed.path); }catch(e){ toast(false,'刪檔失敗：'+(e.message||e)); }
            }
            await apiSave(`students/${stu}/manifest.json`, manifest);
            renderList(); toast(true,'已刪除（含 HTML 檔）');
          };
          wrap.appendChild(row);
        });
      });
    });
  });
}

// ------- actions -------
async function loadRoster(){
  roster=await getJSON('roster.json'); const last = localStorage.getItem('lastStu'); if (last && (roster.students||[]).some(s=>s.id===last)) stu=last; renderStu();
}
async function loadManifest(){
  editingRef = null;  // ← 切換學生載入資料時，重置編輯狀態
  manifest=await getJSON(`students/${stu}/manifest.json`); ensureBase();
  renderCourseType(); setDefaultDateFocus(); renderList(); renderTypeChips();
  wireCalendarLink();      // ★ 資料載入後更新
}

async function toggleHolidayForCurrentDate(){
  const d = q('#filterDate').value || q('#date').value;
  if(!d) return toast(false,'請先選日期');
  manifest.holidays = Array.isArray(manifest.holidays) ? manifest.holidays : [];
  const i = manifest.holidays.indexOf(d);
  if (i === -1) { manifest.holidays.push(d); toast(true, `已標記放假：${d}`); }
  else { manifest.holidays.splice(i,1); toast(true, `已取消放假：${d}`); }
  await apiSave(`students/${stu}/manifest.json`, manifest);
  renderList();
}

function buildFilename(date,title){
  const safe=(title||'lesson').trim().replace(/\s+/g,'_').toLowerCase();
  return `${date}_${safe}.html`;
}
async function doSave(){
  if(!isLocal()) return toast(false,'儲存/刪除僅限本機使用');
  if(!stu) return toast(false,'請先建立學生');
  const date=q('#date').value||''; if(!date) return toast(false,'請選日期');
  const course=q('#course').value; const type=q('#type').value;
  const title=(q('#title').value||'').trim();
  let filename=(q('#filename').value||'').trim(); if(!filename) filename = buildFilename(date,title);
  // ★ 若檔名本來就長得像 YYYY-MM-DD_... ，而日期改了，幫忙同步檔名的日期前綴
  const dateRe=/^\d{4}-\d{2}-\d{2}_/;
  if (filename && dateRe.test(filename) && filename.slice(0,10)!==date) {filename = filename.replace(dateRe, date + '_');}
  
  // ★ 一律補上 .html（僅當使用者沒打副檔名）
  if (!/\.[a-z0-9]+$/i.test(filename)) {
    filename += '.html';
    q('#filename').value = filename; // 讓 UI 也反映正確檔名
  }
  const rel=`materials/${stu}/${course}/${filename}`;
  const html=(q('#html').value||'').trim();
  const fromEdit = !!editingRef;
  if (!html && !fromEdit) {return toast(false, '沒有內容：請先輸入內容，或從列表點「編輯」再儲存');}

  if(html){
    const wrap=`<!doctype html><html lang="zh-Hant"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>${title||''}</title>
<style>body{font-family:system-ui,"Noto Sans TC",Arial,sans-serif;margin:0;background:#f6f7fb;}
.header{background:#111827;color:#fff;padding:10px 14px;}
.header a{color:#a7f3d0;text-decoration:none}
.container{max-width:900px;margin:18px auto;background:#fff;border-radius:12px;padding:18px 20px;box-shadow:0 10px 30px rgba(0,0,0,.06)}</style>
</head><body>
<div class="header">← <a href="../../../index.html?student=${encodeURIComponent(stu)}&date=${encodeURIComponent(date)}">返回日曆</a></div>
<div class="container"><h1>${title||''}</h1>${html}</div>
</body></html>`;
    await apiSave(rel, wrap);
  }

  
// ★ 偵測是否有「搬移」情境（日期/課程/類型/檔名變動）
  const changedKeys = editingRef && (
    editingRef.date!==date || editingRef.course!==course || editingRef.type!==type || editingRef.path!==rel
  );
  let doMove = false;
  if (changedKeys) {
    // 詢問使用者：搬移/覆蓋（確定）還是新增（取消）
    doMove = confirm(
      '偵測到你變更了日期/課程/類型或檔名。\n' +
      '按「確定」：搬移/覆蓋原項目到新位置（原項目會被移除）。\n' +
      '按「取消」：保留原項目，另外新增一筆。'
    );
    if (!doMove) {
      // 走新增：保留舊筆，同時新增一筆
      // ★ 若沒填 HTML 且新舊路徑不同，複製舊檔到新路徑，避免壞連結
      if (fromEdit && !html && editingRef?.path && editingRef.path !== rel) {
        try {
          const raw = await getText(editingRef.path);
          await apiSave(rel, raw);
        } catch (e) {
          return toast(false, '建立新副本失敗：' + (e.message || e));
        }
      }
      // 走新增路線：清除編輯參考，避免誤刪舊筆
      editingRef = null;
    }
  }
  if (doMove) {
    // 若只是搬位置而沒改內容：先把舊檔複製到新路徑
    if (editingRef.path && editingRef.path !== rel && !html) {
      try {
        const raw = await getText(editingRef.path);
        await apiSave(rel, raw);
      } catch (e) {
        toast(false, '搬移時建立新檔失敗：' + (e.message || e));
      }
    }
    // 從舊位置移除那筆
    const oldArr = manifest.days?.[editingRef.date]?.[editingRef.course]?.[editingRef.type];
    if (Array.isArray(oldArr)) {
      const i = oldArr.findIndex(x => x.path === editingRef.path);
      if (i >= 0) oldArr.splice(i, 1);
      removeEmpty(editingRef.date, editingRef.course, editingRef.type);
    }
    // 舊檔與新檔不同路徑時，刪舊檔
    if (editingRef.path && editingRef.path !== rel) {
      try { await apiDelete(editingRef.path); } catch(e) { toast(false, '刪除舊檔失敗：'+(e.message||e)); }
    }
  }

  const arr=ensureArr(date,course,type);
  const exists=arr.find(x=>x.path===rel);
  if(exists){ exists.title=title; } else { arr.push({title, path: rel}); }

  await apiSave(`students/${stu}/manifest.json`, manifest);

  if(!q('#keepForm').checked){
    q('#title').value=''; q('#filename').value=''; q('#html').value='';
  }
  // ★ 在清掉 editingRef 之前決定訊息（用既有的 changedKeys / doMove）
  const onlyMetaUpdate = fromEdit && !html && !changedKeys && !doMove;
  editingRef = null;  // 存檔完成後清掉編輯狀態
  setDefaultDateFocus(); renderList();
  toast(true, onlyMetaUpdate ? '已儲存（內容未變，只更新標題/分類）' : '已儲存');
}

function clearForm(){ q('#title').value=''; q('#filename').value=''; q('#html').value=''; editingRef = null;} // ← 一併清掉編輯狀態，之後就是「純新增」
async function reloadCurrentHtml(){
  const file=q('#filename').value; if(!file) return toast(false,'目前沒有檔名可重載');
  // ★ 補副檔名
  if (!/\.[a-z0-9]+$/i.test(filename)) {
    filename += '.html';
    q('#filename').value = filename;
  }
  const rel=`materials/${stu}/${q('#course').value}/${file}`;
  try{
    const raw=await getText(rel);
    const doc=new DOMParser().parseFromString(raw,'text/html');
    const cont=doc.querySelector('.container'); let body='';
    if(cont){ const c=cont.cloneNode(true); const h=c.querySelector('h1'); if(h) h.remove(); body=c.innerHTML.trim(); }
    else{ body=(doc.querySelector('body')?.innerHTML||'').trim(); }
    q('#html').value=body; toast(true,'已重載目前教材');
  }catch(e){ toast(false,'重載失敗：'+(e.message||e)); }
}

// ▶ 新增 / 更新 類型
async function addOrUpdateType(){
  const key=(q('#newTypeKey').value||'').trim();
  const label=(q('#newTypeLabel').value||'').trim();
  if(!/^[a-z0-9_-]{2,}$/.test(key)) return toast(false,'請用小寫英數與 _- 當作 key（至少 2 字）');
  manifest.types[key] = label || key;
  await apiSave(`students/${stu}/manifest.json`, manifest);
  renderCourseType(); renderTypeChips();
  toast(true, `已 ${label?'更新':'新增'} 類型：${key}`);
}

function calendarURL(){
  // 取目前選中的學生與日期（若有 date 篩選）
  const dInput = q('#filterDate');
  const d = dInput && dInput.value ? dInput.value.trim() : '';
  const base = 'index.html';
  const qs = d
    ? `?student=${encodeURIComponent(stu)}&date=${encodeURIComponent(d)}`
    : `?student=${encodeURIComponent(stu)}`;
  return `${base}${qs}#calendar-widget`;
}

function wireCalendarLink(){
  const a = q('#gotoCalendar');
  if(!a || !stu) return;
  a.href = calendarURL();                    // 讓 href 反映目前選擇
  a.onclick = (ev)=>{                        // 保險：攔截點擊強制導向正確 URL
    ev.preventDefault();
    location.href = calendarURL();
  };
}


// ------- boot -------
async function init(){
  await loadRoster(); await loadManifest();
  q('#btnReload').onclick=loadManifest;
  q('#btnSave').onclick=doSave;
  q('#btnClear').onclick=clearForm;
  q('#btnReloadHtml').onclick=reloadCurrentHtml;
  q('#filterDate').oninput=()=>{ renderList();wireCalendarLink();} // ★ 日期變更也更新

  // 新增學生
  q('#btnAddStudent').onclick=async()=>{
    if(!isLocal()) return toast(false,'新增僅限本機使用');
    const id=(q('#newId').value||'').trim(); const name=(q('#newName').value||'').trim();
    if(!/^[a-z0-9_-]+$/.test(id)) return toast(false,'id 需為小寫英數與 _-');
    roster.students.push({id, name: name||id});
    await apiSave('roster.json', roster);
    q('#newId').value=''; q('#newName').value='';
    await loadRoster(); stu=id; await loadManifest(); toast(true,'已新增學生');
  };

  // 新增/更新 類型
  q('#btnAddType')?.addEventListener('click', addOrUpdateType);
  q('#btnHoliday')?.addEventListener('click', toggleHolidayForCurrentDate);

}
init();


=== FILE: docs\index.html ===
<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>學生課程行事曆｜清大文理補習班</title>
<style>
  :root{
    --brand:#1d4ed8;      /* 主色 */
    --accent:#34c759;     /* 綠點 */
    --ink:#111827;        /* 主字色 */
    --muted:#6b7280;      /* 次字色 */
    --bg:#f3f5f7;         /* 背景 */
    --card:#ffffff;       /* 卡片 */
    --soft:#f7fafc;       /* 淺卡 */
    --line:#e5e7eb;       /* 邊框 */
  }
  *{box-sizing:border-box}
  body{font-family:system-ui,"Noto Sans TC",Arial,sans-serif;background:var(--bg);color:var(--ink);margin:0;}
  a{color:var(--brand);text-decoration:none}
  a:hover{text-decoration:underline}

  /* Header */
  .site-header{background:#0f172a;color:#fff}
  .site-header .wrap{max-width:1100px;margin:0 auto;padding:14px 18px;display:flex;align-items:center;justify-content:space-between;}
  .brand{display:flex;align-items:center;gap:10px;font-weight:800;letter-spacing:.5px}
  .brand .sub{opacity:.85;font-weight:600}
  .who{font-weight:600;opacity:.9}

  /* App */
  .app{max-width:1100px;margin:26px auto;background:var(--card);border-radius:14px;box-shadow:0 12px 30px rgba(0,0,0,.06);padding:22px 24px;position:relative;}
  .topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
  .nav{display:flex;gap:10px;align-items:center}
  button.navbtn{border:1px solid var(--line);background:#fff;border-radius:10px;padding:6px 10px;cursor:pointer}
  button.navbtn:hover{background:#f9fafb}
  .links{display:flex;gap:12px;align-items:center}
  .links .name{font-weight:700}

  .msg{padding:12px 14px;border-radius:10px;margin:8px 0;display:none}
  .msg.err{background:#fde2e0;color:#9b1c1c}

  /* Calendar */
  .calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:10px;margin-top:8px;}
  .dow{font-weight:700;color:#5b6770;text-align:center;}
  .cell{background:var(--soft);min-height:86px;border-radius:12px;padding:10px;position:relative;border:1px solid var(--line)}
  .cell .day{font-weight:700;color:#3a4a5b;}
  .cell.has .dot{position:absolute;right:10px;top:10px;width:8px;height:8px;background:var(--accent);border-radius:50%;}
  .cell .dots .dot-holiday { background: #f59e0b; } /* 或加 !important */
  /* --- 多顆點（綠＋橘）--- */
  .cell .dots{
    position:absolute; right:10px; top:10px;
    display:flex; gap:4px;
  }
  .cell .dots .dot{ position:static; } /* 覆蓋 .cell.has .dot 的 absolute，避免重疊 */
  .dot-holiday{ background:#f59e0b; }   /* 橘點 */
  .cell.today{outline:2px solid var(--brand);background:#eef6ff;}
  .cell:hover{box-shadow:0 0 0 2px rgba(29,78,216,.15) inset}

  /* Popover */
  .popover{position:absolute;z-index:50;min-width:300px;max-width:380px;background:#fff;border-radius:12px;box-shadow:0 20px 40px rgba(0,0,0,.18);padding:12px;display:none;border:1px solid var(--line)}
  .popover .row{display:flex;gap:8px;align-items:center;margin-bottom:8px}
  .card{background:var(--soft);border:1px solid var(--line);border-radius:10px;padding:10px 12px;margin:8px 0;}

  /* Footer */
  .site-footer{margin:24px 0 40px;color:var(--muted)}
  .site-footer .wrap{max-width:1100px;margin:0 auto;padding:0 18px;display:flex;justify-content:space-between;align-items:center}
  .note{font-size:14px}
</style>
</head>
<body>
  <!-- Header -->
  <header class="site-header">
    <div class="wrap">
      <div class="brand">
        <div style="font-size:18px">學生課程行事曆</div>
        <div class="sub">清大文理補習班</div>
      </div>
      <div class="who">
        <span id="studentName">學生：</span>
        <span id="adminLink" style="margin-left:12px"></span>
      </div>
    </div>
  </header>

  <!-- App -->
  <main class="app" id="app">
    <div class="topbar">
      <div class="nav">
        <button class="navbtn" id="btnPrev" aria-label="上一月">◀</button>
        <div id="monthLabel" style="font-weight:700"></div>
        <button class="navbtn" id="btnNext" aria-label="下一月">▶</button>
      </div>
      <div class="links">
        <!-- 只顯示學生名字與（本機）後台；不露出老師主頁 -->
      </div>
    </div>

    <div id="err" class="msg err"></div>
    <div id="calendar"></div>

    <!-- 點有資料的日期才會開 -->
    <div id="popover" class="popover" role="dialog" aria-modal="true">
      <div class="row">
        <label>課程：</label><select id="pCourse"></select>
        <label>類型：</label><select id="pType"></select>
      </div>
      <div id="pList"></div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="wrap">
      <div class="note">© <span id="year"></span> 清大文理補習班 | Jeff</div>
      <div class="note">本頁僅提供學習內容查閱</div>
    </div>
  </footer>

<script>
/* ---------- 基本工具 ---------- */
const q=(s,e=document)=>e.querySelector(s);
const params=new URLSearchParams(location.search);
let currentStudent=params.get('student')||null;
let currentDate=params.get('date')||null;
let currentCourse=params.get('course')||null;
let currentType=params.get('type')||null;
const isLocal=()=>['127.0.0.1','localhost'].includes(location.hostname);

async function getJSON(path){
  // 本機優先打 API，失敗就回退讀靜態檔（GitHub Pages 可用）
  if(isLocal()){
    try{ const r=await fetch(`/api/data/${path}?ts=${Date.now()}`,{cache:'no-store'}); if(r.ok) return await r.json(); }catch(e){}
  }
  const r2=await fetch(`${path}?ts=${Date.now()}`,{cache:'no-store'});
  if(!r2.ok) throw new Error('HTTP '+r2.status);
  return await r2.json();
}

let roster={students:[]}, manifest=null;
let view = (()=>{
  const d = currentDate ? new Date(currentDate) : new Date();
  return {y: d.getFullYear(), m: d.getMonth()};
})();
const fmtYMD=(d)=>`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`;
const base=(p)=>p.split('/').pop();
function niceTitle(item){
  if(item.title && item.title.trim()) return item.title.trim();
  let name=base(item.path||'').replace(/\.[^.]+$/,'').replace(/^\d{4}-\d{2}-\d{2}_?/, '');
  return name || '教材';
}
function setErr(m){const el=q('#err'); if(m){el.textContent=m; el.style.display='block';} else el.style.display='none';}
function closePopover(){ const p=q('#popover'); if(p) p.style.display='none'; }

/* ---------- 判斷該日是否有任何項目 ---------- */
function dateHasAny(dayObj){
  if(!dayObj) return false;
  return Object.values(dayObj).some(courseObj=>{
    if(!courseObj) return false;
    return Object.values(courseObj).some(arr=>Array.isArray(arr)&&arr.length>0);
  });
}

/* ---------- 渲染月曆 ---------- */
function renderCalendar(){
  closePopover(); // 重繪時收掉殘留的 popover
  const container=q('#calendar'); container.innerHTML='';
  const y=view.y, m=view.m;
  q('#monthLabel').textContent = `${y} / ${String(m+1).padStart(2,'0')}`;

  const first=new Date(y,m,1), start=first.getDay(), last=new Date(y,m+1,0), days=last.getDate();
  const grid=document.createElement('div'); grid.className='calendar';

  ["日","一","二","三","四","五","六"].forEach(d=>{
    const el=document.createElement('div'); el.className='dow'; el.textContent=d; grid.appendChild(el);
  });
  for(let i=0;i<start;i++) grid.appendChild(document.createElement('div'));

  const daysMap=manifest?.days||{};
  for(let day=1; day<=days; day++){
    const d=new Date(y,m,day), k=fmtYMD(d), cell=document.createElement('div'); cell.className='cell';
    // 有沒有教材/作業（綠點）
    const has = dateHasAny(daysMap[k]);
    // 是否放假（橘點）— 舊 manifest 沒 holidays 時會自動視為 []
    const isOff = Array.isArray(manifest?.holidays) && manifest.holidays.includes(k);

    if (has || isOff) {
      // 統一給 .has（只是視覺用，不影響資料）
      cell.classList.add('has');

      // 右上角可放 1～2 顆點（綠＋橘）
      const dots = document.createElement('span');
      dots.className = 'dots';
      if (has)  { const g = document.createElement('span'); g.className = 'dot'; dots.appendChild(g); }
      if (isOff){ const o = document.createElement('span'); o.className = 'dot dot-holiday'; dots.appendChild(o); }
      cell.appendChild(dots);

      // 點擊行為：有教材→開清單；只有放假→跳訊息
      cell.style.cursor = 'pointer';
      cell.onclick = ()=>openPopover(k, cell, { has, isOff });
    }
    const todayStr=fmtYMD(new Date());
    if(k===todayStr) cell.classList.add('today');

    const dayEl=document.createElement('div'); dayEl.className='day'; dayEl.textContent=day; cell.appendChild(dayEl);
    grid.appendChild(cell);
  }
  container.appendChild(grid);

  // ❌ 不再自動開啟 popover（即使 URL 帶 ?date=）
}

/* ---------- 小卡（Popover） ---------- */
function combosFor(dateKey){
  const day=manifest?.days?.[dateKey]||{};
  const combos=[];
  Object.keys(day).forEach(c=>{
    Object.keys(day[c]||{}).forEach(t=>{
      const items=(day[c][t]||[]);
      if(items.length) combos.push({course:c,type:t,items});
    });
  });
  return combos;
}
function renderPopoverList(dateKey, courseKey, typeKey){
  const wrap=q('#pList'); wrap.innerHTML='';
  const arr=(((manifest.days?.[dateKey]||{})[courseKey]||{})[typeKey])||[];
  if(!arr.length){ wrap.innerHTML='<div class="card">這個組合目前沒有內容</div>'; return; }
  arr.forEach(it=>{
    const card=document.createElement('div'); card.className='card';
    const a=document.createElement('a'); a.href=it.path;  // 相對路徑，靜態可用
    a.textContent=niceTitle(it);
    card.appendChild(a); wrap.appendChild(card);
  });
}
function openPopover(dateKey, anchorCell, flags={}){
  const { has=false, isOff=false } = flags;
  currentDate=dateKey;
  const combos=combosFor(dateKey);
  // if(!combos.length) return; // 沒有資料就不開 popover

  const pop=q('#popover'); const app=q('#app');
  const csel=q('#pCourse'), tsel=q('#pType');
  csel.innerHTML=''; tsel.innerHTML='';
  // 新增／更新放假 banner（橘色）
  let banner = pop.querySelector('.holiday-banner');
  if (isOff) {
    if (!banner) {
      banner = document.createElement('div');
      banner.className = 'card holiday-banner';
      banner.style.borderColor = '#f59e0b';
      banner.style.background = '#fff7e6';
      banner.textContent = '🧡 此日標記為放假（仍可新增教材/作業）';
      pop.insertBefore(banner, pop.firstChild);
      }
      } else if (banner) {
        banner.remove();
        }
  const courses=[...new Set(combos.map(x=>x.course))];
  const types=[...new Set(combos.map(x=>x.type))];
  const headerRow = pop.querySelector('.row');   // 課程/類型那一排
  const listWrap  = q('#pList');
  if (combos.length === 0) {
    // 沒教材：隱藏下拉，列表顯示一行說明（仍可由後台新增）
    if (headerRow) headerRow.style.display = 'none';
    listWrap.innerHTML = '<div class="card">（本日無教材/作業）</div>';
  } else {
    if (headerRow) headerRow.style.display = '';
    courses.forEach(c=>{ const o=document.createElement('option'); o.value=c; o.textContent=manifest.courses?.[c]?.label||c; csel.appendChild(o); });
    types.forEach(t=>{ const o=document.createElement('option'); o.value=t; o.textContent=manifest.types?.[t]||t; tsel.appendChild(o); });
    const ck=(currentCourse&&courses.includes(currentCourse))?currentCourse:courses[0];
    const tk=(currentType&&types.includes(currentType))?currentType:types[0];
    csel.value=ck; tsel.value=tk;
    renderPopoverList(dateKey, ck, tk);
    csel.onchange=()=>{ currentCourse=csel.value; renderPopoverList(dateKey, csel.value, tsel.value); };
    tsel.onchange=()=>{ currentType=tsel.value; renderPopoverList(dateKey, csel.value, tsel.value); };
  }


  const ar=anchorCell.getBoundingClientRect();
  const pr=app.getBoundingClientRect();
  pop.style.display='block';
  pop.style.left = (ar.right - pr.left + 12) + 'px';
  pop.style.top  = (ar.top - pr.top + window.scrollY - 6) + 'px';
  const popRect=pop.getBoundingClientRect();
  if(popRect.right > window.innerWidth - 12){
    pop.style.left = (ar.left - pr.left - popRect.width - 12) + 'px';
  }
  document.addEventListener('click', onDocClick);
  function onDocClick(e){ if(pop.contains(e.target)||anchorCell.contains(e.target)) return; pop.style.display='none'; document.removeEventListener('click', onDocClick); }
}

/* ---------- 載入 ---------- */
async function loadAll(){
  try{
    // 年份到 footer
    q('#year').textContent = new Date().getFullYear();

    roster=await getJSON('roster.json');

    // 線上一定要用 ?student=，避免學生看到其他名單
    if(!currentStudent){
      if(isLocal()){
        currentStudent = roster.students?.[0]?.id || null;
      }else{
        setErr('請使用老師提供的專屬連結開啟本頁。');
        return;
      }
    }

    const stu = (roster.students||[]).find(s=>s.id===currentStudent);
    q('#studentName').textContent = `學生：${stu?.name || currentStudent}`;

    // 本機顯示後台入口（線上不顯示／也不能用）
    if(isLocal()) q('#adminLink').innerHTML = '<a href="admin.html" style="color:#a7f3d0">後台</a>';

    manifest=await getJSON(`students/${currentStudent}/manifest.json`);
    renderCalendar();
  }catch(e){
    console.error(e);
    setErr('讀取資料失敗：請檢查 docs/roster.json 與 docs/students/<id>/manifest.json 路徑/格式。');
  }
}

/* ---------- 月切換 ---------- */
q('#btnPrev').onclick=()=>{ if(--view.m<0){view.m=11; view.y--;} renderCalendar(); };
q('#btnNext').onclick=()=>{ if(++view.m>11){view.m=0; view.y++;} renderCalendar(); };

loadAll();
</script>
</body>
</html>


=== FILE: docs\roster.json ===
{
  "students": [
    {
      "id": "庭妤",
      "name": "庭妤"
    },
    {
      "id": "ray",
      "name": "Ray"
    },
    {
      "id": "sally",
      "name": "Sally"
    }
  ]
}

=== FILE: docs\teacher.html ===
<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>老師主頁</title>
<style>
  body{font-family:system-ui,"Noto Sans TC",Arial,sans-serif;background:#f3f5f7;margin:0;}
  .app{max-width:1024px;margin:40px auto;background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.06);padding:24px 28px;}
  .header{display:flex;justify-content:space-between;align-items:center}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:12px;margin-top:14px;}
  .card{background:#f7fafc;border-radius:12px;padding:14px;border:1px solid #e5e7eb}
  .card h3{margin:0 0 6px}
  .btn{display:inline-block;padding:8px 12px;border-radius:8px;background:#2563eb;color:#fff;text-decoration:none}
</style>
</head>
<body>
<div class="app">
  <div class="header">
    <h1>老師主頁</h1>
    <div id="adminLink"></div>
  </div>
  <div id="list" class="grid"></div>
</div>
<script>
const q=(s,e=document)=>e.querySelector(s);
const isLocal=()=>['127.0.0.1','localhost'].includes(location.hostname);
async function getJSON(path){
  if(isLocal()){
    try{ const r=await fetch(`/api/data/${path}?ts=${Date.now()}`,{cache:'no-store'}); if(r.ok) return await r.json(); }catch(e){}
  }
  const r2=await fetch(`${path}?ts=${Date.now()}`,{cache:'no-store'});
  if(!r2.ok) throw new Error('HTTP '+r2.status);
  return await r2.json();
}
async function init(){
  if(isLocal()) q('#adminLink').innerHTML = '<a class="btn" href="admin.html">進後台</a>';
  const roster=await getJSON('roster.json');
  const wrap=q('#list'); wrap.innerHTML='';
  (roster.students||[]).forEach(s=>{
    const el=document.createElement('div'); el.className='card';
    el.innerHTML=`<h3>${s.name||s.id}</h3>
      <div style="opacity:.7">id：${s.id}</div>
      <div style="margin-top:8px"><a class="btn" href="index.html?student=${encodeURIComponent(s.id)}">打開日曆</a></div>`;
    wrap.appendChild(el);
  });
}
init();
</script>
</body>
</html>


=== FILE: docs\students\ray\manifest.json ===
{
  "version": 2,
  "student": "ray",
  "displayName": "Ray Chen",
  "courses": {
    "english": {
      "label": "英文",
      "color": "#1d4ed8"
    },
    "math": {
      "label": "數學",
      "color": "#059669"
    }
  },
  "days": {
    "2025-08-10": {
      "english": {
        "material": [
          {
            "title": "瑞瑞第一課",
            "path": "materials/ray/english/2025-08-10_瑞瑞第一課.html"
          }
        ]
      },
      "math": {
        "material": [
          {
            "title": "瑞瑞第一課數學",
            "path": "materials/ray/math/2025-08-10_瑞瑞第一課數學.html"
          }
        ]
      }
    },
    "2025-08-17": {
      "english": {
        "material": [
          {
            "title": "prepared",
            "path": "materials/ray/english/2025-08-17_prepared.html"
          }
        ]
      }
    }
  },
  "types": {
    "material": "教材",
    "homework": "作業"
  },
  "holidays": [
    "2025-08-24"
  ]
}

=== FILE: docs\students\sally\manifest.json ===
{
  "version": 3,
  "student": "sally",
  "displayName": "sally",
  "courses": {
    "english": {
      "label": "英文"
    },
    "math": {
      "label": "數學"
    }
  },
  "types": {
    "material": "教材",
    "homework": "作業"
  },
  "days": {
    "2025-08-09": {
      "english": {
        "material": [
          {
            "title": "主題：媒體素養 (Media Literacy)",
            "path": "materials/sally/english/2025-08-09_主題：媒體素養_(media_literacy).html"
          }
        ]
      }
    }
  }
}

=== FILE: docs\students\庭妤\manifest.json ===
{
  "version": 3,
  "student": "庭妤",
  "displayName": "庭妤",
  "courses": {
    "english": {
      "label": "英文"
    },
    "math": {
      "label": "數學"
    }
  },
  "types": {
    "material": "教材",
    "supplement": "補充教材",
    "homework": "作業"
  },
  "days": {
    "2025-08-09": {
      "english": {
        "material": [
          {
            "title": "高三學測英文 - 主題探討：媒體素養",
            "path": "materials/庭妤/english/2025-08-09_高三學測英文_-_主題探討：媒體素養.html"
          }
        ],
        "supplement": [
          {
            "title": "中翻英、翻譯批改回饋",
            "path": "materials/庭妤/english/2025-08-09_補充教材.html"
          }
        ]
      }
    },
    "2025-08-02": {
      "english": {
        "material": [
          {
            "title": "高三學測英文 - 少子化議題探討",
            "path": "materials/庭妤/english/2025-08-02_三學測英文_-_少子化議題探討.html"
          }
        ]
      }
    },
    "2025-07-19": {
      "english": {
        "material": [
          {
            "title": "高三學測英文 - 本週複習精華",
            "path": "materials/庭妤/english/2025-07-19_高三學測英文_-_本週複習精華.html"
          }
        ]
      }
    },
    "2025-08-16": {
      "english": {
        "material": [
          {
            "title": "主題探討-心理健康與壓力調適",
            "path": "materials/庭妤/english/2025-08-16_主題探討-心理健康與壓力調適.html"
          }
        ]
      }
    }
  },
  "holidays": [
    "2025-08-23"
  ]
}

=== FILE: docs\materials\庭妤\english\2025-07-19_高三學測英文_-_本週複習精華.html ===
<!doctype html><html lang="zh-Hant"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>高三學測英文 - 本週複習精華</title>
<style>body{font-family:system-ui,"Noto Sans TC",Arial,sans-serif;margin:0;background:#f6f7fb;}
.header{background:#111827;color:#fff;padding:10px 14px;}
.header a{color:#a7f3d0;text-decoration:none}
.container{max-width:900px;margin:18px auto;background:#fff;border-radius:12px;padding:18px 20px;box-shadow:0 10px 30px rgba(0,0,0,.06)}</style>
</head><body>
<div class="header">← <a href="../../../index.html?student=%E5%BA%AD%E5%A6%A4&date=2025-07-19">返回日曆</a></div>
<div class="container"><h1>高三學測英文 - 本週複習精華</h1><meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>高三學測英文 - 本週複習精華</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&amp;display=swap" rel="stylesheet">
    <style>
        /* 使用 Noto Sans TC 作為主要字體 */
        body {
            font-family: 'Noto Sans TC', sans-serif;
        }
        /* 讓 details 標籤的箭頭有轉場動畫 */
        summary::marker {
            transition: transform 0.2s;
        }
        details[open] summary::marker {
           transform: rotate(90deg);
        }
        /* 移除預設的 details 箭頭，改用偽元素自訂，以利於樣式控制 */
        summary {
            list-style: none;
        }
        summary::-webkit-details-marker {
            display: none;
        }
        summary::before {
            content: '▶';
            margin-right: 8px;
            font-size: 0.8em;
            display: inline-block;
            transition: transform 0.2s ease-in-out;
        }
        details[open] summary::before {
            transform: rotate(90deg);
        }
    </style>



    <!-- 自動產生返回主頁的麵包屑 -->
  <div id="breadcrumb" class="max-w-4xl mx-auto mb-4"></div>
  <script>
    (function () {
      // 1) 先用 <meta name="lesson-date">；若沒有，再嘗試從檔名推 YYMMDD
      const metaDate = document.querySelector('meta[name="lesson-date"]')?.content?.trim();
      let dateStr = metaDate && !isNaN(Date.parse(metaDate)) ? metaDate : null;
      if (!dateStr) {
        const m = location.pathname.match(/(\d{2})(\d{2})(\d{2})\.html$/);
        if (m) dateStr = `20${m[1]}-${m[2]}-${m[3]}`;
      }
  </script>

  <div class="max-w-4xl mx-auto bg-white rounded-2xl shadow-lg p-6 sm:p-10">

    <div class="max-w-4xl mx-auto bg-white rounded-2xl shadow-lg p-6 sm:p-10">
        <header class="text-center mb-12">
            <h1 class="text-3xl sm:text-4xl font-bold text-blue-800 mb-2">高三學測英文 - 本週複習精華 📝</h1>
            <p class="text-lg text-gray-600">主題：倒裝 / 完成式 / 傳聞句型 / 讓步子句 / 介係詞片語 / likely 表示「可能」</p>
        </header>

        <main class="space-y-12">
            <!-- 1. Not only 倒裝 -->
            <section id="inversion">
                <h2 class="text-2xl font-bold text-blue-700 border-b-2 border-blue-200 pb-2 mb-4">1. Not only … but also … (句首倒裝)</h2>
                <p class="text-gray-700 mb-4">當 <code>Not only</code> 移至句首時，第一個子句必須形成「疑問句語序」來強調語氣。</p>
                <div class="overflow-x-auto rounded-lg shadow-md">
                    <table class="w-full text-sm text-left text-gray-600">
                        <thead class="text-xs text-blue-800 uppercase bg-blue-100">
                            <tr>
                                <th scope="col" class="px-6 py-3">句型結構</th>
                                <th scope="col" class="px-6 py-3">例句</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="bg-white border-b hover:bg-gray-50">
                                <td class="px-6 py-4 font-medium"><strong>一般語序</strong><br><code class="text-pink-600 bg-pink-50 rounded px-1 py-0.5">S + not only V₁ … but also V₂ …</code></td>
                                <td class="px-6 py-4"><code>She not only plays the piano but also sings beautifully.</code></td>
                            </tr>
                            <tr class="bg-white hover:bg-gray-50">
                                <td class="px-6 py-4 font-medium"><strong>倒裝 (置於句首)</strong><br><code class="text-pink-600 bg-pink-50 rounded px-1 py-0.5">Not only aux./be + S + V₁ …</code></td>
                                <td class="px-6 py-4"><code>Not only <strong>did she win</strong> the prize, but she also <strong>donated</strong> the money.</code></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="mt-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 p-4 rounded-r-lg">
                    <strong>💡 技巧提點:</strong> 將 <code>not only</code> 放到句首後，記得把第一個主要動詞的助動詞 (<code>do/does/did</code>, <code>has/have/had</code>) 或 <code>be</code> 動詞 (<code>is/am/are/was/were</code>) 移到主詞前面。
                </div>
            </section>

            <!-- 2. 完成式 -->
            <section id="perfect-tense">
                <h2 class="text-2xl font-bold text-blue-700 border-b-2 border-blue-200 pb-2 mb-4">2. 完成式 (Perfect Tense)</h2>
                <p class="text-gray-700 mb-4">完成式用來表達動作在某個時間點「之前」已經完成。</p>
                <div class="overflow-x-auto rounded-lg shadow-md">
                    <table class="w-full text-sm text-left text-gray-600">
                        <thead class="text-xs text-blue-800 uppercase bg-blue-100">
                            <tr>
                                <th scope="col" class="px-6 py-3">時態</th>
                                <th scope="col" class="px-6 py-3">用法</th>
                                <th scope="col" class="px-6 py-3">例句</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="bg-white border-b hover:bg-gray-50">
                                <td class="px-6 py-4 font-medium"><strong>過去完成式 (had + pp)</strong></td>
                                <td class="px-6 py-4">過去某個時間點<strong>之前</strong>已完成的動作。</td>
                                <td class="px-6 py-4"><code>When we arrived, they <strong>had already left</strong>.</code></td>
                            </tr>
                            <tr class="bg-white hover:bg-gray-50">
                                <td class="px-6 py-4 font-medium"><strong>不定詞完成式 (to have + pp)</strong></td>
                                <td class="px-6 py-4">表示不定詞的動作比主要動詞<strong>更早發生</strong>。</td>
                                <td class="px-6 py-4"><code>He is said <strong>to have solved</strong> the puzzle.</code></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- 3. 傳聞句型 -->
            <section id="hearsay">
                <h2 class="text-2xl font-bold text-blue-700 border-b-2 border-blue-200 pb-2 mb-4">3. 傳聞句型：It is said that …</h2>
                <p class="text-gray-700 mb-4">這個句型常用來轉述一個普遍的說法或傳聞，有兩種轉換方式。</p>
                <div class="bg-gray-50 p-4 rounded-lg shadow-inner">
                    <p><strong>原句：</strong> <code>It is said that the singer is very humble.</code><br>
                    <strong>轉換 →</strong> <code>The singer <strong>is said to be</strong> very humble.</code></p>
                    <div class="mt-2 text-sm text-gray-600"><strong>判斷：</strong>主要動詞 <code>is</code> said 和子句動詞 <code>is</code> humble <strong>時態相同</strong>，使用 <code>to + Vr</code>。</div>
                </div>
                <div class="bg-gray-50 p-4 rounded-lg mt-4 shadow-inner">
                    <p><strong>原句：</strong> <code>It is said that the treasure was buried here long ago.</code><br>
                    <strong>轉換 →</strong> <code>The treasure <strong>is said to have been buried</strong> here long ago.</code></p>
                    <div class="mt-2 text-sm text-gray-600"><strong>判斷：</strong>子句動詞 <code>was</code> buried 比主要動詞 <code>is</code> said <strong>更早發生</strong>，使用 <code>to have + pp</code>。</div>
                </div>
            </section>
            
            <!-- 4. 讓步子句 -->
            <section id="concession">
                <h2 class="text-2xl font-bold text-blue-700 border-b-2 border-blue-200 pb-2 mb-4">4. 讓步副詞子句 (Concessive Clause)</h2>
                <p class="text-gray-700 mb-4">用來表達「雖然 A 情況存在，但 B 結果依然發生」，有種「退一步說」的意味。</p>
                 <div class="overflow-x-auto rounded-lg shadow-md">
                    <table class="w-full text-sm text-left text-gray-600">
                        <thead class="text-xs text-blue-800 uppercase bg-blue-100">
                            <tr>
                                <th scope="col" class="px-6 py-3">句型</th>
                                <th scope="col" class="px-6 py-3">重點</th>
                                <th scope="col" class="px-6 py-3">例句</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="bg-white border-b hover:bg-gray-50">
                                <td class="px-6 py-4 font-medium"><code>Though / Although</code> + S + V</td>
                                <td class="px-6 py-4"><code>Although</code> 只能放在子句開頭。</td>
                                <td class="px-6 py-4"><code><strong>Although it rained</strong>, we continued the game.</code></td>
                            </tr>
                            <tr class="bg-white hover:bg-gray-50">
                                <td class="px-6 py-4 font-medium"><code>Adj. / Adv. + as</code> + S + V</td>
                                <td class="px-6 py-4">形成倒裝，強調形容詞或副詞。</td>
                                <td class="px-6 py-4"><code><strong>Rich as he is</strong>, he lives a simple life.</code></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- 5. 介係詞 -->
            <section id="preposition">
                <h2 class="text-2xl font-bold text-blue-700 border-b-2 border-blue-200 pb-2 mb-4">5. 介係詞：Despite / In spite of</h2>
                <p class="text-gray-700 mb-4">這兩個介係詞片語意思相同，都等於 <code>although</code>，但後面<strong>只能接名詞</strong>。</p>
                 <div class="overflow-x-auto rounded-lg shadow-md">
                    <table class="w-full text-sm text-left text-gray-600">
                        <thead class="text-xs text-blue-800 uppercase bg-blue-100">
                            <tr>
                                <th scope="col" class="px-6 py-3">正確用法 ✅</th>
                                <th scope="col" class="px-6 py-3">錯誤用法 ❌</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="bg-white border-b hover:bg-gray-50">
                                <td class="px-6 py-4"><code>Despite / In spite of + N / V-ing</code></td>
                                <td class="px-6 py-4"><del><code>Despite he is tired</code></del></td>
                            </tr>
                            <tr class="bg-white hover:bg-gray-50">
                                <td class="px-6 py-4"><code>Despite / In spite of <strong>the fact that</strong> + S + V</code></td>
                                <td class="px-6 py-4"><del><code>In spite of it rained</code></del></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                 <p class="mt-4 text-gray-700"><strong>例句：</strong> <code><strong>Despite the heavy rain</strong>, they enjoyed the outdoor concert.</code></p>
            </section>
            
            <!-- 6. likely -->
            <section id="likely">
                <h2 class="text-2xl font-bold text-blue-700 border-b-2 border-blue-200 pb-2 mb-4">6. likely 的三種「可能」用法</h2>
                <p class="text-gray-700 mb-4"><code>likely</code> 可以用來表達不同情況下的可能性。</p>
                <div class="overflow-x-auto rounded-lg shadow-md">
                    <table class="w-full text-sm text-left text-gray-600">
                        <thead class="text-xs text-blue-800 uppercase bg-blue-100">
                            <tr>
                                <th scope="col" class="px-6 py-3">結構</th>
                                <th scope="col" class="px-6 py-3">適用情況</th>
                                <th scope="col" class="px-6 py-3">例句</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="bg-white border-b hover:bg-gray-50">
                                <td class="px-6 py-4 font-medium"><code>S (人) + be likely to + Vr</code></td>
                                <td class="px-6 py-4">主詞是「人」。</td>
                                <td class="px-6 py-4"><code>Amy <strong>is likely to win</strong> the contest.</code></td>
                            </tr>
                            <tr class="bg-white border-b hover:bg-gray-50">
                                <td class="px-6 py-4 font-medium"><code>It is likely that + S + V</code></td>
                                <td class="px-6 py-4">用 <code>It</code> 當虛主詞，描述一件事情。</td>
                                <td class="px-6 py-4"><code><strong>It is likely that</strong> prices will rise.</code></td>
                            </tr>
                            <tr class="bg-white hover:bg-gray-50">
                                <td class="px-6 py-4 font-medium"><code>It is likely for sb. to + Vr</code></td>
                                <td class="px-6 py-4">強調某人做某事的可能性。</td>
                                <td class="px-6 py-4"><code><strong>It is likely for us to arrive</strong> early.</code></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- 課堂小試 -->
            <section id="quiz">
                <h2 class="text-2xl font-bold text-green-700 border-b-2 border-green-200 pb-2 mb-6">課堂小試 ✏️ (立即練習)</h2>
                <div class="space-y-4">
                    <div class="bg-white p-4 rounded-lg border border-gray-200">
                        <p>1. <strong>Rewrite:</strong> Not only ___ (he / save / money) ___ also ___ (invest / wisely).</p>
                        <details class="mt-2">
                            <summary class="cursor-pointer font-semibold text-blue-600 hover:text-blue-800">點此看答案</summary>
                            <div class="mt-2 pt-2 border-t border-gray-200 text-green-700 font-medium"><code>Not only <strong>did he save money</strong> but (he) also <strong>invested wisely</strong>.</code></div>
                        </details>
                    </div>
                    <div class="bg-white p-4 rounded-lg border border-gray-200">
                        <p>2. <strong>填入正確時態:</strong> When I got to the station, the train already _____ (leave).</p>
                         <details class="mt-2">
                            <summary class="cursor-pointer font-semibold text-blue-600 hover:text-blue-800">點此看答案</summary>
                            <div class="mt-2 pt-2 border-t border-gray-200 text-green-700 font-medium"><code>had already <strong>left</strong></code> (在我到達<strong>之前</strong>，火車就已離開)</div>
                        </details>
                    </div>
                    <div class="bg-white p-4 rounded-lg border border-gray-200">
                        <p>3. <strong>套用傳聞句:</strong> It is said that the painter lived in Paris. → _______</p>
                        <details class="mt-2">
                            <summary class="cursor-pointer font-semibold text-blue-600 hover:text-blue-800">點此看答案</summary>
                            <div class="mt-2 pt-2 border-t border-gray-200 text-green-700 font-medium"><code>The painter <strong>is said to have lived</strong> in Paris.</code> (lived 比 is said 更早發生)</div>
                        </details>
                    </div>
                </div>
            </section>
            
            <!-- 課後作業 -->
            <section id="homework">
                <h2 class="text-2xl font-bold text-purple-700 border-b-2 border-purple-200 pb-2 mb-6">課後作業 🚀 (驗收成果)</h2>
                
                <h3 class="text-lg font-semibold text-gray-800 mb-3">A. 文法填空</h3>
                <div class="space-y-3">
                    <div class="bg-white p-3 rounded-md border"><p>1. ________ it was late, the team decided to keep working.</p>
                        <details class="mt-2"><summary class="text-sm font-semibold text-blue-600">答案</summary><div class="text-sm mt-1 pt-1 border-t text-purple-700"><code>Although</code> / <code>Though</code></div></details>
                    </div>
                    <div class="bg-white p-3 rounded-md border"><p>2. The rumor is that the hero ________ (save) the child from drowning.</p>
                        <details class="mt-2"><summary class="text-sm font-semibold text-blue-600">答案</summary><div class="text-sm mt-1 pt-1 border-t text-purple-700"><code>saved</code></div></details>
                    </div>
                </div>

                <h3 class="text-lg font-semibold text-gray-800 mt-6 mb-3">B. 句型改寫</h3>
                 <div class="space-y-3">
                    <div class="bg-white p-3 rounded-md border"><p>1. They not only cleaned the beach but also planted trees there.</p>
                        <details class="mt-2"><summary class="text-sm font-semibold text-blue-600">答案</summary><div class="text-sm mt-1 pt-1 border-t text-purple-700">→ <code>Not only <strong>did they clean the beach but they also planted trees there</strong>.</code></div></details>
                    </div>
                    <div class="bg-white p-3 rounded-md border"><p>2. It is said that the castle was built in the 12th century.</p>
                        <details class="mt-2"><summary class="text-sm font-semibold text-blue-600">答案</summary><div class="text-sm mt-1 pt-1 border-t text-purple-700">→ <code>The castle <strong>is said to have been built in the 12th century</strong>.</code></div></details>
                    </div>
                </div>

                <h3 class="text-lg font-semibold text-gray-800 mt-6 mb-3">C. 翻譯 (中→英)</h3>
                 <div class="space-y-3">
                    <div class="bg-white p-3 rounded-md border"><p>1. 儘管那條路很窄，司機還是開得很快。</p>
                        <details class="mt-2"><summary class="text-sm font-semibold text-blue-600">答案</summary><div class="text-sm mt-1 pt-1 border-t text-purple-700"><code>Although the road was narrow, the driver drove very fast.</code><br>或<br><code>Narrow as the road was, the driver drove very fast.</code></div></details>
                    </div>
                     <div class="bg-white p-3 rounded-md border"><p>2. 這位科學家據說已經發現了一種新的治療方法。</p>
                        <details class="mt-2"><summary class="text-sm font-semibold text-blue-600">答案</summary><div class="text-sm mt-1 pt-1 border-t text-purple-700"><code>The scientist is said to have discovered a new treatment method.</code></div></details>
                    </div>
                </div>
            </section>
        </main>
        
        <footer class="text-center mt-16 pt-8 border-t border-gray-200">
            <p class="text-gray-500">加油！持續複習，你會越來越強！💪</p>
            <p class="text-gray-500">清大文理補習班</p>
            <p class="text-gray-500">Jeff</p>
        </footer>
    </div>


</div></div>
</body></html>

=== FILE: docs\materials\庭妤\english\2025-08-02_三學測英文_-_少子化議題探討.html ===
<!doctype html><html lang="zh-Hant"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>高三學測英文 - 少子化議題探討</title>
<style>body{font-family:system-ui,"Noto Sans TC",Arial,sans-serif;margin:0;background:#f6f7fb;}
.header{background:#111827;color:#fff;padding:10px 14px;}
.header a{color:#a7f3d0;text-decoration:none}
.container{max-width:900px;margin:18px auto;background:#fff;border-radius:12px;padding:18px 20px;box-shadow:0 10px 30px rgba(0,0,0,.06)}</style>
</head><body>
<div class="header">← <a href="../../../index.html?student=%E5%BA%AD%E5%A6%A4&date=2025-08-02">返回日曆</a></div>
<div class="container"><h1>高三學測英文 - 少子化議題探討</h1><meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>高三學測英文 - 少子化議題探討</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&amp;display=swap" rel="stylesheet">
    <style>
        /* 使用 Noto Sans TC 作為主要字體 */
        body {
            font-family: 'Noto Sans TC', sans-serif;
        }
        /* 移除預設的 details 箭頭，改用偽元素自訂，以利於樣式控制 */
        summary {
            list-style: none; /* for Firefox */
        }
        summary::-webkit-details-marker {
            display: none; /* for Chrome */
        }
        summary::before {
            content: '▶';
            margin-right: 8px;
            font-size: 0.8em;
            display: inline-block;
            transition: transform 0.2s ease-in-out;
        }
        details[open] summary::before {
            transform: rotate(90deg);
        }
    </style>



    <!-- 自動產生返回主頁的麵包屑 -->
  <div id="breadcrumb" class="max-w-4xl mx-auto mb-4"></div>
  <script>
    (function () {
      // 1) 先用 <meta name="lesson-date">；若沒有，再嘗試從檔名推 YYMMDD
      const metaDate = document.querySelector('meta[name="lesson-date"]')?.content?.trim();
      let dateStr = metaDate && !isNaN(Date.parse(metaDate)) ? metaDate : null;
      if (!dateStr) {
        const m = location.pathname.match(/(\d{2})(\d{2})(\d{2})\.html$/);
        if (m) dateStr = `20${m[1]}-${m[2]}-${m[3]}`;
      }
  </script>

  <div class="max-w-4xl mx-auto bg-white rounded-2xl shadow-lg p-6 sm:p-10">

    <div class="max-w-4xl mx-auto bg-white rounded-2xl shadow-lg p-6 sm:p-10">
        <header class="text-center mb-12">
            <h1 class="text-3xl sm:text-4xl font-bold text-blue-800 mb-2">高三學測英文 - 本週複習精華 ✍️</h1>
            <p class="text-lg text-gray-600">主題：The Issue of a Low Birth Rate (少子化議題)</p>
        </header>

        <main class="space-y-12">
            <!-- 1. 主題詞彙 -->
            <section id="vocabulary">
                <h2 class="text-2xl font-bold text-blue-700 border-b-2 border-blue-200 pb-2 mb-4">1. 主題核心詞彙 (Key Vocabulary)</h2>
                <p class="text-gray-700 mb-4">掌握這些詞彙，能讓你在討論相關議題時更精準、更有深度。</p>
                <div class="overflow-x-auto rounded-lg shadow-md">
                    <table class="w-full text-sm text-left text-gray-600">
                        <thead class="text-xs text-blue-800 uppercase bg-blue-100">
                            <tr>
                                <th scope="col" class="px-6 py-3">英文詞彙 / 片語</th>
                                <th scope="col" class="px-6 py-3">中文意思</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="bg-white border-b hover:bg-gray-50"><td class="px-6 py-4 font-medium"><code>low birth rate</code> / <code>declining birth rate</code></td><td class="px-6 py-4">少子化 / 出生率下降</td></tr>
                            <tr class="bg-white border-b hover:bg-gray-50"><td class="px-6 py-4 font-medium"><code>an aging population</code></td><td class="px-6 py-4">人口老化</td></tr>
                            <tr class="bg-white border-b hover:bg-gray-50"><td class="px-6 py-4 font-medium"><code>a shrinking workforce</code></td><td class="px-6 py-4">勞動力萎縮</td></tr>
                            <tr class="bg-white border-b hover:bg-gray-50"><td class="px-6 py-4 font-medium"><code>financial burden</code></td><td class="px-6 py-4">經濟負擔</td></tr>
                            <tr class="bg-white border-b hover:bg-gray-50"><td class="px-6 py-4 font-medium"><code>childcare subsidies</code></td><td class="px-6 py-4">育兒津貼</td></tr>
                            <tr class="bg-white border-b hover:bg-gray-50"><td class="px-6 py-4 font-medium"><code>family-friendly policies</code></td><td class="px-6 py-4">家庭友善政策</td></tr>
                            <tr class="bg-white border-b hover:bg-gray-50"><td class="px-6 py-4 font-medium"><code>promote gender equality</code></td><td class="px-6 py-4">推廣性別平權</td></tr>
                            <tr class="bg-white hover:bg-gray-50"><td class="px-6 py-4 font-medium"><code>flexible working hours</code></td><td class="px-6 py-4">彈性工時</td></tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- 2. 論點發想與架構 -->
            <section id="brainstorming">
                <h2 class="text-2xl font-bold text-purple-700 border-b-2 border-purple-200 pb-2 mb-4">2. 論點發想與架構 (Brainstorming &amp; Structuring)</h2>
                <p class="text-gray-700 mb-4">面對社會議題，從不同層面切入，能讓你的論述更完整、更有說服力。</p>
                <div class="space-y-4">
                    <div class="bg-purple-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-purple-800">A. 從不同角度切入 (Perspectives)</h3>
                        <ul class="mt-2 list-disc list-inside text-sm text-gray-700 space-y-1">
                            <li><strong>個人層面 (Individual):</strong> 經濟壓力、職涯規劃、個人價值觀改變 (重視自我實現)。</li>
                            <li><strong>社會層面 (Societal):</strong> 晚婚晚育成為常態、高房價、教育競爭激烈。</li>
                            <li><strong>政府層面 (Governmental):</strong> 政策支持不足、公共托育設施缺乏。</li>
                        </ul>
                    </div>
                    <div class="bg-purple-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-purple-800">B. 建議寫作架構與範例 (Essay Structure &amp; Examples)</h3>
                         <ul class="mt-2 list-disc list-inside text-sm text-gray-700 space-y-2">
                            <li><strong>第一段 (Introduction):</strong> 點出現況，簡述主旨。<br><em><span class="text-purple-600">範例:</span> "Taiwan is facing a severe challenge of a declining birth rate, a trend that poses long-term threats to its economy and social structure. This essay will explore the primary causes of this issue and its profound impacts."</em></li>
                            <li><strong>第二段 (Causes &amp; Impacts):</strong> 分析原因，帶出影響。<br><em><span class="text-purple-600">範例:</span> "The primary reasons for this phenomenon include heavy financial burdens and a shift in personal values. As a result, society must confront problems like a shrinking workforce and an aging population."</em></li>
                            <li><strong>第三段 (Solutions &amp; Conclusion):</strong> 提出解方，做出結論。<br><em><span class="text-purple-600">範例:</span> "To tackle this issue, the government should implement more effective family-friendly policies. In conclusion, only through concerted efforts from both the public and private sectors can we hope to reverse this worrying trend."</em></li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- NEW: 3. 從句型到段落 -->
            <section id="paragraph-building">
                <h2 class="text-2xl font-bold text-teal-700 border-b-2 border-teal-200 pb-2 mb-4">3. 從句型到段落：寫作技巧深化 (From Sentences to Paragraphs)</h2>
                <p class="text-gray-700 mb-4">學會組織句子，才能建構出有條理的段落。</p>
                <div class="space-y-4">
                    <div class="bg-teal-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-teal-800">A. 建立明確的主題句 (Topic Sentence)</h3>
                        <p class="mt-2 text-sm text-gray-700">段落的第一句話就要點明主旨，讓讀者知道這段的重點。</p>
                        <p class="mt-1 text-sm"><strong>範例：</strong><code>One of the primary drivers behind Taiwan's low birth rate is the immense financial pressure faced by young adults.</code></p>
                    </div>
                    <div class="bg-teal-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-teal-800">B. 提出支持細節 (Supporting Details)</h3>
                        <p class="mt-2 text-sm text-gray-700">用具體例子、事實或理由來支撐你的主題句。</p>
                        <p class="mt-1 text-sm"><strong>承上句延伸：</strong><code>For instance, the soaring housing prices and the high cost of education often force couples to delay or even give up on the idea of having children.</code></p>
                    </div>
                     <div class="bg-teal-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-teal-800">C. 善用轉承詞 (Transitions)</h3>
                        <p class="mt-2 text-sm text-gray-700">轉承詞能讓你的句子和想法流暢地連接在一起。</p>
                        <p class="mt-1 text-sm"><strong>舉例：</strong><br>
                        - 補充說明: <code>Furthermore</code>, <code>In addition</code>, <code>Moreover</code><br>
                        - 表示結果: <code>As a result</code>, <code>Therefore</code>, <code>Consequently</code><br>
                        - 提出解方: <code>To tackle this issue</code>, <code>To address this problem</code></p>
                    </div>
                </div>
            </section>

            <!-- 4. 高分句型策略 -->
            <section id="patterns">
                <h2 class="text-2xl font-bold text-red-700 border-b-2 border-red-200 pb-2 mb-4">4. 高分句型策略 (High-Scoring Sentence Strategies)</h2>
                <p class="text-gray-700 mb-4">用多樣的句型，讓你的文章從眾多考卷中脫穎而出。</p>
                <div class="space-y-4">
                    <div class="bg-red-50 p-4 rounded-lg shadow-inner">
                        <h3 class="font-semibold text-red-800">A. 使用分詞構句，讓句子更簡潔</h3>
                        <p class="mt-2 text-sm"><strong>原句：</strong>Young people face high pressure, so they hesitate to have children.<br>
                        <strong>→ 進階：</strong><code>Facing high pressure, young people hesitate to have children.</code></p>
                    </div>
                    <div class="bg-red-50 p-4 rounded-lg shadow-inner">
                        <h3 class="font-semibold text-red-800">B. 提出具體建議的假設語氣</h3>
                        <p class="mt-2 text-sm"><strong>句型：</strong>If the government were to + Vr, it would + Vr...<br>
                        <strong>→ 應用：</strong><code>If the government were to provide more affordable housing, it would significantly ease the financial burden on young couples.</code></p>
                    </div>
                    <div class="bg-red-50 p-4 rounded-lg shadow-inner">
                        <h3 class="font-semibold text-red-800">C. 用 "Not only... but also..." 倒裝句強調論點</h3>
                        <p class="mt-2 text-sm"><strong>句型：</strong>Not only does + S + Vr, but S also + V...<br>
                        <strong>→ 應用：</strong><code>Not only does the low birth rate lead to a shrinking workforce, but it also increases the burden on the social welfare system.</code></p>
                    </div>
                </div>
            </section>
            
            <!-- 5. 課堂小試 -->
            <section id="quiz">
                <h2 class="text-2xl font-bold text-green-700 border-b-2 border-green-200 pb-2 mb-6">5. 課堂小試 ✏️ (Quick Practice)</h2>
                <div class="space-y-4">
                    <div class="bg-white p-4 rounded-lg border border-gray-200">
                        <p>1. <strong>改寫句子:</strong> The government implemented family-friendly policies. It aimed to boost the birth rate. (請用分詞構句合併)</p>
                        <details class="mt-2">
                            <summary class="cursor-pointer font-semibold text-blue-600 hover:text-blue-800">點此看答案</summary>
                            <div class="mt-2 pt-2 border-t border-gray-200 text-green-700 font-medium"><code>Aiming to boost the birth rate, the government implemented family-friendly policies.</code></div>
                        </details>
                    </div>
                    <div class="bg-white p-4 rounded-lg border border-gray-200">
                        <p>2. <strong>完成句子:</strong> If the company ________ (offer) flexible working hours, more female employees ________ (be) willing to stay in the workforce after childbirth.</p>
                         <details class="mt-2">
                            <summary class="cursor-pointer font-semibold text-blue-600 hover:text-blue-800">點此看答案</summary>
                            <div class="mt-2 pt-2 border-t border-gray-200 text-green-700 font-medium"><code>were to offer</code>, <code>would be</code></div>
                        </details>
                    </div>
                </div>
            </section>
        </main>
        
        <footer class="text-center mt-16 pt-8 border-t border-gray-200">
            <p class="text-gray-500">加油！持續複習，你會越來越強！💪</p>
            <p class="text-gray-500 mt-2">清大文理補習班</p>
            <p class="text-gray-500">Jeff</p>
        </footer>
    </div>


</div></div>
</body></html>

=== FILE: docs\materials\庭妤\english\2025-08-09_補充教材.html ===
<!doctype html><html lang="zh-Hant"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>中翻英、翻譯批改回饋</title>
<style>body{font-family:system-ui,"Noto Sans TC",Arial,sans-serif;margin:0;background:#f6f7fb;}
.header{background:#111827;color:#fff;padding:10px 14px;}
.header a{color:#a7f3d0;text-decoration:none}
.container{max-width:900px;margin:18px auto;background:#fff;border-radius:12px;padding:18px 20px;box-shadow:0 10px 30px rgba(0,0,0,.06)}</style>
</head><body>
<div class="header">← <a href="../../../index.html?student=%E5%BA%AD%E5%A6%A4&date=2025-08-09">返回日曆</a></div>
<div class="container"><h1>中翻英、翻譯批改回饋</h1><meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>少子化主題 寫作與翻譯批改回饋</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&amp;family=Noto+Sans+TC:wght@400;500;700&amp;display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
            scroll-behavior: smooth;
        }
        .tab-active {
            border-bottom-color: #3b82f6;
            color: #3b82f6;
            font-weight: 700;
        }
        .tab-inactive {
            border-bottom-color: transparent;
            color: #6b7280;
        }
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }
    </style>



    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <h1 class="text-xl sm:text-2xl font-bold text-blue-600">批改回饋：少子化主題</h1>
                <nav class="hidden md:flex space-x-8">
                    <a href="#writing" class="text-gray-600 hover:text-blue-600 transition-colors">寫作批改</a>
                    <a href="#translation" class="text-gray-600 hover:text-blue-600 transition-colors">翻譯練習</a>
                </nav>
            </div>
        </div>
    </header>

    <main class="container mx-auto p-4 sm:p-6 lg:p-8">

        <!-- Introduction -->
        <div class="text-center mb-12">
            <h2 class="text-3xl font-bold text-gray-900 mb-2">學習重點總整理</h2>
            <p class="text-lg text-gray-600">這次的練習做得很好！這裡為你整理了可以讓你更進步的關鍵。</p>
        </div>

        <!-- Writing Correction Section -->
        <section id="writing" class="mb-16">
            <h3 class="text-2xl font-bold mb-6 pb-2 border-b-2 border-blue-500 text-gray-800">Part 1: 作文批改 (Writing Correction)</h3>
            
            <div class="bg-white p-6 rounded-xl shadow-md mb-8">
                <h4 class="font-bold text-xl text-gray-900 mb-3">⭐ 整體評語 (Overall Feedback)</h4>
                <p class="text-gray-700">你的文章架構完整，論點清晰，能有效闡述少子化的原因與影響，並提出具體建議，顯示出優秀的思考與組織能力。只要修正一些文法與用字的細節，文章就會更上一層樓！</p>
            </div>

            <h4 class="font-bold text-xl text-gray-900 mb-6">🔍 核心學習重點</h4>
            <div class="card-grid">
                <!-- Card 1: Spelling -->
                <div class="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow">
                    <h5 class="font-bold text-lg mb-3 text-red-600">⚠️ 拼字與精準用字</h5>
                    <ul class="space-y-2 text-gray-700">
                        <li>occuring ➔ <span class="font-bold text-green-600">occurring</span> (r要重複)</li>
                        <li>planty ➔ <span class="font-bold text-green-600">plenty</span></li>
                        <li>comtemporary ➔ <span class="font-bold text-green-600">contemporary</span></li>
                        <li>rasing ➔ <span class="font-bold text-green-600">raising</span></li>
                        <li>shirinking ➔ <span class="font-bold text-green-600">shrinking</span></li>
                        <li>economy pressure ➔ <span class="font-bold text-green-600">economic</span> pressure (形容詞修飾名詞)</li>
                    </ul>
                </div>

                <!-- Card 2: Grammar -->
                <div class="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow">
                    <h5 class="font-bold text-lg mb-3 text-blue-600">🔧 文法細節</h5>
                    <ul class="space-y-2 text-gray-700">
                        <li><span class="font-semibold">時態：</span> I heard ➔ I <span class="font-bold text-green-600">have heard</span> (從過去到現在的經驗)</li>
                        <li><span class="font-semibold">動詞一致性：</span> factors that <span class="font-bold text-green-600">discourage</span> (主詞是複數 factors)</li>
                        <li><span class="font-semibold">助動詞：</span> might has ➔ might <span class="font-bold text-green-600">have</span> (助動詞後接原形動詞)</li>
                        <li><span class="font-semibold">假設語氣：</span> If... were provide ➔ If... <span class="font-bold text-green-600">were to provide</span></li>
                    </ul>
                </div>

                <!-- Card 3: Structure -->
                <div class="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow">
                    <h5 class="font-bold text-lg mb-3 text-purple-600">✨ 句構與流暢度</h5>
                     <ul class="space-y-2 text-gray-700">
                        <li><span class="font-semibold">平行結構：</span> tend to late marriage or choosing ➔ tend to <span class="font-bold text-green-600">marry late</span> or <span class="font-bold text-green-600">choose</span>...</li>
                        <li><span class="font-semibold">固定句型：</span> There is no surprise that... ➔ <span class="font-bold text-green-600">It is no surprise that</span>...</li>
                        <li><span class="font-semibold">邏輯表達：</span> high population density ➔ a more <span class="font-bold text-green-600">balanced population structure</span> (更精確的目標)</li>
                    </ul>
                </div>
            </div>

            <div class="mt-10 bg-white p-6 rounded-xl shadow-md">
                <h4 class="font-bold text-xl text-gray-900 mb-4">✅ 修正後完整版本 (Revised Version)</h4>
                <div class="p-4 bg-gray-100 rounded-lg text-gray-700 space-y-4">
                    <p>As I get older, "low birth rate" is a term I have heard more and more. The birth rate in Taiwan has been declining for nine years in a row, indicating that Taiwanese are increasingly reluctant to have children. Why is this occurring? There are plenty of reasons that explain the decline in the birth rate. First of all, the social attitude is changing in contemporary society. Many people are likely to remain single rather than start a family. Therefore, some people tend to marry late or choose not to marry in their whole lives. On the other hand, the financial burden is among the factors that discourage people from wanting to have children. Frankly speaking, raising children is such a difficult job. So, another reason is that some people choose to have a "fur baby" instead of children. A married couple with a dog might have a more relaxing life. Overall, it is no surprise that Taiwan has a low birth rate.</p>
                    <p>If the low birth rate continues to deteriorate, the worst-case scenario is that a shortage of labor and a shrinking workforce may occur. Not only does the low birth rate lead to these consequences, but it also increases the burden on the social welfare system. To address this issue, the government should implement policies to support families. If the government were to provide more affordable housing and yearly childcare subsidies, it would significantly ease the economic pressure on couples. Together, we can create a future with a more balanced population structure.</p>
                </div>
            </div>
        </section>

        <!-- Translation Practice Section -->
        <section id="translation" class="mb-16">
            <h3 class="text-2xl font-bold mb-6 pb-2 border-b-2 border-blue-500 text-gray-800">Part 2: 翻譯練習 (Translation Practice)</h3>
            
            <div class="bg-white p-6 rounded-xl shadow-md mb-8">
                <h4 class="font-bold text-xl text-gray-900 mb-3">⭐ 整體評語 (Overall Feedback)</h4>
                <p class="text-gray-700">你的翻譯理解能力很好，能掌握句子的核心意思。接下來的目標是學習更道地、更精確的英文句型和單字搭配，讓翻譯更上一層樓！</p>
            </div>

            <div class="space-y-6">
                <!-- Sentence 1 -->
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <p class="mb-2 text-gray-600">1. 台灣的少子化現象日益嚴重，對社會經濟帶來長遠的挑戰。</p>
                    <p class="mb-2 text-red-500"><span class="font-semibold">原句：</span> ...brings long-term challenge...</p>
                    <p class="mb-3 text-green-600"><span class="font-semibold">✅ 修正：</span> ...<span class="font-bold">bringing</span> long-term <span class="font-bold">challenges</span>...</p>
                    <div class="border-t pt-3 mt-3">
                        <h5 class="font-semibold text-blue-700">🔧 修正建議：</h5>
                        <p class="text-gray-700">`brings` 改成 `bringing` 形成分詞構句，避免句子有兩個動詞。`challenge` 在此為可數名詞，用複數更貼切。</p>
                    </div>
                </div>

                <!-- Sentence 2 -->
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <p class="mb-2 text-gray-600">2. 晚婚、養育成本高以及工作與家庭難以平衡，都是導致出生率下降的原因。</p>
                    <p class="mb-2 text-red-500"><span class="font-semibold">原句：</span> ...high cost of rasing a child, and the difficulty of stritaga balance... are all factor...</p>
                    <p class="mb-3 text-green-600"><span class="font-semibold">✅ 修正：</span> ...the high cost of <span class="font-bold">raising</span> a child, and the difficulty of <span class="font-bold">striking a balance</span>... are all <span class="font-bold">factors</span>...</p>
                    <div class="border-t pt-3 mt-3">
                        <h5 class="font-semibold text-blue-700">🔧 修正建議：</h5>
                        <p class="text-gray-700">`raising` 是正確拼法。「取得平衡」的固定用法是 `striking a balance`。主詞是三件事，所以 `factor` 要用複數 `factors`。</p>
                    </div>
                </div>

                <!-- Sentence 3 -->
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <p class="mb-2 text-gray-600">3. 政府應提供更多育兒津貼與友善的職場環境，來鼓勵年輕人生育。</p>
                    <p class="mb-2 text-red-500"><span class="font-semibold">原句：</span> ...supply more childcare subsidies... to encorage young people to giving birth.</p>
                    <p class="mb-3 text-green-600"><span class="font-semibold">✅ 修正：</span> ...<span class="font-bold">provide</span> more childcare subsidies... to <span class="font-bold">encourage</span> young people to <span class="font-bold">have children</span>.</p>
                    <div class="border-t pt-3 mt-3">
                        <h5 class="font-semibold text-blue-700">🔧 修正建議：</h5>
                        <p class="text-gray-700">動詞 `provide` 比 `supply` 更常用於政策。「鼓勵」的句型是 `encourage sb to do sth`，後面接原形動詞。「生育」用 `have children` 更口語、自然。</p>
                    </div>
                </div>

                <!-- Sentence 4 -->
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <p class="mb-2 text-gray-600">4. 許多國家透過推廣性別平權與彈性工時，成功提升了生育意願。</p>
                    <p class="mb-2 text-red-500"><span class="font-semibold">原句：</span> ...have accelerated the willing to have children successfully through promoting...</p>
                    <p class="mb-3 text-green-600"><span class="font-semibold">✅ 修正：</span> ...have <span class="font-bold">successfully increased</span> the <span class="font-bold">willingness</span> to have children <span class="font-bold">by</span> promoting...</p>
                    <div class="border-t pt-3 mt-3">
                        <h5 class="font-semibold text-blue-700">🔧 修正建議：</h5>
                        <p class="text-gray-700">「意願」是名詞 `willingness`。動詞用 `increased` (提升) 更貼切。說明方法時，`by promoting` (藉由推廣) 是非常道地的用法。</p>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-gray-100 mt-16 py-6">
        <div class="container mx-auto text-center text-gray-600">
            <p>© 2025 清大文理補習班 Jeff. All rights reserved.</p>
            <p class="text-sm text-gray-500 mt-1">繼續努力，你的進步有目共睹！</p>
        </div>
    </footer></div>
</body></html>

=== FILE: docs\materials\庭妤\english\2025-08-09_高三學測英文_-_主題探討：媒體素養.html ===
<!doctype html><html lang="zh-Hant"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>高三學測英文 - 主題探討：媒體素養</title>
<style>body{font-family:system-ui,"Noto Sans TC",Arial,sans-serif;margin:0;background:#f6f7fb;}
.header{background:#111827;color:#fff;padding:10px 14px;}
.header a{color:#a7f3d0;text-decoration:none}
.container{max-width:900px;margin:18px auto;background:#fff;border-radius:12px;padding:18px 20px;box-shadow:0 10px 30px rgba(0,0,0,.06)}</style>
</head><body>
<div class="header">← <a href="../../../index.html?student=%E5%BA%AD%E5%A6%A4&date=2025-08-09">返回日曆</a></div>
<div class="container"><h1>高三學測英文 - 主題探討：媒體素養</h1><meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 讓麵包屑能正確解析日期 -->
    <meta name="lesson-date" content="2025-08-10">
    <title>高三學測英文 - 主題探討：媒體素養</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&amp;display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
        }
        summary {
            list-style: none;
        }
        summary::-webkit-details-marker {
            display: none;
        }
        summary::before {
            content: '▶';
            margin-right: 8px;
            font-size: 0.8em;
            display: inline-block;
            transition: transform 0.2s ease-in-out;
        }
        details[open] summary::before {
            transform: rotate(90deg);
        }
    </style>



    <!-- 自動產生返回主頁的麵包屑 -->
    <div id="breadcrumb" class="max-w-4xl mx-auto mb-4"></div>
    <script>
    (function () {
      // 1) 先用 <meta name="lesson-date">；若沒有，再嘗試從檔名推 YYMMDD
      const metaDate = document.querySelector('meta[name="lesson-date"]')?.content?.trim();
      let dateStr = metaDate && !isNaN(Date.parse(metaDate)) ? metaDate : null;
      if (!dateStr) {
        const m = location.pathname.match(/(\d{2})(\d{2})(\d{2})\.html$/);
        if (m) dateStr = `20${m[1]}-${m[2]}-${m[3]}`;
      }
      
    </script>

    <div class="max-w-4xl mx-auto bg-white rounded-2xl shadow-lg p-6 sm:p-10">
        <header class="text-center mb-12">
            <h1 class="text-3xl sm:text-4xl font-bold text-blue-800 mb-2">高三學測英文 - 主題探討 🌐</h1>
            <p class="text-lg text-gray-600">主題：媒體素養 (Media Literacy)</p>
        </header>

        <main class="space-y-12">

            <!-- 1. 重點單字 -->
            <section id="vocabulary">
                <h2 class="text-2xl font-bold text-blue-700 border-b-2 border-blue-200 pb-2 mb-6">1. 重點單字 (Key Vocabulary)</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="font-bold text-blue-900">literacy (n.)</h3>
                        <p class="text-gray-700">素養；讀寫能力</p>
                        <p class="text-sm text-gray-600 mt-1">e.g., Financial <strong>literacy</strong> is essential for managing personal finances.</p>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="font-bold text-blue-900">critically (adv.)</h3>
                        <p class="text-gray-700">批判性地</p>
                        <p class="text-sm text-gray-600 mt-1">e.g., We should think <strong>critically</strong> about the news we read online.</p>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="font-bold text-blue-900">evaluate (v.)</h3>
                        <p class="text-gray-700">評估；評價</p>
                        <p class="text-sm text-gray-600 mt-1">e.g., It's important to <strong>evaluate</strong> the credibility of a website before trusting its content.</p>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="font-bold text-blue-900">verify (v.)</h3>
                        <p class="text-gray-700">查證；核實</p>
                        <p class="text-sm text-gray-600 mt-1">e.g., Always try to <strong>verify</strong> facts from multiple sources.</p>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="font-bold text-blue-900">mislead (v.)</h3>
                        <p class="text-gray-700">誤導 (三態: mislead, misled, misled)</p>
                        <p class="text-sm text-gray-600 mt-1">e.g., The advertisement was designed to <strong>mislead</strong> customers.</p>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="font-bold text-blue-900">cultivate (v.)</h3>
                        <p class="text-gray-700">培養</p>
                        <p class="text-sm text-gray-600 mt-1">e.g., Parents play a key role in <strong>cultivating</strong> good habits in their children.</p>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="font-bold text-blue-900">prevalence (n.)</h3>
                        <p class="text-gray-700">普及；盛行</p>
                        <p class="text-sm text-gray-600 mt-1">e.g., The <strong>prevalence</strong> of smartphones has changed how we communicate.</p>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="font-bold text-blue-900">disseminator (n.)</h3>
                        <p class="text-gray-700">傳播者</p>
                        <p class="text-sm text-gray-600 mt-1">e.g., With social media, anyone can be a content <strong>disseminator</strong>.</p>
                    </div>
                </div>
            </section>

            <!-- 2. 核心句型 -->
            <section id="patterns">
                <h2 class="text-2xl font-bold text-blue-700 border-b-2 border-blue-200 pb-2 mb-6">2. 核心句型 (Core Sentence Patterns)</h2>
                <div class="space-y-4">
                    <div class="bg-gray-50 p-4 rounded-lg shadow-inner">
                        <p class="font-semibold">句型 1: <code class="text-pink-600">The term A refers to B, which/where...</code> (A 一詞指的是 B，而 B...)</p>
                        <p class="mt-2 text-gray-700">說明：用來提供一個正式的定義，並可接續一個關係子句來補充說明。</p>
                        <p class="mt-1 text-gray-700">例句：The term "media literacy" <strong>refers to</strong> a set of skills, <strong>which</strong> empower individuals to critically analyze media messages.</p>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg shadow-inner">
                        <p class="font-semibold">句型 2: <code class="text-pink-600">In an era flooded with..., it is important/vital/crucial to + Vr...</code></p>
                        <p class="mt-2 text-gray-700">說明：強調在某個特定時代背景下，做某件事的重要性。</p>
                        <p class="mt-1 text-gray-700">例句：<strong>In an era flooded with</strong> fake news, <strong>it is crucial to verify</strong> information sources.</p>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg shadow-inner">
                        <p class="font-semibold">句型 3: <code class="text-pink-600">Cultivating... can help sb. (to) avoid being + p.p.</code> (培養...能幫助某人避免被...)</p>
                        <p class="mt-2 text-gray-700">說明：表達採取某行動可以幫助避免某種被動的負面結果。</p>
                        <p class="mt-1 text-gray-700">例句：<strong>Cultivating</strong> good media literacy <strong>can help us avoid being misled</strong> by false information.</p>
                    </div>
                     <div class="bg-gray-50 p-4 rounded-lg shadow-inner">
                        <p class="font-semibold">句型 4: <code class="text-pink-600">...come(s) with + N.</code> (...伴隨著...而來)</p>
                        <p class="mt-2 text-gray-700">說明：表示某事物出現時，會連帶產生另一種情況或責任。</p>
                        <p class="mt-1 text-gray-700">例句：Becoming a content creator <strong>comes with</strong> great responsibility.</p>
                    </div>
                </div>
            </section>

            <!-- 3. 寫作攻略 -->
            <section id="writing-strategy">
                <h2 class="text-2xl font-bold text-purple-700 border-b-2 border-purple-200 pb-2 mb-6">3. 寫作攻略 (Writing Strategy)</h2>
                
                <div class="bg-purple-50 border-l-4 border-purple-400 p-6 rounded-r-lg space-y-6">
                    <div>
                        <h3 class="text-lg font-bold text-purple-900">第一步：辨別文體</h3>
                        <p class="mt-1 text-gray-800">看到「探討重要性」、「分析影響」這類題目，就要知道這是一篇<strong class="font-semibold">「論說文」(Argumentative/Expository Essay)</strong>。你的目標是提出清晰的論點，並用理由和例子來支持它。</p>
                    </div>

                    <div>
                        <h3 class="text-lg font-bold text-purple-900">第二步：規劃文章架構 (Structure)</h3>
                        <p class="mt-1 text-gray-800 mb-4">一篇好的論說文，就像蓋房子，需要穩固的架構。你可以遵循「總-分-總」的原則：</p>
                        
                        <div class="space-y-3">
                            <div class="bg-white p-4 rounded-lg border border-purple-200">
                                <p><strong>A. 主旨段 (Introduction): 點出核心論點</strong></p>
                                <ul class="list-disc list-inside mt-2 text-gray-700 text-sm space-y-1">
                                    <li><strong>開頭 (Hook):</strong> 用一個問題或一句話吸引讀者注意。 (e.g., "In a world saturated with information, how can we tell truth from fiction?")</li>
                                    <li><strong>定義與背景:</strong> 簡單解釋「媒體素養」是什麼，以及為什麼在「數位時代」很重要。</li>
                                    <li><strong>主旨句 (Thesis Statement):</strong> 一句話清楚表明你的核心論點。 (e.g., "Therefore, developing media literacy is a critical skill for navigating the modern world and fostering a responsible digital citizenship.")</li>
                                </ul>
                            </div>

                            <div class="bg-white p-4 rounded-lg border border-purple-200">
                                <p><strong>B. 支撐段 (Body Paragraph): 提出理由與證據</strong></p>
                                <ul class="list-disc list-inside mt-2 text-gray-700 text-sm space-y-1">
                                    <li><strong>主題句 (Topic Sentence):</strong> 每段開頭用一句話點出該段的重點。例如，先談「缺乏媒體素養的壞處」。</li>
                                    <li><strong>解釋與舉例 (Explanation &amp; Example):</strong> 闡述主題句，並舉出具體例子，如假新聞 (fake news)、網路霸凌 (cyberbullying) 等。</li>
                                    <li><strong>發展論點:</strong> 接著可以寫下一段，主題句是「如何培養媒體素養」，並提出具體方法，如查證來源 (verifying sources)、批判性思考 (thinking critically) 等。</li>
                                </ul>
                            </div>

                            <div class="bg-white p-4 rounded-lg border border-purple-200">
                                <p><strong>C. 結論段 (Conclusion): 總結並昇華</strong></p>
                                <ul class="list-disc list-inside mt-2 text-gray-700 text-sm space-y-1">
                                    <li><strong>重申主旨:</strong> 用不同的話再次強調你的核心論點。</li>
                                    <li><strong>總結要點:</strong> 快速總結你在支撐段提出的主要理由。</li>
                                    <li><strong>提出展望 (Concluding thought):</strong> 給出一個有力的結尾，例如對未來的期許或給讀者的建議。 (e.g., "Ultimately, being media literate is not just about personal protection; it is about contributing to a more informed and democratic society.")</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </main>
        
        <footer class="text-center mt-16 pt-8 border-t border-gray-200">
            <p class="text-gray-500">每天進步一點點，累積起來就是巨大的飛躍！🚀</p>
            <p class="text-sm text-gray-400 mt-2">清大文理補習班・Jeff</p>
        </footer>
    </div>

<!-- Code injected by live-server -->
<script>
	// <![CDATA[  <-- For SVG support
	if ('WebSocket' in window) {
		(function () {
			function refreshCSS() {
				var sheets = [].slice.call(document.getElementsByTagName("link"));
				var head = document.getElementsByTagName("head")[0];
				for (var i = 0; i < sheets.length; ++i) {
					var elem = sheets[i];
					var parent = elem.parentElement || head;
					parent.removeChild(elem);
					var rel = elem.rel;
					if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
						var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
						elem.href = url + (url.indexOf('?') >= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf());
					}
					parent.appendChild(elem);
				}
			}
			var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://';
			var address = protocol + window.location.host + window.location.pathname + '/ws';
			var socket = new WebSocket(address);
			socket.onmessage = function (msg) {
				if (msg.data == 'reload') window.location.reload();
				else if (msg.data == 'refreshcss') refreshCSS();
			};
			if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
				console.log('Live reload enabled.');
				sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
			}
		})();
	}
	else {
		console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.');
	}
	// ]]>
</script></div>
</body></html>

=== FILE: docs\materials\庭妤\english\2025-08-16_主題探討-心理健康與壓力調適.html ===
<!doctype html><html lang="zh-Hant"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>主題探討-心理健康與壓力調適</title>
<style>body{font-family:system-ui,"Noto Sans TC",Arial,sans-serif;margin:0;background:#f6f7fb;}
.header{background:#111827;color:#fff;padding:10px 14px;}
.header a{color:#a7f3d0;text-decoration:none}
.container{max-width:900px;margin:18px auto;background:#fff;border-radius:12px;padding:18px 20px;box-shadow:0 10px 30px rgba(0,0,0,.06)}</style>
</head><body>
<div class="header">← <a href="../../../index.html?student=%E5%BA%AD%E5%A6%A4&date=2025-08-16">返回日曆</a></div>
<div class="container"><h1>主題探討-心理健康與壓力調適</h1><meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>高三學測英文 - 主題探討:心理健康與壓力調適</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&amp;display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
        }
        summary {
            list-style: none;
        }
        summary::-webkit-details-marker {
            display: none;
        }
        summary::before {
            content: '▶';
            margin-right: 8px;
            font-size: 0.8em;
            display: inline-block;
            transition: transform 0.2s ease-in-out;
        }
        details[open] summary::before {
            transform: rotate(90deg);
        }
    </style>



    <div class="max-w-4xl mx-auto bg-white rounded-2xl shadow-lg p-6 sm:p-10">
        <header class="text-center mb-12">
            <h1 class="text-3xl sm:text-4xl font-bold text-blue-800 mb-2">高三學測英文 - 主題探討 🧠</h1>
            <p class="text-lg text-gray-600">主題：心理健康與壓力調適 (Mental Health &amp; Stress Management)</p>
        </header>

        <main class="space-y-12">

            <!-- 1. 重點單字 -->
            <section id="vocabulary">
                <h2 class="text-2xl font-bold text-blue-700 border-b-2 border-blue-200 pb-2 mb-6">1. 重點單字 (Key Vocabulary)</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="font-bold text-blue-900">mental health (n.)</h3>
                        <p class="text-gray-700">心理健康</p>
                        <p class="text-sm text-gray-600 mt-1">e.g., Taking breaks is important for your <strong>mental health</strong>.</p>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="font-bold text-blue-900">pressure (n.)</h3>
                        <p class="text-gray-700">壓力</p>
                        <p class="text-sm text-gray-600 mt-1">e.g., Students often face immense <strong>pressure</strong> from exams.</p>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="font-bold text-blue-900">anxiety (n.)</h3>
                        <p class="text-gray-700">焦慮</p>
                        <p class="text-sm text-gray-600 mt-1">e.g., A lack of sleep can increase feelings of <strong>anxiety</strong>.</p>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="font-bold text-blue-900">stress (n.) / (v.)</h3>
                        <p class="text-gray-700">壓力；強調</p>
                        <p class="text-sm text-gray-600 mt-1">e.g., Exercise is a good way to relieve <strong>stress</strong>.</p>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="font-bold text-blue-900">relax (v.)</h3>
                        <p class="text-gray-700">放鬆</p>
                        <p class="text-sm text-gray-600 mt-1">e.g., It's important to <strong>relax</strong> and unwind after a long day of studying.</p>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="font-bold text-blue-900">properly (adv.)</h3>
                        <p class="text-gray-700">適當地；正確地</p>
                        <p class="text-sm text-gray-600 mt-1">e.g., To stay healthy, you need to eat and sleep <strong>properly</strong>.</p>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="font-bold text-blue-900">psychological (adj.)</h3>
                        <p class="text-gray-700">心理的</p>
                        <p class="text-sm text-gray-600 mt-1">e.g., Talking about your feelings can relieve <strong>psychological</strong> stress.</p>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="font-bold text-blue-900">physical (adj.)</h3>
                        <p class="text-gray-700">身體的</p>
                        <p class="text-sm text-gray-600 mt-1">e.g., Regular <strong>physical</strong> activity is beneficial for both body and mind.</p>
                    </div>
                </div>
            </section>

            <!-- 2. 核心句型 -->
            <section id="patterns">
                <h2 class="text-2xl font-bold text-blue-700 border-b-2 border-blue-200 pb-2 mb-6">2. 核心句型 (Core Sentence Patterns)</h2>
                <div class="space-y-4">
                    <div class="bg-gray-50 p-4 rounded-lg shadow-inner">
                        <p class="font-semibold">句型 1: <code class="text-pink-600">A is just as important as B.</code> (A 和 B 一樣重要)</p>
                        <p class="mt-2 text-gray-700">說明：用於強調兩者同等重要，是寫作中常用的比較級句型。</p>
                        <p class="mt-1 text-gray-700">例句：<strong>Mental health is just as important as physical health.</strong></p>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg shadow-inner">
                        <p class="font-semibold">句型 2: <code class="text-pink-600">A lack of + N ... may/can lead to/increase + N.</code> (缺乏 A 可能會導致/增加 B)</p>
                        <p class="mt-2 text-gray-700">說明：用來描述某種缺失所帶來的負面因果關係。</p>
                        <p class="mt-1 text-gray-700">例句：<strong>A lack of sleep and exercise may increase anxiety and stress.</strong></p>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg shadow-inner">
                        <p class="font-semibold">句型 3: <code class="text-pink-600">V-ing ... can help (to) + Vr...</code> (做...有助於...)</p>
                        <p class="mt-2 text-gray-700">說明：以動名詞當主詞，強調某個「動作」能帶來的正面效果。</p>
                        <p class="mt-1 text-gray-700">例句：<strong>Sharing feelings with friends or family can help reduce psychological stress.</strong></p>
                    </div>
                     <div class="bg-gray-50 p-4 rounded-lg shadow-inner">
                        <p class="font-semibold">句型 4: <code class="text-pink-600">When facing + N, one should learn to + Vr...</code> (當面臨...時，應該學會...)</p>
                        <p class="mt-2 text-gray-700">說明：這是一個分詞構句的簡化用法，用來提供建議。</p>
                        <p class="mt-1 text-gray-700">例句：<strong>When facing exam pressure, students should learn to relax properly.</strong></p>
                    </div>
                </div>
            </section>

            <!-- 3. 寫作攻略 -->
            <section id="writing-strategy">
                <h2 class="text-2xl font-bold text-purple-700 border-b-2 border-purple-200 pb-2 mb-6">3. 寫作攻略 (Writing Strategy)</h2>
                
                <div class="bg-purple-50 border-l-4 border-purple-400 p-6 rounded-r-lg space-y-6">
                    <div>
                        <h3 class="text-lg font-bold text-purple-900">第一步：分析題目與文體</h3>
                        <p class="mt-1 text-gray-800">題目 "How Students Can Take Care of Their Mental Health" 是一個典型的<strong class="font-semibold">「方法指導型」論說文</strong>。你需要先點出問題的重要性，然後提供具體的解決方法。</p>
                    </div>

                    <div>
                        <h3 class="text-lg font-bold text-purple-900">第二步：規劃段落架構 (Paragraph Structure)</h3>
                        <p class="mt-1 text-gray-800 mb-4">這類文章通常分成兩段，結構清晰，易於發揮：</p>
                        
                        <div class="space-y-3">
                            <div class="bg-white p-4 rounded-lg border border-purple-200">
                                <p><strong>A. 第一段：闡述問題的重要性 (State the Problem &amp; Importance)</strong></p>
                                <ul class="list-disc list-inside mt-2 text-gray-700 text-sm space-y-1">
                                    <li><strong>主旨句 (Thesis Statement):</strong> 開門見山，直接點出心理健康與身體健康同等重要。 (e.g., "Taking care of mental health is just as crucial as maintaining physical health, especially for students under academic pressure.")</li>
                                    <li><strong>舉例說明 (Examples):</strong> 具體說明心理健康不佳會帶來什麼影響。你可以使用 "For instance," 或 "such as" 來引導例子。 (e.g., "...which can lead to negative consequences, such as anxiety, insomnia, and a decline in academic performance.")</li>
                                </ul>
                            </div>

                            <div class="bg-white p-4 rounded-lg border border-purple-200">
                                <p><strong>B. 第二段：提供具體方法與建議 (Provide Solutions &amp; Suggestions)</strong></p>
                                <ul class="list-disc list-inside mt-2 text-gray-700 text-sm space-y-1">
                                    <li><strong>主題句 (Topic Sentence):</strong> 用一句話總結這段的重點，即「有許多方法可以維持心理健康」。 (e.g., "Fortunately, there are several effective ways for students to maintain their mental well-being.")</li>
                                    <li><strong>條列方法 (Listing Methods):</strong> 使用轉折詞 (e.g., "First," "Moreover," "Finally,") 來分別介紹不同的方法。例如：
                                        <ul>
                                            <li>- <strong>規律運動 (Regular exercise)</strong></li>
                                            <li>- <strong>培養嗜好 (Cultivating hobbies)</strong></li>
                                            <li>- <strong>與人傾訴 (Talking to friends or family)</strong></li>
                                            <li>- <strong>維持規律作息 (Keeping a regular schedule)</strong></li>
                                        </ul>
                                    </li>
                                    <li><strong>結論句 (Concluding Sentence):</strong> 在段末總結，並強調這些方法的重要性或分享個人看法。 (e.g., "By adopting these habits, students can not only cope with stress but also lead a more balanced life.")</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </main>
        
        <footer class="text-center mt-16 pt-8 border-t border-gray-200">
            <p class="text-gray-500">照顧好自己的心，才能走得更遠！💖</p>
            <p class="text-sm text-gray-400 mt-2">清大文理補習班・Jeff</p>
        </footer>
    </div></div>
</body></html>

=== FILE: docs\materials\sally\english\2025-08-09_主題：媒體素養_(media_literacy).html ===
<!doctype html><html lang="zh-Hant"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>主題：媒體素養 (Media Literacy)</title>
<style>body{font-family:system-ui,"Noto Sans TC",Arial,sans-serif;margin:0;background:#f6f7fb;}
.header{background:#111827;color:#fff;padding:10px 14px;}
.header a{color:#a7f3d0;text-decoration:none}
.container{max-width:900px;margin:18px auto;background:#fff;border-radius:12px;padding:18px 20px;box-shadow:0 10px 30px rgba(0,0,0,.06)}</style>
</head><body>
<div class="header">← <a href="../../../index.html?student=sally&date=2025-08-09">返回日曆</a></div>
<div class="container"><h1>主題：媒體素養 (Media Literacy)</h1><!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 讓麵包屑能正確解析日期 -->
    <meta name="lesson-date" content="2025-08-10">
    <title>高三學測英文 - 主題探討：媒體素養</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
        }
        summary {
            list-style: none;
        }
        summary::-webkit-details-marker {
            display: none;
        }
        summary::before {
            content: '▶';
            margin-right: 8px;
            font-size: 0.8em;
            display: inline-block;
            transition: transform 0.2s ease-in-out;
        }
        details[open] summary::before {
            transform: rotate(90deg);
        }
    </style>
</head>
<body class="bg-gray-100 p-4 sm:p-8">

    <!-- 自動產生返回主頁的麵包屑 -->
    <div id="breadcrumb" class="max-w-4xl mx-auto mb-4"></div>
    <script>
    (function () {
      // 1) 先用 <meta name="lesson-date">；若沒有，再嘗試從檔名推 YYMMDD
      const metaDate = document.querySelector('meta[name="lesson-date"]')?.content?.trim();
      let dateStr = metaDate && !isNaN(Date.parse(metaDate)) ? metaDate : null;
      if (!dateStr) {
        const m = location.pathname.match(/(\d{2})(\d{2})(\d{2})\.html$/);
        if (m) dateStr = `20${m[1]}-${m[2]}-${m[3]}`;
      }
      const backUrl = dateStr ? `../index.html?date=${dateStr}#calendar-widget` : `../index.html#calendar-widget`;
      document.getElementById('breadcrumb').innerHTML = `
        <a href="${backUrl}" class="text-blue-600 hover:text-blue-800 hover:underline">&larr; 返回課程日曆</a>
      `;
    })();
    </script>

    <div class="max-w-4xl mx-auto bg-white rounded-2xl shadow-lg p-6 sm:p-10">
        <header class="text-center mb-12">
            <h1 class="text-3xl sm:text-4xl font-bold text-blue-800 mb-2">高三學測英文 - 主題探討 🌐</h1>
            <p class="text-lg text-gray-600">主題：媒體素養 (Media Literacy)</p>
        </header>

        <main class="space-y-12">

            <!-- 1. 重點單字 -->
            <section id="vocabulary">
                <h2 class="text-2xl font-bold text-blue-700 border-b-2 border-blue-200 pb-2 mb-6">1. 重點單字 (Key Vocabulary)</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="font-bold text-blue-900">literacy (n.)</h3>
                        <p class="text-gray-700">素養；讀寫能力</p>
                        <p class="text-sm text-gray-600 mt-1">e.g., Financial <strong>literacy</strong> is essential for managing personal finances.</p>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="font-bold text-blue-900">critically (adv.)</h3>
                        <p class="text-gray-700">批判性地</p>
                        <p class="text-sm text-gray-600 mt-1">e.g., We should think <strong>critically</strong> about the news we read online.</p>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="font-bold text-blue-900">evaluate (v.)</h3>
                        <p class="text-gray-700">評估；評價</p>
                        <p class="text-sm text-gray-600 mt-1">e.g., It's important to <strong>evaluate</strong> the credibility of a website before trusting its content.</p>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="font-bold text-blue-900">verify (v.)</h3>
                        <p class="text-gray-700">查證；核實</p>
                        <p class="text-sm text-gray-600 mt-1">e.g., Always try to <strong>verify</strong> facts from multiple sources.</p>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="font-bold text-blue-900">mislead (v.)</h3>
                        <p class="text-gray-700">誤導 (三態: mislead, misled, misled)</p>
                        <p class="text-sm text-gray-600 mt-1">e.g., The advertisement was designed to <strong>mislead</strong> customers.</p>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="font-bold text-blue-900">cultivate (v.)</h3>
                        <p class="text-gray-700">培養</p>
                        <p class="text-sm text-gray-600 mt-1">e.g., Parents play a key role in <strong>cultivating</strong> good habits in their children.</p>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="font-bold text-blue-900">prevalence (n.)</h3>
                        <p class="text-gray-700">普及；盛行</p>
                        <p class="text-sm text-gray-600 mt-1">e.g., The <strong>prevalence</strong> of smartphones has changed how we communicate.</p>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="font-bold text-blue-900">disseminator (n.)</h3>
                        <p class="text-gray-700">傳播者</p>
                        <p class="text-sm text-gray-600 mt-1">e.g., With social media, anyone can be a content <strong>disseminator</strong>.</p>
                    </div>
                </div>
            </section>

            <!-- 2. 核心句型 -->
            <section id="patterns">
                <h2 class="text-2xl font-bold text-blue-700 border-b-2 border-blue-200 pb-2 mb-6">2. 核心句型 (Core Sentence Patterns)</h2>
                <div class="space-y-4">
                    <div class="bg-gray-50 p-4 rounded-lg shadow-inner">
                        <p class="font-semibold">句型 1: <code class="text-pink-600">The term A refers to B, which/where...</code> (A 一詞指的是 B，而 B...)</p>
                        <p class="mt-2 text-gray-700">說明：用來提供一個正式的定義，並可接續一個關係子句來補充說明。</p>
                        <p class="mt-1 text-gray-700">例句：The term "media literacy" <strong>refers to</strong> a set of skills, <strong>which</strong> empower individuals to critically analyze media messages.</p>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg shadow-inner">
                        <p class="font-semibold">句型 2: <code class="text-pink-600">In an era flooded with..., it is important/vital/crucial to + Vr...</code></p>
                        <p class="mt-2 text-gray-700">說明：強調在某個特定時代背景下，做某件事的重要性。</p>
                        <p class="mt-1 text-gray-700">例句：<strong>In an era flooded with</strong> fake news, <strong>it is crucial to verify</strong> information sources.</p>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg shadow-inner">
                        <p class="font-semibold">句型 3: <code class="text-pink-600">Cultivating... can help sb. (to) avoid being + p.p.</code> (培養...能幫助某人避免被...)</p>
                        <p class="mt-2 text-gray-700">說明：表達採取某行動可以幫助避免某種被動的負面結果。</p>
                        <p class="mt-1 text-gray-700">例句：<strong>Cultivating</strong> good media literacy <strong>can help us avoid being misled</strong> by false information.</p>
                    </div>
                     <div class="bg-gray-50 p-4 rounded-lg shadow-inner">
                        <p class="font-semibold">句型 4: <code class="text-pink-600">...come(s) with + N.</code> (...伴隨著...而來)</p>
                        <p class="mt-2 text-gray-700">說明：表示某事物出現時，會連帶產生另一種情況或責任。</p>
                        <p class="mt-1 text-gray-700">例句：Becoming a content creator <strong>comes with</strong> great responsibility.</p>
                    </div>
                </div>
            </section>

            <!-- 3. 寫作攻略 -->
            <section id="writing-strategy">
                <h2 class="text-2xl font-bold text-purple-700 border-b-2 border-purple-200 pb-2 mb-6">3. 寫作攻略 (Writing Strategy)</h2>
                
                <div class="bg-purple-50 border-l-4 border-purple-400 p-6 rounded-r-lg space-y-6">
                    <div>
                        <h3 class="text-lg font-bold text-purple-900">第一步：辨別文體</h3>
                        <p class="mt-1 text-gray-800">看到「探討重要性」、「分析影響」這類題目，就要知道這是一篇<strong class="font-semibold">「論說文」(Argumentative/Expository Essay)</strong>。你的目標是提出清晰的論點，並用理由和例子來支持它。</p>
                    </div>

                    <div>
                        <h3 class="text-lg font-bold text-purple-900">第二步：規劃文章架構 (Structure)</h3>
                        <p class="mt-1 text-gray-800 mb-4">一篇好的論說文，就像蓋房子，需要穩固的架構。你可以遵循「總-分-總」的原則：</p>
                        
                        <div class="space-y-3">
                            <div class="bg-white p-4 rounded-lg border border-purple-200">
                                <p><strong>A. 主旨段 (Introduction): 點出核心論點</strong></p>
                                <ul class="list-disc list-inside mt-2 text-gray-700 text-sm space-y-1">
                                    <li><strong>開頭 (Hook):</strong> 用一個問題或一句話吸引讀者注意。 (e.g., "In a world saturated with information, how can we tell truth from fiction?")</li>
                                    <li><strong>定義與背景:</strong> 簡單解釋「媒體素養」是什麼，以及為什麼在「數位時代」很重要。</li>
                                    <li><strong>主旨句 (Thesis Statement):</strong> 一句話清楚表明你的核心論點。 (e.g., "Therefore, developing media literacy is a critical skill for navigating the modern world and fostering a responsible digital citizenship.")</li>
                                </ul>
                            </div>

                            <div class="bg-white p-4 rounded-lg border border-purple-200">
                                <p><strong>B. 支撐段 (Body Paragraph): 提出理由與證據</strong></p>
                                <ul class="list-disc list-inside mt-2 text-gray-700 text-sm space-y-1">
                                    <li><strong>主題句 (Topic Sentence):</strong> 每段開頭用一句話點出該段的重點。例如，先談「缺乏媒體素養的壞處」。</li>
                                    <li><strong>解釋與舉例 (Explanation & Example):</strong> 闡述主題句，並舉出具體例子，如假新聞 (fake news)、網路霸凌 (cyberbullying) 等。</li>
                                    <li><strong>發展論點:</strong> 接著可以寫下一段，主題句是「如何培養媒體素養」，並提出具體方法，如查證來源 (verifying sources)、批判性思考 (thinking critically) 等。</li>
                                </ul>
                            </div>

                            <div class="bg-white p-4 rounded-lg border border-purple-200">
                                <p><strong>C. 結論段 (Conclusion): 總結並昇華</strong></p>
                                <ul class="list-disc list-inside mt-2 text-gray-700 text-sm space-y-1">
                                    <li><strong>重申主旨:</strong> 用不同的話再次強調你的核心論點。</li>
                                    <li><strong>總結要點:</strong> 快速總結你在支撐段提出的主要理由。</li>
                                    <li><strong>提出展望 (Concluding thought):</strong> 給出一個有力的結尾，例如對未來的期許或給讀者的建議。 (e.g., "Ultimately, being media literate is not just about personal protection; it is about contributing to a more informed and democratic society.")</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </main>
        
        <footer class="text-center mt-16 pt-8 border-t border-gray-200">
            <p class="text-gray-500">每天進步一點點，累積起來就是巨大的飛躍！🚀</p>
            <p class="text-sm text-gray-400 mt-2">清大文理補習班・Jeff</p>
        </footer>
    </div>

</body>
</html></div>
</body></html>

=== FILE: docs\materials\ray\english\2025-08-10_lesson.html ===
<!doctype html><html lang="zh-Hant"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>瑞瑞第一課</title>
<style>body{font-family:system-ui,"Noto Sans TC",Arial,sans-serif;margin:0;background:#f6f7fb;}
.header{background:#111827;color:#fff;padding:10px 14px;}
.header a{color:#a7f3d0;text-decoration:none}
.container{max-width:900px;margin:18px auto;background:#fff;border-radius:12px;padding:18px 20px;box-shadow:0 10px 30px rgba(0,0,0,.06)}</style>
</head><body>
<div class="header">← <a href="../../../index.html?student=ray&date=2025-08-10">返回日曆</a></div>
<div class="container"><h1>瑞瑞第一課</h1><meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>國一英文 Lesson 1 學習重點 - For 瑞瑞</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&amp;family=Noto+Sans+TC:wght@400;500;700&amp;display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
        }
        .hero-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
    </style>



    <header class="hero-bg text-white py-12 sm:py-20 px-4 text-center rounded-b-3xl shadow-lg">
        <div class="max-w-4xl mx-auto">
            <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold mb-4">歡迎來到國一英文第一課！</h1>
            <p class="text-lg sm:text-xl opacity-90">這是一個專為瑞瑞設計的學習頁面，把第一課的重點一網打盡！</p>
        </div>
    </header>

    <main class="container mx-auto p-4 sm:p-6 max-w-5xl">
        
        <!-- Vocabulary Section -->
        <section id="vocabulary" class="bg-white p-6 sm:p-8 rounded-2xl shadow-md mb-8">
            <h2 class="text-3xl font-bold text-indigo-600 border-b-4 border-indigo-200 pb-3 mb-6">核心單字 (Core Vocabulary)</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                
                <div class="bg-indigo-50 p-5 rounded-xl">
                    <h3 class="text-xl font-semibold text-indigo-800 mb-3">家庭與稱謂 (Family &amp; Titles)</h3>
                    <ul class="space-y-2 text-gray-700">
                        <li class="flex items-center"><span class="w-2 h-2 bg-indigo-400 rounded-full mr-3"></span>family: 家人；家庭</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-indigo-400 rounded-full mr-3"></span>father (dad): 父親</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-indigo-400 rounded-full mr-3"></span>mother (mom): 母親</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-indigo-400 rounded-full mr-3"></span>brother: 兄弟</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-indigo-400 rounded-full mr-3"></span>sister: 姐妹</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-indigo-400 rounded-full mr-3"></span>son: 兒子</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-indigo-400 rounded-full mr-3"></span>daughter: 女兒</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-indigo-400 rounded-full mr-3"></span>uncle: 叔(伯)父；姑(姨)丈；舅舅</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-indigo-400 rounded-full mr-3"></span>aunt: 嬸嬸；伯母；姑(姨)媽；舅媽</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-indigo-400 rounded-full mr-3"></span>cousin: 堂(表)兄弟姐妹</li>
                    </ul>
                </div>
                
                <div class="bg-purple-50 p-5 rounded-xl">
                    <h3 class="text-xl font-semibold text-purple-800 mb-3">職業 (Occupation)</h3>
                    <ul class="space-y-2 text-gray-700">
                        <li class="flex items-center"><span class="w-2 h-2 bg-purple-400 rounded-full mr-3"></span>student: 學生</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-purple-400 rounded-full mr-3"></span>teacher: 老師</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-purple-400 rounded-full mr-3"></span>doctor: 醫生</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-purple-400 rounded-full mr-3"></span>nurse: 護理師；護士</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-purple-400 rounded-full mr-3"></span>farmer: 農夫</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-purple-400 rounded-full mr-3"></span>cook: 廚師</li>
                    </ul>
                </div>
                
                <div class="bg-pink-50 p-5 rounded-xl">
                    <h3 class="text-xl font-semibold text-pink-800 mb-3">形容詞 (Adjectives)</h3>
                    <ul class="space-y-2 text-gray-700">
                        <li class="flex items-center"><span class="w-2 h-2 bg-pink-400 rounded-full mr-3"></span>young: 年輕的</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-pink-400 rounded-full mr-3"></span>old: 年老的；舊的</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-pink-400 rounded-full mr-3"></span>tall: 高的</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-pink-400 rounded-full mr-3"></span>handsome: 英俊的</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-pink-400 rounded-full mr-3"></span>beautiful: 漂亮的；美麗的</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-pink-400 rounded-full mr-3"></span>cute: 可愛的</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-pink-400 rounded-full mr-3"></span>strict: 嚴格的</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Grammar Section -->
        <section id="grammar" class="bg-white p-6 sm:p-8 rounded-2xl shadow-md mb-8">
            <h2 class="text-3xl font-bold text-indigo-600 border-b-4 border-indigo-200 pb-3 mb-6">重點文法與句型 (Key Grammar &amp; Patterns)</h2>
            
            <div class="space-y-6">
                <div>
                    <h4 class="text-xl font-semibold mb-2">1. be 動詞：am, is, are (是)</h4>
                    <p class="text-gray-600 mb-3">be 動詞用來表示狀態或身份，會根據主詞人稱做變化。</p>
                    <ul class="list-disc list-inside bg-gray-100 p-4 rounded-lg">
                        <li>第一人稱 (我)：I <span class="font-bold text-indigo-700">am</span></li>
                        <li>第二人稱 (你/你們)：you <span class="font-bold text-indigo-700">are</span></li>
                        <li>第三人稱單數 (他/她/它)：he / she / it <span class="font-bold text-indigo-700">is</span></li>
                    </ul>
                </div>

                <div>
                    <h4 class="text-xl font-semibold mb-2">2. 直述句 (Statements)</h4>
                    <div class="border-l-4 border-indigo-500 bg-indigo-50 p-4 rounded-r-lg mb-3">
                        <p><strong>肯定句：</strong>主詞 + be動詞 + a/an + 單數名詞。</p>
                        <p class="mt-1 italic">My uncle is a doctor. (我叔叔是一位醫生。)</p>
                    </div>
                    <div class="border-l-4 border-red-500 bg-red-50 p-4 rounded-r-lg">
                        <p><strong>否定句：</strong>主詞 + be動詞 + not + a/an + 單數名詞。</p>
                        <p class="mt-1 italic">My brother is not a junior high school student. (我哥哥不是一位國中生。)</p>
                    </div>
                </div>

                <div>
                    <h4 class="text-xl font-semibold mb-2">3. Yes/No 問答句 (Yes/No Questions)</h4>
                    <div class="border-l-4 border-green-500 bg-green-50 p-4 rounded-r-lg">
                        <p><strong>問句：</strong>Be動詞 + 主詞 + a/an + 名詞?</p>
                        <p class="mt-2 italic">Q: Is Vicky a nurse? (Vicky是一位護理師嗎？)</p>
                        <p class="italic">A: Yes, she is. (是的，她是。)</p>
                        <p class="mt-2 italic">Q: Are you a cook? (你是一位廚師嗎？)</p>
                        <p class="italic">A: No, I'm not a cook. (不是，我不是一位廚師。)</p>
                    </div>
                </div>

                <div>
                    <h4 class="text-xl font-semibold mb-2">4. Who 問答句 (Who Questions)</h4>
                    <div class="border-l-4 border-yellow-500 bg-yellow-50 p-4 rounded-r-lg">
                        <p><strong>問句：</strong>Who + be動詞 + 主詞?</p>
                        <p class="mt-2 italic">Q: Who's that young man? (那位年輕的男子是誰？)</p>
                        <p class="italic">A: He's our new PE teacher. (他是我們的新體育老師。)</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Dialogue Section -->
        <section id="dialogue" class="bg-white p-6 sm:p-8 rounded-2xl shadow-md mb-8">
            <h2 class="text-3xl font-bold text-indigo-600 border-b-4 border-indigo-200 pb-3 mb-6">實用對話 (Dialogue Practice)</h2>
            <div class="space-y-4">
                <div class="bg-gray-100 p-4 rounded-lg">
                    <p>A: Nice to meet you. (很高興認識你。)</p>
                    <p>B: Nice to meet you, too. (我也很高興認識你。)</p>
                </div>
                <div class="bg-gray-100 p-4 rounded-lg">
                    <p>A: Hey, Rita. Good news. Bella is our English teacher! (嘿，Rita。好消息，Bella 是我們的英文老師！)</p>
                    <p>B: Oh, no. That's not good. (哦，不。這不是好消息。)</p>
                    <p>A: What's the problem? She's a great teacher. (怎麼了？她是一位很棒的老師。)</p>
                    <p>B: Well... she's a strict teacher, too. (嗯...她也是一位嚴格的老師。)</p>
                </div>
            </div>
        </section>
        
        <!-- Quiz Section -->
        <section id="quiz" class="bg-white p-6 sm:p-8 rounded-2xl shadow-md">
            <h2 class="text-3xl font-bold text-indigo-600 border-b-4 border-indigo-200 pb-3 mb-6">小試身手 (Quick Quiz)</h2>
            <p class="text-gray-600 mb-6">試著填入正確的單字 (am / is / are / Who's)！</p>
            <div class="space-y-4">
                <div class="quiz-item">
                    <p>1. A: ____ that girl? B: She is my sister, May.</p>
                    <div class="answer mt-2 text-green-600 font-bold hidden">答案：Who's</div>
                </div>
                <div class="quiz-item">
                    <p>2. He ____ a handsome doctor.</p>
                    <div class="answer mt-2 text-green-600 font-bold hidden">答案：is</div>
                </div>
                <div class="quiz-item">
                    <p>3. A: ____ you a teacher? B: No, I ____ not. I'm a student.</p>
                    <div class="answer mt-2 text-green-600 font-bold hidden">答案：Are, am</div>
                </div>
            </div>
            <button id="show-answers" class="mt-6 inline-block bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-6 rounded-lg transition-transform transform hover:scale-105">顯示答案</button>
        </section>
    </main>

    <footer class="text-center py-10 mt-8">
        <p class="text-gray-500">做得很好！第一課的基礎非常重要，常常回來複習喔！</p>
    </footer>

    <script>
        // Script to show answers for the quiz
        document.getElementById('show-answers').addEventListener('click', function() {
            var answers = document.querySelectorAll('.answer');
            answers.forEach(function(answer) {
                answer.classList.remove('hidden');
            });
            this.classList.add('hidden'); // Hide button after clicking
        });
    </script></div>
</body></html>

=== FILE: docs\materials\ray\english\2025-08-10_瑞瑞第一課.html ===
<!doctype html><html lang="zh-Hant"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>瑞瑞第一課</title>
<style>body{font-family:system-ui,"Noto Sans TC",Arial,sans-serif;margin:0;background:#f6f7fb;}
.header{background:#111827;color:#fff;padding:10px 14px;}
.header a{color:#a7f3d0;text-decoration:none}
.container{max-width:900px;margin:18px auto;background:#fff;border-radius:12px;padding:18px 20px;box-shadow:0 10px 30px rgba(0,0,0,.06)}</style>
</head><body>
<div class="header">← <a href="../../../index.html?student=ray&date=2025-08-10">返回日曆</a></div>
<div class="container"><h1>瑞瑞第一課</h1><!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>國一英文 Lesson 1 學習重點 - For 瑞瑞</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
        }
        .hero-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <header class="hero-bg text-white py-12 sm:py-20 px-4 text-center rounded-b-3xl shadow-lg">
        <div class="max-w-4xl mx-auto">
            <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold mb-4">歡迎來到國一英文第一課！</h1>
            <p class="text-lg sm:text-xl opacity-90">這是一個專為瑞瑞設計的學習頁面，把第一課的重點一網打盡！</p>
        </div>
    </header>

    <main class="container mx-auto p-4 sm:p-6 max-w-5xl">
        
        <!-- Vocabulary Section -->
        <section id="vocabulary" class="bg-white p-6 sm:p-8 rounded-2xl shadow-md mb-8">
            <h2 class="text-3xl font-bold text-indigo-600 border-b-4 border-indigo-200 pb-3 mb-6">核心單字 (Core Vocabulary)</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                
                <div class="bg-indigo-50 p-5 rounded-xl">
                    <h3 class="text-xl font-semibold text-indigo-800 mb-3">家庭與稱謂 (Family & Titles)</h3>
                    <ul class="space-y-2 text-gray-700">
                        <li class="flex items-center"><span class="w-2 h-2 bg-indigo-400 rounded-full mr-3"></span>family: 家人；家庭</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-indigo-400 rounded-full mr-3"></span>father (dad): 父親</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-indigo-400 rounded-full mr-3"></span>mother (mom): 母親</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-indigo-400 rounded-full mr-3"></span>brother: 兄弟</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-indigo-400 rounded-full mr-3"></span>sister: 姐妹</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-indigo-400 rounded-full mr-3"></span>son: 兒子</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-indigo-400 rounded-full mr-3"></span>daughter: 女兒</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-indigo-400 rounded-full mr-3"></span>uncle: 叔(伯)父；姑(姨)丈；舅舅</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-indigo-400 rounded-full mr-3"></span>aunt: 嬸嬸；伯母；姑(姨)媽；舅媽</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-indigo-400 rounded-full mr-3"></span>cousin: 堂(表)兄弟姐妹</li>
                    </ul>
                </div>
                
                <div class="bg-purple-50 p-5 rounded-xl">
                    <h3 class="text-xl font-semibold text-purple-800 mb-3">職業 (Occupation)</h3>
                    <ul class="space-y-2 text-gray-700">
                        <li class="flex items-center"><span class="w-2 h-2 bg-purple-400 rounded-full mr-3"></span>student: 學生</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-purple-400 rounded-full mr-3"></span>teacher: 老師</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-purple-400 rounded-full mr-3"></span>doctor: 醫生</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-purple-400 rounded-full mr-3"></span>nurse: 護理師；護士</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-purple-400 rounded-full mr-3"></span>farmer: 農夫</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-purple-400 rounded-full mr-3"></span>cook: 廚師</li>
                    </ul>
                </div>
                
                <div class="bg-pink-50 p-5 rounded-xl">
                    <h3 class="text-xl font-semibold text-pink-800 mb-3">形容詞 (Adjectives)</h3>
                    <ul class="space-y-2 text-gray-700">
                        <li class="flex items-center"><span class="w-2 h-2 bg-pink-400 rounded-full mr-3"></span>young: 年輕的</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-pink-400 rounded-full mr-3"></span>old: 年老的；舊的</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-pink-400 rounded-full mr-3"></span>tall: 高的</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-pink-400 rounded-full mr-3"></span>handsome: 英俊的</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-pink-400 rounded-full mr-3"></span>beautiful: 漂亮的；美麗的</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-pink-400 rounded-full mr-3"></span>cute: 可愛的</li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-pink-400 rounded-full mr-3"></span>strict: 嚴格的</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Grammar Section -->
        <section id="grammar" class="bg-white p-6 sm:p-8 rounded-2xl shadow-md mb-8">
            <h2 class="text-3xl font-bold text-indigo-600 border-b-4 border-indigo-200 pb-3 mb-6">重點文法與句型 (Key Grammar & Patterns)</h2>
            
            <div class="space-y-6">
                <div>
                    <h4 class="text-xl font-semibold mb-2">1. be 動詞：am, is, are (是)</h4>
                    <p class="text-gray-600 mb-3">be 動詞用來表示狀態或身份，會根據主詞人稱做變化。</p>
                    <ul class="list-disc list-inside bg-gray-100 p-4 rounded-lg">
                        <li>第一人稱 (我)：I <span class="font-bold text-indigo-700">am</span></li>
                        <li>第二人稱 (你/你們)：you <span class="font-bold text-indigo-700">are</span></li>
                        <li>第三人稱單數 (他/她/它)：he / she / it <span class="font-bold text-indigo-700">is</span></li>
                    </ul>
                </div>

                <div>
                    <h4 class="text-xl font-semibold mb-2">2. 直述句 (Statements)</h4>
                    <div class="border-l-4 border-indigo-500 bg-indigo-50 p-4 rounded-r-lg mb-3">
                        <p><strong>肯定句：</strong>主詞 + be動詞 + a/an + 單數名詞。</p>
                        <p class="mt-1 italic">My uncle is a doctor. (我叔叔是一位醫生。)</p>
                    </div>
                    <div class="border-l-4 border-red-500 bg-red-50 p-4 rounded-r-lg">
                        <p><strong>否定句：</strong>主詞 + be動詞 + not + a/an + 單數名詞。</p>
                        <p class="mt-1 italic">My brother is not a junior high school student. (我哥哥不是一位國中生。)</p>
                    </div>
                </div>

                <div>
                    <h4 class="text-xl font-semibold mb-2">3. Yes/No 問答句 (Yes/No Questions)</h4>
                    <div class="border-l-4 border-green-500 bg-green-50 p-4 rounded-r-lg">
                        <p><strong>問句：</strong>Be動詞 + 主詞 + a/an + 名詞?</p>
                        <p class="mt-2 italic">Q: Is Vicky a nurse? (Vicky是一位護理師嗎？)</p>
                        <p class="italic">A: Yes, she is. (是的，她是。)</p>
                        <p class="mt-2 italic">Q: Are you a cook? (你是一位廚師嗎？)</p>
                        <p class="italic">A: No, I'm not a cook. (不是，我不是一位廚師。)</p>
                    </div>
                </div>

                <div>
                    <h4 class="text-xl font-semibold mb-2">4. Who 問答句 (Who Questions)</h4>
                    <div class="border-l-4 border-yellow-500 bg-yellow-50 p-4 rounded-r-lg">
                        <p><strong>問句：</strong>Who + be動詞 + 主詞?</p>
                        <p class="mt-2 italic">Q: Who's that young man? (那位年輕的男子是誰？)</p>
                        <p class="italic">A: He's our new PE teacher. (他是我們的新體育老師。)</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Dialogue Section -->
        <section id="dialogue" class="bg-white p-6 sm:p-8 rounded-2xl shadow-md mb-8">
            <h2 class="text-3xl font-bold text-indigo-600 border-b-4 border-indigo-200 pb-3 mb-6">實用對話 (Dialogue Practice)</h2>
            <div class="space-y-4">
                <div class="bg-gray-100 p-4 rounded-lg">
                    <p>A: Nice to meet you. (很高興認識你。)</p>
                    <p>B: Nice to meet you, too. (我也很高興認識你。)</p>
                </div>
                <div class="bg-gray-100 p-4 rounded-lg">
                    <p>A: Hey, Rita. Good news. Bella is our English teacher! (嘿，Rita。好消息，Bella 是我們的英文老師！)</p>
                    <p>B: Oh, no. That's not good. (哦，不。這不是好消息。)</p>
                    <p>A: What's the problem? She's a great teacher. (怎麼了？她是一位很棒的老師。)</p>
                    <p>B: Well... she's a strict teacher, too. (嗯...她也是一位嚴格的老師。)</p>
                </div>
            </div>
        </section>
        
        <!-- Quiz Section -->
        <section id="quiz" class="bg-white p-6 sm:p-8 rounded-2xl shadow-md">
            <h2 class="text-3xl font-bold text-indigo-600 border-b-4 border-indigo-200 pb-3 mb-6">小試身手 (Quick Quiz)</h2>
            <p class="text-gray-600 mb-6">試著填入正確的單字 (am / is / are / Who's)！</p>
            <div class="space-y-4">
                <div class="quiz-item">
                    <p>1. A: ____ that girl? B: She is my sister, May.</p>
                    <div class="answer mt-2 text-green-600 font-bold hidden">答案：Who's</div>
                </div>
                <div class="quiz-item">
                    <p>2. He ____ a handsome doctor.</p>
                    <div class="answer mt-2 text-green-600 font-bold hidden">答案：is</div>
                </div>
                <div class="quiz-item">
                    <p>3. A: ____ you a teacher? B: No, I ____ not. I'm a student.</p>
                    <div class="answer mt-2 text-green-600 font-bold hidden">答案：Are, am</div>
                </div>
            </div>
            <button id="show-answers" class="mt-6 inline-block bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-6 rounded-lg transition-transform transform hover:scale-105">顯示答案</button>
        </section>
    </main>

    <footer class="text-center py-10 mt-8">
        <p class="text-gray-500">做得很好！第一課的基礎非常重要，常常回來複習喔！</p>
    </footer>

    <script>
        // Script to show answers for the quiz
        document.getElementById('show-answers').addEventListener('click', function() {
            var answers = document.querySelectorAll('.answer');
            answers.forEach(function(answer) {
                answer.classList.remove('hidden');
            });
            this.classList.add('hidden'); // Hide button after clicking
        });
    </script>

</body>
</html></div>
</body></html>

=== FILE: docs\materials\ray\english\2025-08-17_prepared.html ===
<!doctype html><html lang="zh-Hant"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>prepared</title>
<style>body{font-family:system-ui,"Noto Sans TC",Arial,sans-serif;margin:0;background:#f6f7fb;}
.header{background:#111827;color:#fff;padding:10px 14px;}
.header a{color:#a7f3d0;text-decoration:none}
.container{max-width:900px;margin:18px auto;background:#fff;border-radius:12px;padding:18px 20px;box-shadow:0 10px 30px rgba(0,0,0,.06)}</style>
</head><body>
<div class="header">← <a href="../../../index.html?student=ray&date=2025-08-17">返回日曆</a></div>
<div class="container"><h1>prepared</h1>456</div>
</body></html>

=== FILE: docs\materials\ray\math\2025-08-10_lesson.html ===
<!doctype html><html lang="zh-Hant"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title></title>
<style>body{font-family:system-ui,"Noto Sans TC",Arial,sans-serif;margin:0;background:#f6f7fb;}
.header{background:#111827;color:#fff;padding:10px 14px;}
.header a{color:#a7f3d0;text-decoration:none}
.container{max-width:900px;margin:18px auto;background:#fff;border-radius:12px;padding:18px 20px;box-shadow:0 10px 30px rgba(0,0,0,.06)}</style>
</head><body>
<div class="header">← <a href="../../../index.html?student=ray&date=2025-08-10">返回日曆</a></div>
<div class="container"><h1></h1><!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>互動式數學教材：負數與數線</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Neutrals -->
    <!-- Application Structure Plan: A single-page application with four interactive/informational modules ("1. 探索正負數", "2. 玩轉數線", "3. 觀念釐清", "4. 解密絕對值") navigated by a sticky top bar. This thematic, hands-on structure is chosen over a linear text format to enhance engagement and clarify abstract concepts through direct manipulation and immediate visual feedback, which is more effective for foundational math learning. The goal is to transform passive reading into active exploration. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Relative quantities & benchmarks -> Goal: Inform -> Viz/Presentation: Interactive Slider with a dynamic thermometer visual (HTML/CSS/JS) -> Interaction: User drags slider to see value and visual change -> Justification: Makes the abstract concept of a benchmark tangible and connects it to a familiar real-world example.
        - Report Info: Number line and number comparison -> Goal: Organize/Compare -> Viz/Presentation: Large, interactive number line where users can place points (HTML/CSS/JS) -> Interaction: User clicks to add a point, and its value is displayed -> Justification: Promotes active learning and spatial understanding of number placement and order over passive observation.
        - Report Info: Confusing concepts (Opposite Numbers, Value vs. Absolute Value) -> Goal: Clarify/Differentiate -> Viz/Presentation: A dedicated text-based section with clear headings and highlighted keywords -> Interaction: Reading and comprehension -> Justification: Directly addresses common student misconceptions before they interact with the final module, improving learning outcomes.
        - Report Info: Value vs. Absolute Value -> Goal: Compare/Differentiate -> Viz/Presentation: A dual-bar chart (Chart.js) with a restructured data model. Color now consistently represents the entity (Number A or Number B), while the x-axis categorizes the concept (Value vs. Absolute Value). -> Interaction: User inputs two numbers, and the chart and number line immediately update -> Justification: This revised structure provides a powerful, direct visual comparison that highlights the core difference between a number's value and its absolute value without any color ambiguity.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f8fafc; /* slate-50 */
            color: #1e293b; /* slate-800 */
        }
        html {
            scroll-padding-top: 5rem; /* Offset for sticky header */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 40vh;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .nav-link {
            transition: color 0.3s, border-color 0.3s;
        }
        .interactive-number-line {
            position: relative;
            height: 50px;
            background-color: #e2e8f0; /* slate-200 */
            border-radius: 8px;
            cursor: crosshair;
        }
        .interactive-number-line .line {
            position: absolute;
            left: 0;
            right: 0;
            top: 50%;
            height: 2px;
            background-color: #475569; /* slate-600 */
        }
        .interactive-number-line .tick {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 2px;
            height: 10px;
            background-color: #475569; /* slate-600 */
        }
        .interactive-number-line .tick-label {
            position: absolute;
            top: 28px;
            transform: translateX(-50%);
            font-size: 0.8rem;
            color: #334155; /* slate-700 */
        }
        .interactive-number-line .point {
            position: absolute;
            top: 50%;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.2s;
        }
        .interactive-number-line .point-label {
            position: absolute;
            bottom: 25px;
            left: 50%;
            transform: translateX(-50%);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.9rem;
            font-weight: 700;
            white-space: nowrap;
        }
    </style>
</head>
<body class="bg-slate-50">

    <header class="bg-white/80 backdrop-blur-lg shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <h1 class="text-xl md:text-2xl font-bold text-sky-700">國中數學銜接教材</h1>
                <div class="hidden md:flex items-center space-x-6">
                    <a href="#module1" class="nav-link text-slate-600 hover:text-sky-600 border-b-2 border-transparent hover:border-sky-600 pb-1">1. 探索正負數</a>
                    <a href="#module2" class="nav-link text-slate-600 hover:text-sky-600 border-b-2 border-transparent hover:border-sky-600 pb-1">2. 玩轉數線</a>
                    <a href="#concepts" class="nav-link text-slate-600 hover:text-sky-600 border-b-2 border-transparent hover:border-sky-600 pb-1">3. 觀念釐清</a>
                    <a href="#module3" class="nav-link text-slate-600 hover:text-sky-600 border-b-2 border-transparent hover:border-sky-600 pb-1">4. 解密絕對值</a>
                </div>
                <div class="md:hidden">
                    <select id="mobile-nav" class="bg-slate-100 border border-slate-300 rounded-md p-2 text-slate-700">
                        <option value="#module1">1. 探索正負數</option>
                        <option value="#module2">2. 玩轉數線</option>
                        <option value="#concepts">3. 觀念釐清</option>
                        <option value="#module3">4. 解密絕對值</option>
                    </select>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 md:p-8">
        <div class="text-center mb-12">
            <h2 class="text-4xl font-bold text-slate-800 mb-2">1-1 負數與數線</h2>
            <p class="text-lg text-slate-600">透過互動操作，建立穩固的數學基礎觀念。</p>
        </div>

        <!-- Module 1: Positive & Negative Numbers -->
        <section id="module1" class="mb-16 p-6 bg-white rounded-xl shadow-lg">
            <h3 class="text-2xl font-bold mb-1 text-sky-800">1. 探索正負數</h3>
            <p class="text-slate-600 mb-6">生活中充滿了相對的量。我們用一個「基準點 (0)」來區分它們。試著拖動下方的滑桿，觀察溫度計和海拔高度如何用正負數表示。</p>
            <div class="grid md:grid-cols-2 gap-8 items-center">
                <div class="flex flex-col items-center">
                    <div class="w-full max-w-xs">
                         <label for="value-slider" class="block text-center text-slate-700 mb-2">拖動滑桿改變數值</label>
                        <input id="value-slider" type="range" min="-50" max="50" value="20" class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer">
                        <div class="flex justify-between text-xs text-slate-500 px-1 mt-1">
                            <span>-50</span>
                            <span>0</span>
                            <span>+50</span>
                        </div>
                    </div>
                </div>
                <div class="flex justify-around items-end h-64">
                    <!-- Thermometer -->
                    <div class="text-center">
                        <p class="font-semibold mb-2">溫度計</p>
                        <div class="w-12 h-56 bg-slate-200 rounded-full flex justify-center items-end p-1.5 relative">
                            <div id="mercury" class="w-full bg-red-500 rounded-b-full transition-all duration-200" style="height: 70%;"></div>
                             <div class="absolute top-1/2 left-full ml-2 w-px h-px">
                                <span class="absolute -translate-y-1/2 text-xs text-slate-500 whitespace-nowrap">0°C</span>
                            </div>
                        </div>
                        <p id="temp-display" class="mt-2 text-lg font-bold text-red-600">+20°C</p>
                    </div>
                    <!-- Altitude -->
                    <div class="text-center">
                        <p class="font-semibold mb-2">海拔高度</p>
                        <div class="w-24 h-56 bg-sky-100 relative overflow-hidden rounded-md">
                            <div class="absolute bottom-0 w-full h-1/2 bg-cyan-600"></div>
                            <div id="altitude-marker" class="absolute left-1/2 w-8 h-8 -translate-x-1/2 transition-all duration-200" style="bottom: 70%;">
                                <span class="text-3xl">⛰️</span>
                            </div>
                            <div class="absolute top-1/2 left-0 w-full h-0.5 bg-sky-800/50">
                                <span class="absolute top-0 left-full ml-2 text-xs text-slate-500 whitespace-nowrap">海平面 0m</span>
                            </div>
                        </div>
                        <p id="altitude-display" class="mt-2 text-lg font-bold text-sky-700">+2000m</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Module 2: Number Line -->
        <section id="module2" class="mb-16 p-6 bg-white rounded-xl shadow-lg">
            <h3 class="text-2xl font-bold mb-1 text-sky-800">2. 玩轉數線</h3>
            <p class="text-slate-600 mb-6">數線是數字的家。在下面的數線上點擊，標示出任意數字的位置。愈右邊的點，代表的數愈大。</p>
            <div id="interactive-line-1" class="interactive-number-line mb-4"></div>
            <div class="text-center">
                <button id="clear-points-btn" class="mt-4 bg-slate-500 hover:bg-slate-600 text-white font-bold py-2 px-4 rounded-lg transition-colors">清除所有標示點</button>
            </div>
        </section>
        
        <!-- NEW Module: Key Concepts -->
        <section id="concepts" class="mb-16 p-6 bg-white rounded-xl shadow-lg">
            <h3 class="text-2xl font-bold mb-4 text-sky-800">3. 觀念釐清：別再搞混了！</h3>
            <div class="space-y-6 text-base">
                <div>
                    <h4 class="font-bold text-lg text-amber-700"># 相反數是什麼？</h4>
                    <p class="text-slate-700 mt-2 leading-relaxed">
                        在數線上，站在原點(0)的兩側，而且和原點<strong class="text-orange-600">「距離相等」</strong>的兩個數，就互為相反數。
                        <br>例如：<code class="bg-slate-200 px-1 rounded">-5</code> 的相反數是 <code class="bg-slate-200 px-1 rounded">5</code>。它們到0的距離都是5。
                        <br><strong>關鍵特性：</strong> 互為相反數的兩個數，絕對值相等。
                    </p>
                </div>
                <div>
                    <h4 class="font-bold text-lg text-amber-700"># 數值 vs. 絕對值：哪裡不一樣？</h4>
                    <p class="text-slate-700 mt-2 leading-relaxed">
                        這是最容易混淆的地方！記得它們回答的問題不同：
                        <br>• <strong>數值</strong>：代表在數線上的<strong class="text-blue-600">「位置」</strong>。它有方向性（正或負）。問的是：「它在哪裡？」
                        <br>• <strong>絕對值</strong>：代表與原點0的<strong class="text-orange-600">「距離」</strong>。它永遠是正數或0。問的是：「它離起點多遠？」
                    </p>
                </div>
                <div>
                    <h4 class="font-bold text-lg text-amber-700"># 負數比大小的陷阱</h4>
                    <p class="text-slate-700 mt-2 leading-relaxed">
                        很多人會覺得 -10 比 -2 大，因為 10 比 2 大。這是錯的！
                        <br><strong>唯一準則：</strong> 在數線上，<strong class="text-red-600">愈右邊的數愈大</strong>。
                        <br>因為 -2 在 -10 的右邊，所以 <code class="bg-slate-200 px-1 rounded">-2 > -10</code>。可以想像成：氣溫零下2度比零下10度要溫暖一些！
                    </p>
                </div>
            </div>
        </section>

        <!-- Module 3: Absolute Value -->
        <section id="module3" class="p-6 bg-white rounded-xl shadow-lg">
            <h3 class="text-2xl font-bold mb-1 text-sky-800">4. 解密絕對值</h3>
            <p class="text-slate-600 mb-4">絕對值的核心意義是「與原點 (0) 的距離」，所以絕對值永遠不會是負數。輸入兩個數字，觀察它們的「數值」和「絕對值」有何不同。</p>
            <div class="grid md:grid-cols-2 gap-6 mb-6">
                <div>
                    <label for="numA" class="block text-sm font-medium text-slate-700">數字 A</label>
                    <input type="number" id="numA" value="-5" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm p-2">
                </div>
                <div>
                    <label for="numB" class="block text-sm font-medium text-slate-700">數字 B</label>
                    <input type="number" id="numB" value="3" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm p-2">
                </div>
            </div>
            <div id="interactive-line-2" class="interactive-number-line mb-8"></div>
            <p class="text-slate-600 mb-4 text-center">下方的圖表清楚地比較了兩數的「數值大小」與「絕對值大小（與0的距離）」。</p>
            <div class="chart-container">
                <canvas id="abs-chart"></canvas>
            </div>
        </section>

    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- Navigation ---
            const setupNavigation = () => {
                document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                    anchor.addEventListener('click', function (e) {
                        e.preventDefault();
                        const targetElement = document.querySelector(this.getAttribute('href'));
                        if(targetElement) {
                            targetElement.scrollIntoView({
                                behavior: 'smooth'
                            });
                        }
                    });
                });
                const mobileNav = document.getElementById('mobile-nav');
                mobileNav.addEventListener('change', (e) => {
                    const targetElement = document.querySelector(e.target.value);
                    if(targetElement) {
                        targetElement.scrollIntoView({
                           behavior: 'smooth'
                       });
                    }
                });
            };

            // --- Module 1: Positive/Negative Numbers ---
            const setupModule1 = () => {
                const slider = document.getElementById('value-slider');
                const mercury = document.getElementById('mercury');
                const tempDisplay = document.getElementById('temp-display');
                const altitudeMarker = document.getElementById('altitude-marker');
                const altitudeDisplay = document.getElementById('altitude-display');

                const updateVisuals = (value) => {
                    const percentage = (parseInt(value) + 50);
                    
                    mercury.style.height = `${percentage}%`;
                    tempDisplay.textContent = `${value >= 0 ? '+' : ''}${value}°C`;
                    mercury.style.backgroundColor = value >= 0 ? '#ef4444' : '#3b82f6';
                    tempDisplay.style.color = value >= 0 ? '#dc2626' : '#2563eb';

                    altitudeMarker.style.bottom = `${percentage}%`;
                    const altitude = value * 100;
                    altitudeDisplay.textContent = `${altitude >= 0 ? '+' : ''}${altitude}m`;
                    altitudeDisplay.style.color = altitude >= 0 ? '#0369a1' : '#0891b2';
                };

                slider.addEventListener('input', (e) => updateVisuals(e.target.value));
                updateVisuals(slider.value);
            };

            // --- Interactive Number Line Factory ---
            const createInteractiveNumberLine = (containerId, range = 10) => {
                const container = document.getElementById(containerId);
                if (!container) return;

                container.innerHTML = '<div class="line"></div>';
                const ticks = range * 2;
                for (let i = 0; i <= ticks; i++) {
                    const value = i - range;
                    const tickEl = document.createElement('div');
                    tickEl.className = 'tick';
                    const leftPos = (i / ticks) * 100;
                    tickEl.style.left = `${leftPos}%`;
                    
                    if (value % 5 === 0 || range <= 5) {
                        tickEl.style.height = '20px';
                        const labelEl = document.createElement('div');
                        labelEl.className = 'tick-label';
                        labelEl.textContent = value;
                        labelEl.style.left = `${leftPos}%`;
                        container.appendChild(labelEl);
                    }
                    container.appendChild(tickEl);
                }

                const addPoint = (value, label, color = 'bg-sky-500', id = '') => {
                    if (value < -range || value > range) return;
                    
                    const existingPoint = id ? document.getElementById(id) : null;
                    if(existingPoint) existingPoint.remove();

                    const pointEl = document.createElement('div');
                    pointEl.className = `point ${color}`;
                    if(id) pointEl.id = id;
                    
                    const leftPos = ((value + range) / (range * 2)) * 100;
                    pointEl.style.left = `${leftPos}%`;

                    const labelEl = document.createElement('div');
                    labelEl.className = `point-label text-white ${color}`;
                    labelEl.textContent = label;
                    pointEl.appendChild(labelEl);
                    
                    container.appendChild(pointEl);
                };

                const addDistanceLine = (value, color = 'bg-orange-500/50', id = '') => {
                     if (value < -range || value > range) return;

                    const existingLine = id ? document.getElementById(id) : null;
                    if(existingLine) existingLine.remove();

                    const distLine = document.createElement('div');
                    if(id) distLine.id = id;
                    distLine.style.position = 'absolute';
                    distLine.style.top = '10px';
                    distLine.style.height = '5px';
                    distLine.style.backgroundColor = color;
                    distLine.className = 'rounded-full';

                    const absValue = Math.abs(value);
                    const width = (absValue / (range * 2)) * 100;
                    distLine.style.width = `${width}%`;

                    if (value > 0) {
                        distLine.style.left = '50%';
                    } else {
                        const leftPos = ((value + range) / (range * 2)) * 100;
                        distLine.style.left = `${leftPos}%`;
                    }
                    container.appendChild(distLine);
                };
                
                const clearPoints = () => {
                    container.querySelectorAll('.point').forEach(p => p.remove());
                    container.querySelectorAll('[id^="dist-"]').forEach(d => d.remove());
                };

                return { container, addPoint, addDistanceLine, clearPoints, range };
            };

            // --- Module 2: Number Line ---
            const setupModule2 = () => {
                const lineInstance = createInteractiveNumberLine('interactive-line-1', 10);
                lineInstance.container.addEventListener('click', (e) => {
                    const rect = e.target.closest('.interactive-number-line').getBoundingClientRect();
                    const clickX = e.clientX - rect.left;
                    const percentage = clickX / rect.width;
                    const value = (percentage * (lineInstance.range * 2)) - lineInstance.range;
                    const roundedValue = Math.round(value * 10) / 10;
                    lineInstance.addPoint(roundedValue, roundedValue.toString(), 'bg-teal-500');
                });
                document.getElementById('clear-points-btn').addEventListener('click', lineInstance.clearPoints);
            };

            // --- Module 3: Absolute Value ---
            const setupModule3 = () => {
                const numAInput = document.getElementById('numA');
                const numBInput = document.getElementById('numB');
                const lineInstance = createInteractiveNumberLine('interactive-line-2', 10);

                const ctx = document.getElementById('abs-chart').getContext('2d');
                // UPDATED CHART CONFIGURATION
                const absChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['數值', '絕對值'], // X-axis now represents the concept
                        datasets: [
                            {
                                label: '數字 A', // Series 1 is for Number A
                                data: [0, 0],
                                backgroundColor: 'rgba(59, 130, 246, 0.6)', // Blue for A
                                borderColor: 'rgba(59, 130, 246, 1)',
                                borderWidth: 1
                            },
                            {
                                label: '數字 B', // Series 2 is for Number B
                                data: [0, 0],
                                backgroundColor: 'rgba(249, 115, 22, 0.6)', // Orange for B
                                borderColor: 'rgba(249, 115, 22, 1)',
                                borderWidth: 1
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: { display: true, text: '大小' }
                            }
                        },
                        plugins: {
                            legend: { position: 'top' },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.dataset.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.parsed.y !== null) {
                                            label += context.parsed.y;
                                        }
                                        return label;
                                    }
                                }
                            }
                        }
                    }
                });

                const updateAbsModule = () => {
                    const valA = parseFloat(numAInput.value) || 0;
                    const valB = parseFloat(numBInput.value) || 0;

                    // Number line colors remain consistent: Blue for A, Orange for B
                    lineInstance.clearPoints();
                    lineInstance.addPoint(valA, `A: ${valA}`, 'bg-blue-500', 'point-a');
                    lineInstance.addPoint(valB, `B: ${valB}`, 'bg-orange-500', 'point-b');
                    lineInstance.addDistanceLine(valA, '#3b82f680', 'dist-a'); // Light Blue for A's distance
                    lineInstance.addDistanceLine(valB, '#f9731680', 'dist-b'); // Light Orange for B's distance

                    // UPDATED CHART DATA MAPPING
                    // Dataset 0 (Number A) gets [value, absolute_value]
                    absChart.data.datasets[0].data = [valA, Math.abs(valA)];
                    // Dataset 1 (Number B) gets [value, absolute_value]
                    absChart.data.datasets[1].data = [valB, Math.abs(valB)];
                    absChart.update();
                };

                numAInput.addEventListener('input', updateAbsModule);
                numBInput.addEventListener('input', updateAbsModule);
                updateAbsModule();
            };

            // Initialize all modules
            setupNavigation();
            setupModule1();
            setupModule2();
            setupModule3();
        });
    </script>
</body>
</html></div>
</body></html>

=== FILE: docs\materials\ray\math\2025-08-10_瑞瑞第一課數學.html ===
<!doctype html><html lang="zh-Hant"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>瑞瑞第一課數學</title>
<style>body{font-family:system-ui,"Noto Sans TC",Arial,sans-serif;margin:0;background:#f6f7fb;}
.header{background:#111827;color:#fff;padding:10px 14px;}
.header a{color:#a7f3d0;text-decoration:none}
.container{max-width:900px;margin:18px auto;background:#fff;border-radius:12px;padding:18px 20px;box-shadow:0 10px 30px rgba(0,0,0,.06)}</style>
</head><body>
<div class="header">← <a href="../../../index.html?student=ray&date=2025-08-10">返回日曆</a></div>
<div class="container"><h1>瑞瑞第一課數學</h1><!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>互動式數學教材：負數與數線</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Neutrals -->
    <!-- Application Structure Plan: A single-page application with four interactive/informational modules ("1. 探索正負數", "2. 玩轉數線", "3. 觀念釐清", "4. 解密絕對值") navigated by a sticky top bar. This thematic, hands-on structure is chosen over a linear text format to enhance engagement and clarify abstract concepts through direct manipulation and immediate visual feedback, which is more effective for foundational math learning. The goal is to transform passive reading into active exploration. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Relative quantities & benchmarks -> Goal: Inform -> Viz/Presentation: Interactive Slider with a dynamic thermometer visual (HTML/CSS/JS) -> Interaction: User drags slider to see value and visual change -> Justification: Makes the abstract concept of a benchmark tangible and connects it to a familiar real-world example.
        - Report Info: Number line and number comparison -> Goal: Organize/Compare -> Viz/Presentation: Large, interactive number line where users can place points (HTML/CSS/JS) -> Interaction: User clicks to add a point, and its value is displayed -> Justification: Promotes active learning and spatial understanding of number placement and order over passive observation.
        - Report Info: Confusing concepts (Opposite Numbers, Value vs. Absolute Value) -> Goal: Clarify/Differentiate -> Viz/Presentation: A dedicated text-based section with clear headings and highlighted keywords -> Interaction: Reading and comprehension -> Justification: Directly addresses common student misconceptions before they interact with the final module, improving learning outcomes.
        - Report Info: Value vs. Absolute Value -> Goal: Compare/Differentiate -> Viz/Presentation: A dual-bar chart (Chart.js) with a restructured data model. Color now consistently represents the entity (Number A or Number B), while the x-axis categorizes the concept (Value vs. Absolute Value). -> Interaction: User inputs two numbers, and the chart and number line immediately update -> Justification: This revised structure provides a powerful, direct visual comparison that highlights the core difference between a number's value and its absolute value without any color ambiguity.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f8fafc; /* slate-50 */
            color: #1e293b; /* slate-800 */
        }
        html {
            scroll-padding-top: 5rem; /* Offset for sticky header */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 40vh;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .nav-link {
            transition: color 0.3s, border-color 0.3s;
        }
        .interactive-number-line {
            position: relative;
            height: 50px;
            background-color: #e2e8f0; /* slate-200 */
            border-radius: 8px;
            cursor: crosshair;
        }
        .interactive-number-line .line {
            position: absolute;
            left: 0;
            right: 0;
            top: 50%;
            height: 2px;
            background-color: #475569; /* slate-600 */
        }
        .interactive-number-line .tick {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 2px;
            height: 10px;
            background-color: #475569; /* slate-600 */
        }
        .interactive-number-line .tick-label {
            position: absolute;
            top: 28px;
            transform: translateX(-50%);
            font-size: 0.8rem;
            color: #334155; /* slate-700 */
        }
        .interactive-number-line .point {
            position: absolute;
            top: 50%;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.2s;
        }
        .interactive-number-line .point-label {
            position: absolute;
            bottom: 25px;
            left: 50%;
            transform: translateX(-50%);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.9rem;
            font-weight: 700;
            white-space: nowrap;
        }
    </style>
</head>
<body class="bg-slate-50">

    <header class="bg-white/80 backdrop-blur-lg shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <h1 class="text-xl md:text-2xl font-bold text-sky-700">國中數學銜接教材</h1>
                <div class="hidden md:flex items-center space-x-6">
                    <a href="#module1" class="nav-link text-slate-600 hover:text-sky-600 border-b-2 border-transparent hover:border-sky-600 pb-1">1. 探索正負數</a>
                    <a href="#module2" class="nav-link text-slate-600 hover:text-sky-600 border-b-2 border-transparent hover:border-sky-600 pb-1">2. 玩轉數線</a>
                    <a href="#concepts" class="nav-link text-slate-600 hover:text-sky-600 border-b-2 border-transparent hover:border-sky-600 pb-1">3. 觀念釐清</a>
                    <a href="#module3" class="nav-link text-slate-600 hover:text-sky-600 border-b-2 border-transparent hover:border-sky-600 pb-1">4. 解密絕對值</a>
                </div>
                <div class="md:hidden">
                    <select id="mobile-nav" class="bg-slate-100 border border-slate-300 rounded-md p-2 text-slate-700">
                        <option value="#module1">1. 探索正負數</option>
                        <option value="#module2">2. 玩轉數線</option>
                        <option value="#concepts">3. 觀念釐清</option>
                        <option value="#module3">4. 解密絕對值</option>
                    </select>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 md:p-8">
        <div class="text-center mb-12">
            <h2 class="text-4xl font-bold text-slate-800 mb-2">1-1 負數與數線</h2>
            <p class="text-lg text-slate-600">透過互動操作，建立穩固的數學基礎觀念。</p>
        </div>

        <!-- Module 1: Positive & Negative Numbers -->
        <section id="module1" class="mb-16 p-6 bg-white rounded-xl shadow-lg">
            <h3 class="text-2xl font-bold mb-1 text-sky-800">1. 探索正負數</h3>
            <p class="text-slate-600 mb-6">生活中充滿了相對的量。我們用一個「基準點 (0)」來區分它們。試著拖動下方的滑桿，觀察溫度計和海拔高度如何用正負數表示。</p>
            <div class="grid md:grid-cols-2 gap-8 items-center">
                <div class="flex flex-col items-center">
                    <div class="w-full max-w-xs">
                         <label for="value-slider" class="block text-center text-slate-700 mb-2">拖動滑桿改變數值</label>
                        <input id="value-slider" type="range" min="-50" max="50" value="20" class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer">
                        <div class="flex justify-between text-xs text-slate-500 px-1 mt-1">
                            <span>-50</span>
                            <span>0</span>
                            <span>+50</span>
                        </div>
                    </div>
                </div>
                <div class="flex justify-around items-end h-64">
                    <!-- Thermometer -->
                    <div class="text-center">
                        <p class="font-semibold mb-2">溫度計</p>
                        <div class="w-12 h-56 bg-slate-200 rounded-full flex justify-center items-end p-1.5 relative">
                            <div id="mercury" class="w-full bg-red-500 rounded-b-full transition-all duration-200" style="height: 70%;"></div>
                             <div class="absolute top-1/2 left-full ml-2 w-px h-px">
                                <span class="absolute -translate-y-1/2 text-xs text-slate-500 whitespace-nowrap">0°C</span>
                            </div>
                        </div>
                        <p id="temp-display" class="mt-2 text-lg font-bold text-red-600">+20°C</p>
                    </div>
                    <!-- Altitude -->
                    <div class="text-center">
                        <p class="font-semibold mb-2">海拔高度</p>
                        <div class="w-24 h-56 bg-sky-100 relative overflow-hidden rounded-md">
                            <div class="absolute bottom-0 w-full h-1/2 bg-cyan-600"></div>
                            <div id="altitude-marker" class="absolute left-1/2 w-8 h-8 -translate-x-1/2 transition-all duration-200" style="bottom: 70%;">
                                <span class="text-3xl">⛰️</span>
                            </div>
                            <div class="absolute top-1/2 left-0 w-full h-0.5 bg-sky-800/50">
                                <span class="absolute top-0 left-full ml-2 text-xs text-slate-500 whitespace-nowrap">海平面 0m</span>
                            </div>
                        </div>
                        <p id="altitude-display" class="mt-2 text-lg font-bold text-sky-700">+2000m</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Module 2: Number Line -->
        <section id="module2" class="mb-16 p-6 bg-white rounded-xl shadow-lg">
            <h3 class="text-2xl font-bold mb-1 text-sky-800">2. 玩轉數線</h3>
            <p class="text-slate-600 mb-6">數線是數字的家。在下面的數線上點擊，標示出任意數字的位置。愈右邊的點，代表的數愈大。</p>
            <div id="interactive-line-1" class="interactive-number-line mb-4"></div>
            <div class="text-center">
                <button id="clear-points-btn" class="mt-4 bg-slate-500 hover:bg-slate-600 text-white font-bold py-2 px-4 rounded-lg transition-colors">清除所有標示點</button>
            </div>
        </section>
        
        <!-- NEW Module: Key Concepts -->
        <section id="concepts" class="mb-16 p-6 bg-white rounded-xl shadow-lg">
            <h3 class="text-2xl font-bold mb-4 text-sky-800">3. 觀念釐清：別再搞混了！</h3>
            <div class="space-y-6 text-base">
                <div>
                    <h4 class="font-bold text-lg text-amber-700"># 相反數是什麼？</h4>
                    <p class="text-slate-700 mt-2 leading-relaxed">
                        在數線上，站在原點(0)的兩側，而且和原點<strong class="text-orange-600">「距離相等」</strong>的兩個數，就互為相反數。
                        <br>例如：<code class="bg-slate-200 px-1 rounded">-5</code> 的相反數是 <code class="bg-slate-200 px-1 rounded">5</code>。它們到0的距離都是5。
                        <br><strong>關鍵特性：</strong> 互為相反數的兩個數，絕對值相等。
                    </p>
                </div>
                <div>
                    <h4 class="font-bold text-lg text-amber-700"># 數值 vs. 絕對值：哪裡不一樣？</h4>
                    <p class="text-slate-700 mt-2 leading-relaxed">
                        這是最容易混淆的地方！記得它們回答的問題不同：
                        <br>• <strong>數值</strong>：代表在數線上的<strong class="text-blue-600">「位置」</strong>。它有方向性（正或負）。問的是：「它在哪裡？」
                        <br>• <strong>絕對值</strong>：代表與原點0的<strong class="text-orange-600">「距離」</strong>。它永遠是正數或0。問的是：「它離起點多遠？」
                    </p>
                </div>
                <div>
                    <h4 class="font-bold text-lg text-amber-700"># 負數比大小的陷阱</h4>
                    <p class="text-slate-700 mt-2 leading-relaxed">
                        很多人會覺得 -10 比 -2 大，因為 10 比 2 大。這是錯的！
                        <br><strong>唯一準則：</strong> 在數線上，<strong class="text-red-600">愈右邊的數愈大</strong>。
                        <br>因為 -2 在 -10 的右邊，所以 <code class="bg-slate-200 px-1 rounded">-2 > -10</code>。可以想像成：氣溫零下2度比零下10度要溫暖一些！
                    </p>
                </div>
            </div>
        </section>

        <!-- Module 3: Absolute Value -->
        <section id="module3" class="p-6 bg-white rounded-xl shadow-lg">
            <h3 class="text-2xl font-bold mb-1 text-sky-800">4. 解密絕對值</h3>
            <p class="text-slate-600 mb-4">絕對值的核心意義是「與原點 (0) 的距離」，所以絕對值永遠不會是負數。輸入兩個數字，觀察它們的「數值」和「絕對值」有何不同。</p>
            <div class="grid md:grid-cols-2 gap-6 mb-6">
                <div>
                    <label for="numA" class="block text-sm font-medium text-slate-700">數字 A</label>
                    <input type="number" id="numA" value="-5" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm p-2">
                </div>
                <div>
                    <label for="numB" class="block text-sm font-medium text-slate-700">數字 B</label>
                    <input type="number" id="numB" value="3" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm p-2">
                </div>
            </div>
            <div id="interactive-line-2" class="interactive-number-line mb-8"></div>
            <p class="text-slate-600 mb-4 text-center">下方的圖表清楚地比較了兩數的「數值大小」與「絕對值大小（與0的距離）」。</p>
            <div class="chart-container">
                <canvas id="abs-chart"></canvas>
            </div>
        </section>

    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- Navigation ---
            const setupNavigation = () => {
                document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                    anchor.addEventListener('click', function (e) {
                        e.preventDefault();
                        const targetElement = document.querySelector(this.getAttribute('href'));
                        if(targetElement) {
                            targetElement.scrollIntoView({
                                behavior: 'smooth'
                            });
                        }
                    });
                });
                const mobileNav = document.getElementById('mobile-nav');
                mobileNav.addEventListener('change', (e) => {
                    const targetElement = document.querySelector(e.target.value);
                    if(targetElement) {
                        targetElement.scrollIntoView({
                           behavior: 'smooth'
                       });
                    }
                });
            };

            // --- Module 1: Positive/Negative Numbers ---
            const setupModule1 = () => {
                const slider = document.getElementById('value-slider');
                const mercury = document.getElementById('mercury');
                const tempDisplay = document.getElementById('temp-display');
                const altitudeMarker = document.getElementById('altitude-marker');
                const altitudeDisplay = document.getElementById('altitude-display');

                const updateVisuals = (value) => {
                    const percentage = (parseInt(value) + 50);
                    
                    mercury.style.height = `${percentage}%`;
                    tempDisplay.textContent = `${value >= 0 ? '+' : ''}${value}°C`;
                    mercury.style.backgroundColor = value >= 0 ? '#ef4444' : '#3b82f6';
                    tempDisplay.style.color = value >= 0 ? '#dc2626' : '#2563eb';

                    altitudeMarker.style.bottom = `${percentage}%`;
                    const altitude = value * 100;
                    altitudeDisplay.textContent = `${altitude >= 0 ? '+' : ''}${altitude}m`;
                    altitudeDisplay.style.color = altitude >= 0 ? '#0369a1' : '#0891b2';
                };

                slider.addEventListener('input', (e) => updateVisuals(e.target.value));
                updateVisuals(slider.value);
            };

            // --- Interactive Number Line Factory ---
            const createInteractiveNumberLine = (containerId, range = 10) => {
                const container = document.getElementById(containerId);
                if (!container) return;

                container.innerHTML = '<div class="line"></div>';
                const ticks = range * 2;
                for (let i = 0; i <= ticks; i++) {
                    const value = i - range;
                    const tickEl = document.createElement('div');
                    tickEl.className = 'tick';
                    const leftPos = (i / ticks) * 100;
                    tickEl.style.left = `${leftPos}%`;
                    
                    if (value % 5 === 0 || range <= 5) {
                        tickEl.style.height = '20px';
                        const labelEl = document.createElement('div');
                        labelEl.className = 'tick-label';
                        labelEl.textContent = value;
                        labelEl.style.left = `${leftPos}%`;
                        container.appendChild(labelEl);
                    }
                    container.appendChild(tickEl);
                }

                const addPoint = (value, label, color = 'bg-sky-500', id = '') => {
                    if (value < -range || value > range) return;
                    
                    const existingPoint = id ? document.getElementById(id) : null;
                    if(existingPoint) existingPoint.remove();

                    const pointEl = document.createElement('div');
                    pointEl.className = `point ${color}`;
                    if(id) pointEl.id = id;
                    
                    const leftPos = ((value + range) / (range * 2)) * 100;
                    pointEl.style.left = `${leftPos}%`;

                    const labelEl = document.createElement('div');
                    labelEl.className = `point-label text-white ${color}`;
                    labelEl.textContent = label;
                    pointEl.appendChild(labelEl);
                    
                    container.appendChild(pointEl);
                };

                const addDistanceLine = (value, color = 'bg-orange-500/50', id = '') => {
                     if (value < -range || value > range) return;

                    const existingLine = id ? document.getElementById(id) : null;
                    if(existingLine) existingLine.remove();

                    const distLine = document.createElement('div');
                    if(id) distLine.id = id;
                    distLine.style.position = 'absolute';
                    distLine.style.top = '10px';
                    distLine.style.height = '5px';
                    distLine.style.backgroundColor = color;
                    distLine.className = 'rounded-full';

                    const absValue = Math.abs(value);
                    const width = (absValue / (range * 2)) * 100;
                    distLine.style.width = `${width}%`;

                    if (value > 0) {
                        distLine.style.left = '50%';
                    } else {
                        const leftPos = ((value + range) / (range * 2)) * 100;
                        distLine.style.left = `${leftPos}%`;
                    }
                    container.appendChild(distLine);
                };
                
                const clearPoints = () => {
                    container.querySelectorAll('.point').forEach(p => p.remove());
                    container.querySelectorAll('[id^="dist-"]').forEach(d => d.remove());
                };

                return { container, addPoint, addDistanceLine, clearPoints, range };
            };

            // --- Module 2: Number Line ---
            const setupModule2 = () => {
                const lineInstance = createInteractiveNumberLine('interactive-line-1', 10);
                lineInstance.container.addEventListener('click', (e) => {
                    const rect = e.target.closest('.interactive-number-line').getBoundingClientRect();
                    const clickX = e.clientX - rect.left;
                    const percentage = clickX / rect.width;
                    const value = (percentage * (lineInstance.range * 2)) - lineInstance.range;
                    const roundedValue = Math.round(value * 10) / 10;
                    lineInstance.addPoint(roundedValue, roundedValue.toString(), 'bg-teal-500');
                });
                document.getElementById('clear-points-btn').addEventListener('click', lineInstance.clearPoints);
            };

            // --- Module 3: Absolute Value ---
            const setupModule3 = () => {
                const numAInput = document.getElementById('numA');
                const numBInput = document.getElementById('numB');
                const lineInstance = createInteractiveNumberLine('interactive-line-2', 10);

                const ctx = document.getElementById('abs-chart').getContext('2d');
                // UPDATED CHART CONFIGURATION
                const absChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['數值', '絕對值'], // X-axis now represents the concept
                        datasets: [
                            {
                                label: '數字 A', // Series 1 is for Number A
                                data: [0, 0],
                                backgroundColor: 'rgba(59, 130, 246, 0.6)', // Blue for A
                                borderColor: 'rgba(59, 130, 246, 1)',
                                borderWidth: 1
                            },
                            {
                                label: '數字 B', // Series 2 is for Number B
                                data: [0, 0],
                                backgroundColor: 'rgba(249, 115, 22, 0.6)', // Orange for B
                                borderColor: 'rgba(249, 115, 22, 1)',
                                borderWidth: 1
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: { display: true, text: '大小' }
                            }
                        },
                        plugins: {
                            legend: { position: 'top' },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.dataset.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.parsed.y !== null) {
                                            label += context.parsed.y;
                                        }
                                        return label;
                                    }
                                }
                            }
                        }
                    }
                });

                const updateAbsModule = () => {
                    const valA = parseFloat(numAInput.value) || 0;
                    const valB = parseFloat(numBInput.value) || 0;

                    // Number line colors remain consistent: Blue for A, Orange for B
                    lineInstance.clearPoints();
                    lineInstance.addPoint(valA, `A: ${valA}`, 'bg-blue-500', 'point-a');
                    lineInstance.addPoint(valB, `B: ${valB}`, 'bg-orange-500', 'point-b');
                    lineInstance.addDistanceLine(valA, '#3b82f680', 'dist-a'); // Light Blue for A's distance
                    lineInstance.addDistanceLine(valB, '#f9731680', 'dist-b'); // Light Orange for B's distance

                    // UPDATED CHART DATA MAPPING
                    // Dataset 0 (Number A) gets [value, absolute_value]
                    absChart.data.datasets[0].data = [valA, Math.abs(valA)];
                    // Dataset 1 (Number B) gets [value, absolute_value]
                    absChart.data.datasets[1].data = [valB, Math.abs(valB)];
                    absChart.update();
                };

                numAInput.addEventListener('input', updateAbsModule);
                numBInput.addEventListener('input', updateAbsModule);
                updateAbsModule();
            };

            // Initialize all modules
            setupNavigation();
            setupModule1();
            setupModule2();
            setupModule3();
        });
    </script>
</body>
</html></div>
</body></html>
